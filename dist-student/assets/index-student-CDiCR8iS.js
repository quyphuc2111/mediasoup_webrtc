(function(){const w=document.createElement("link").relList;if(w&&w.supports&&w.supports("modulepreload"))return;for(const A of document.querySelectorAll('link[rel="modulepreload"]'))s(A);new MutationObserver(A=>{for(const N of A)if(N.type==="childList")for(const R of N.addedNodes)R.tagName==="LINK"&&R.rel==="modulepreload"&&s(R)}).observe(document,{childList:!0,subtree:!0});function _(A){const N={};return A.integrity&&(N.integrity=A.integrity),A.referrerPolicy&&(N.referrerPolicy=A.referrerPolicy),A.crossOrigin==="use-credentials"?N.credentials="include":A.crossOrigin==="anonymous"?N.credentials="omit":N.credentials="same-origin",N}function s(A){if(A.ep)return;A.ep=!0;const N=_(A);fetch(A.href,N)}})();function xh(y){return y&&y.__esModule&&Object.prototype.hasOwnProperty.call(y,"default")?y.default:y}var sl={exports:{}},qi={};var Ep;function tv(){if(Ep)return qi;Ep=1;var y=Symbol.for("react.transitional.element"),w=Symbol.for("react.fragment");function _(s,A,N){var R=null;if(N!==void 0&&(R=""+N),A.key!==void 0&&(R=""+A.key),"key"in A){N={};for(var m in A)m!=="key"&&(N[m]=A[m])}else N=A;return A=N.ref,{$$typeof:y,type:s,key:R,ref:A!==void 0?A:null,props:N}}return qi.Fragment=w,qi.jsx=_,qi.jsxs=_,qi}var Rp;function av(){return Rp||(Rp=1,sl.exports=tv()),sl.exports}var ge=av(),cl={exports:{}},le={};var Dp;function nv(){if(Dp)return le;Dp=1;var y=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),N=Symbol.for("react.consumer"),R=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),T=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),C=Symbol.iterator;function H(U){return U===null||typeof U!="object"?null:(U=C&&U[C]||U["@@iterator"],typeof U=="function"?U:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},c=Object.assign,l={};function d(U,$,ae){this.props=U,this.context=$,this.refs=l,this.updater=ae||k}d.prototype.isReactComponent={},d.prototype.setState=function(U,$){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,$,"setState")},d.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function g(){}g.prototype=d.prototype;function x(U,$,ae){this.props=U,this.context=$,this.refs=l,this.updater=ae||k}var E=x.prototype=new g;E.constructor=x,c(E,d.prototype),E.isPureReactComponent=!0;var M=Array.isArray;function b(){}var f={H:null,A:null,T:null,S:null},v=Object.prototype.hasOwnProperty;function O(U,$,ae){var re=ae.ref;return{$$typeof:y,type:U,key:$,ref:re!==void 0?re:null,props:ae}}function q(U,$){return O(U.type,$,U.props)}function W(U){return typeof U=="object"&&U!==null&&U.$$typeof===y}function ee(U){var $={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(ae){return $[ae]})}var h=/\/+/g;function Q(U,$){return typeof U=="object"&&U!==null&&U.key!=null?ee(""+U.key):$.toString(36)}function I(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(b,b):(U.status="pending",U.then(function($){U.status==="pending"&&(U.status="fulfilled",U.value=$)},function($){U.status==="pending"&&(U.status="rejected",U.reason=$)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function D(U,$,ae,re,ue){var pe=typeof U;(pe==="undefined"||pe==="boolean")&&(U=null);var Ce=!1;if(U===null)Ce=!0;else switch(pe){case"bigint":case"string":case"number":Ce=!0;break;case"object":switch(U.$$typeof){case y:case w:Ce=!0;break;case u:return Ce=U._init,D(Ce(U._payload),$,ae,re,ue)}}if(Ce)return ue=ue(U),Ce=re===""?"."+Q(U,0):re,M(ue)?(ae="",Ce!=null&&(ae=Ce.replace(h,"$&/")+"/"),D(ue,$,ae,"",function(Vn){return Vn})):ue!=null&&(W(ue)&&(ue=q(ue,ae+(ue.key==null||U&&U.key===ue.key?"":(""+ue.key).replace(h,"$&/")+"/")+Ce)),$.push(ue)),1;Ce=0;var We=re===""?".":re+":";if(M(U))for(var je=0;je<U.length;je++)re=U[je],pe=We+Q(re,je),Ce+=D(re,$,ae,pe,ue);else if(je=H(U),typeof je=="function")for(U=je.call(U),je=0;!(re=U.next()).done;)re=re.value,pe=We+Q(re,je++),Ce+=D(re,$,ae,pe,ue);else if(pe==="object"){if(typeof U.then=="function")return D(I(U),$,ae,re,ue);throw $=String(U),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return Ce}function G(U,$,ae){if(U==null)return U;var re=[],ue=0;return D(U,re,"","",function(pe){return $.call(ae,pe,ue++)}),re}function K(U){if(U._status===-1){var $=U._result;$=$(),$.then(function(ae){(U._status===0||U._status===-1)&&(U._status=1,U._result=ae)},function(ae){(U._status===0||U._status===-1)&&(U._status=2,U._result=ae)}),U._status===-1&&(U._status=0,U._result=$)}if(U._status===1)return U._result.default;throw U._result}var te=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)},ne={map:G,forEach:function(U,$,ae){G(U,function(){$.apply(this,arguments)},ae)},count:function(U){var $=0;return G(U,function(){$++}),$},toArray:function(U){return G(U,function($){return $})||[]},only:function(U){if(!W(U))throw Error("React.Children.only expected to receive a single React element child.");return U}};return le.Activity=S,le.Children=ne,le.Component=d,le.Fragment=_,le.Profiler=A,le.PureComponent=x,le.StrictMode=s,le.Suspense=L,le.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=f,le.__COMPILER_RUNTIME={__proto__:null,c:function(U){return f.H.useMemoCache(U)}},le.cache=function(U){return function(){return U.apply(null,arguments)}},le.cacheSignal=function(){return null},le.cloneElement=function(U,$,ae){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var re=c({},U.props),ue=U.key;if($!=null)for(pe in $.key!==void 0&&(ue=""+$.key),$)!v.call($,pe)||pe==="key"||pe==="__self"||pe==="__source"||pe==="ref"&&$.ref===void 0||(re[pe]=$[pe]);var pe=arguments.length-2;if(pe===1)re.children=ae;else if(1<pe){for(var Ce=Array(pe),We=0;We<pe;We++)Ce[We]=arguments[We+2];re.children=Ce}return O(U.type,ue,re)},le.createContext=function(U){return U={$$typeof:R,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:N,_context:U},U},le.createElement=function(U,$,ae){var re,ue={},pe=null;if($!=null)for(re in $.key!==void 0&&(pe=""+$.key),$)v.call($,re)&&re!=="key"&&re!=="__self"&&re!=="__source"&&(ue[re]=$[re]);var Ce=arguments.length-2;if(Ce===1)ue.children=ae;else if(1<Ce){for(var We=Array(Ce),je=0;je<Ce;je++)We[je]=arguments[je+2];ue.children=We}if(U&&U.defaultProps)for(re in Ce=U.defaultProps,Ce)ue[re]===void 0&&(ue[re]=Ce[re]);return O(U,pe,ue)},le.createRef=function(){return{current:null}},le.forwardRef=function(U){return{$$typeof:m,render:U}},le.isValidElement=W,le.lazy=function(U){return{$$typeof:u,_payload:{_status:-1,_result:U},_init:K}},le.memo=function(U,$){return{$$typeof:T,type:U,compare:$===void 0?null:$}},le.startTransition=function(U){var $=f.T,ae={};f.T=ae;try{var re=U(),ue=f.S;ue!==null&&ue(ae,re),typeof re=="object"&&re!==null&&typeof re.then=="function"&&re.then(b,te)}catch(pe){te(pe)}finally{$!==null&&ae.types!==null&&($.types=ae.types),f.T=$}},le.unstable_useCacheRefresh=function(){return f.H.useCacheRefresh()},le.use=function(U){return f.H.use(U)},le.useActionState=function(U,$,ae){return f.H.useActionState(U,$,ae)},le.useCallback=function(U,$){return f.H.useCallback(U,$)},le.useContext=function(U){return f.H.useContext(U)},le.useDebugValue=function(){},le.useDeferredValue=function(U,$){return f.H.useDeferredValue(U,$)},le.useEffect=function(U,$){return f.H.useEffect(U,$)},le.useEffectEvent=function(U){return f.H.useEffectEvent(U)},le.useId=function(){return f.H.useId()},le.useImperativeHandle=function(U,$,ae){return f.H.useImperativeHandle(U,$,ae)},le.useInsertionEffect=function(U,$){return f.H.useInsertionEffect(U,$)},le.useLayoutEffect=function(U,$){return f.H.useLayoutEffect(U,$)},le.useMemo=function(U,$){return f.H.useMemo(U,$)},le.useOptimistic=function(U,$){return f.H.useOptimistic(U,$)},le.useReducer=function(U,$,ae){return f.H.useReducer(U,$,ae)},le.useRef=function(U){return f.H.useRef(U)},le.useState=function(U){return f.H.useState(U)},le.useSyncExternalStore=function(U,$,ae){return f.H.useSyncExternalStore(U,$,ae)},le.useTransition=function(){return f.H.useTransition()},le.version="19.2.3",le}var Mp;function bl(){return Mp||(Mp=1,cl.exports=nv()),cl.exports}var ze=bl();const iv=xh(ze);var ol={exports:{}},Hi={},ll={exports:{}},ul={};var xp;function rv(){return xp||(xp=1,(function(y){function w(D,G){var K=D.length;D.push(G);e:for(;0<K;){var te=K-1>>>1,ne=D[te];if(0<A(ne,G))D[te]=G,D[K]=ne,K=te;else break e}}function _(D){return D.length===0?null:D[0]}function s(D){if(D.length===0)return null;var G=D[0],K=D.pop();if(K!==G){D[0]=K;e:for(var te=0,ne=D.length,U=ne>>>1;te<U;){var $=2*(te+1)-1,ae=D[$],re=$+1,ue=D[re];if(0>A(ae,K))re<ne&&0>A(ue,ae)?(D[te]=ue,D[re]=K,te=re):(D[te]=ae,D[$]=K,te=$);else if(re<ne&&0>A(ue,K))D[te]=ue,D[re]=K,te=re;else break e}}return G}function A(D,G){var K=D.sortIndex-G.sortIndex;return K!==0?K:D.id-G.id}if(y.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var N=performance;y.unstable_now=function(){return N.now()}}else{var R=Date,m=R.now();y.unstable_now=function(){return R.now()-m}}var L=[],T=[],u=1,S=null,C=3,H=!1,k=!1,c=!1,l=!1,d=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;function E(D){for(var G=_(T);G!==null;){if(G.callback===null)s(T);else if(G.startTime<=D)s(T),G.sortIndex=G.expirationTime,w(L,G);else break;G=_(T)}}function M(D){if(c=!1,E(D),!k)if(_(L)!==null)k=!0,b||(b=!0,ee());else{var G=_(T);G!==null&&I(M,G.startTime-D)}}var b=!1,f=-1,v=5,O=-1;function q(){return l?!0:!(y.unstable_now()-O<v)}function W(){if(l=!1,b){var D=y.unstable_now();O=D;var G=!0;try{e:{k=!1,c&&(c=!1,g(f),f=-1),H=!0;var K=C;try{t:{for(E(D),S=_(L);S!==null&&!(S.expirationTime>D&&q());){var te=S.callback;if(typeof te=="function"){S.callback=null,C=S.priorityLevel;var ne=te(S.expirationTime<=D);if(D=y.unstable_now(),typeof ne=="function"){S.callback=ne,E(D),G=!0;break t}S===_(L)&&s(L),E(D)}else s(L);S=_(L)}if(S!==null)G=!0;else{var U=_(T);U!==null&&I(M,U.startTime-D),G=!1}}break e}finally{S=null,C=K,H=!1}G=void 0}}finally{G?ee():b=!1}}}var ee;if(typeof x=="function")ee=function(){x(W)};else if(typeof MessageChannel<"u"){var h=new MessageChannel,Q=h.port2;h.port1.onmessage=W,ee=function(){Q.postMessage(null)}}else ee=function(){d(W,0)};function I(D,G){f=d(function(){D(y.unstable_now())},G)}y.unstable_IdlePriority=5,y.unstable_ImmediatePriority=1,y.unstable_LowPriority=4,y.unstable_NormalPriority=3,y.unstable_Profiling=null,y.unstable_UserBlockingPriority=2,y.unstable_cancelCallback=function(D){D.callback=null},y.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):v=0<D?Math.floor(1e3/D):5},y.unstable_getCurrentPriorityLevel=function(){return C},y.unstable_next=function(D){switch(C){case 1:case 2:case 3:var G=3;break;default:G=C}var K=C;C=G;try{return D()}finally{C=K}},y.unstable_requestPaint=function(){l=!0},y.unstable_runWithPriority=function(D,G){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var K=C;C=D;try{return G()}finally{C=K}},y.unstable_scheduleCallback=function(D,G,K){var te=y.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?te+K:te):K=te,D){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=K+ne,D={id:u++,callback:G,priorityLevel:D,startTime:K,expirationTime:ne,sortIndex:-1},K>te?(D.sortIndex=K,w(T,D),_(L)===null&&D===_(T)&&(c?(g(f),f=-1):c=!0,I(M,K-te))):(D.sortIndex=ne,w(L,D),k||H||(k=!0,b||(b=!0,ee()))),D},y.unstable_shouldYield=q,y.unstable_wrapCallback=function(D){var G=C;return function(){var K=C;C=G;try{return D.apply(this,arguments)}finally{C=K}}}})(ul)),ul}var Op;function sv(){return Op||(Op=1,ll.exports=rv()),ll.exports}var dl={exports:{}},$e={};var Lp;function cv(){if(Lp)return $e;Lp=1;var y=bl();function w(L){var T="https://react.dev/errors/"+L;if(1<arguments.length){T+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)T+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+L+"; visit "+T+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function _(){}var s={d:{f:_,r:function(){throw Error(w(522))},D:_,C:_,L:_,m:_,X:_,S:_,M:_},p:0,findDOMNode:null},A=Symbol.for("react.portal");function N(L,T,u){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:A,key:S==null?null:""+S,children:L,containerInfo:T,implementation:u}}var R=y.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(L,T){if(L==="font")return"";if(typeof T=="string")return T==="use-credentials"?T:""}return $e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,$e.createPortal=function(L,T){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!T||T.nodeType!==1&&T.nodeType!==9&&T.nodeType!==11)throw Error(w(299));return N(L,T,null,u)},$e.flushSync=function(L){var T=R.T,u=s.p;try{if(R.T=null,s.p=2,L)return L()}finally{R.T=T,s.p=u,s.d.f()}},$e.preconnect=function(L,T){typeof L=="string"&&(T?(T=T.crossOrigin,T=typeof T=="string"?T==="use-credentials"?T:"":void 0):T=null,s.d.C(L,T))},$e.prefetchDNS=function(L){typeof L=="string"&&s.d.D(L)},$e.preinit=function(L,T){if(typeof L=="string"&&T&&typeof T.as=="string"){var u=T.as,S=m(u,T.crossOrigin),C=typeof T.integrity=="string"?T.integrity:void 0,H=typeof T.fetchPriority=="string"?T.fetchPriority:void 0;u==="style"?s.d.S(L,typeof T.precedence=="string"?T.precedence:void 0,{crossOrigin:S,integrity:C,fetchPriority:H}):u==="script"&&s.d.X(L,{crossOrigin:S,integrity:C,fetchPriority:H,nonce:typeof T.nonce=="string"?T.nonce:void 0})}},$e.preinitModule=function(L,T){if(typeof L=="string")if(typeof T=="object"&&T!==null){if(T.as==null||T.as==="script"){var u=m(T.as,T.crossOrigin);s.d.M(L,{crossOrigin:u,integrity:typeof T.integrity=="string"?T.integrity:void 0,nonce:typeof T.nonce=="string"?T.nonce:void 0})}}else T==null&&s.d.M(L)},$e.preload=function(L,T){if(typeof L=="string"&&typeof T=="object"&&T!==null&&typeof T.as=="string"){var u=T.as,S=m(u,T.crossOrigin);s.d.L(L,u,{crossOrigin:S,integrity:typeof T.integrity=="string"?T.integrity:void 0,nonce:typeof T.nonce=="string"?T.nonce:void 0,type:typeof T.type=="string"?T.type:void 0,fetchPriority:typeof T.fetchPriority=="string"?T.fetchPriority:void 0,referrerPolicy:typeof T.referrerPolicy=="string"?T.referrerPolicy:void 0,imageSrcSet:typeof T.imageSrcSet=="string"?T.imageSrcSet:void 0,imageSizes:typeof T.imageSizes=="string"?T.imageSizes:void 0,media:typeof T.media=="string"?T.media:void 0})}},$e.preloadModule=function(L,T){if(typeof L=="string")if(T){var u=m(T.as,T.crossOrigin);s.d.m(L,{as:typeof T.as=="string"&&T.as!=="script"?T.as:void 0,crossOrigin:u,integrity:typeof T.integrity=="string"?T.integrity:void 0})}else s.d.m(L)},$e.requestFormReset=function(L){s.d.r(L)},$e.unstable_batchedUpdates=function(L,T){return L(T)},$e.useFormState=function(L,T,u){return R.H.useFormState(L,T,u)},$e.useFormStatus=function(){return R.H.useHostTransitionStatus()},$e.version="19.2.3",$e}var Ap;function ov(){if(Ap)return dl.exports;Ap=1;function y(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(y)}catch(w){console.error(w)}}return y(),dl.exports=cv(),dl.exports}var zp;function lv(){if(zp)return Hi;zp=1;var y=sv(),w=bl(),_=ov();function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function A(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function N(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function R(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function m(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function L(e){if(N(e)!==e)throw Error(s(188))}function T(e){var t=e.alternate;if(!t){if(t=N(e),t===null)throw Error(s(188));return t!==e?null:e}for(var a=e,n=t;;){var i=a.return;if(i===null)break;var r=i.alternate;if(r===null){if(n=i.return,n!==null){a=n;continue}break}if(i.child===r.child){for(r=i.child;r;){if(r===a)return L(i),e;if(r===n)return L(i),t;r=r.sibling}throw Error(s(188))}if(a.return!==n.return)a=i,n=r;else{for(var o=!1,p=i.child;p;){if(p===a){o=!0,a=i,n=r;break}if(p===n){o=!0,n=i,a=r;break}p=p.sibling}if(!o){for(p=r.child;p;){if(p===a){o=!0,a=r,n=i;break}if(p===n){o=!0,n=r,a=i;break}p=p.sibling}if(!o)throw Error(s(189))}}if(a.alternate!==n)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?e:t}function u(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=u(e),t!==null)return t;e=e.sibling}return null}var S=Object.assign,C=Symbol.for("react.element"),H=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),g=Symbol.for("react.consumer"),x=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),b=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),q=Symbol.for("react.memo_cache_sentinel"),W=Symbol.iterator;function ee(e){return e===null||typeof e!="object"?null:(e=W&&e[W]||e["@@iterator"],typeof e=="function"?e:null)}var h=Symbol.for("react.client.reference");function Q(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===h?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case c:return"Fragment";case d:return"Profiler";case l:return"StrictMode";case M:return"Suspense";case b:return"SuspenseList";case O:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case k:return"Portal";case x:return e.displayName||"Context";case g:return(e._context.displayName||"Context")+".Consumer";case E:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case f:return t=e.displayName||null,t!==null?t:Q(e.type)||"Memo";case v:t=e._payload,e=e._init;try{return Q(e(t))}catch{}}return null}var I=Array.isArray,D=w.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=_.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K={pending:!1,data:null,method:null,action:null},te=[],ne=-1;function U(e){return{current:e}}function $(e){0>ne||(e.current=te[ne],te[ne]=null,ne--)}function ae(e,t){ne++,te[ne]=e.current,e.current=t}var re=U(null),ue=U(null),pe=U(null),Ce=U(null);function We(e,t){switch(ae(pe,t),ae(ue,e),ae(re,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?If(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=If(t),e=Ff(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}$(re),ae(re,e)}function je(){$(re),$(ue),$(pe)}function Vn(e){e.memoizedState!==null&&ae(Ce,e);var t=re.current,a=Ff(t,e.type);t!==a&&(ae(ue,e),ae(re,a))}function fr(e){ue.current===e&&($(re),$(ue)),Ce.current===e&&($(Ce),Ni._currentValue=K)}var Gs,Cl;function Na(e){if(Gs===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);Gs=t&&t[1]||"",Cl=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Gs+e+Cl}var Qs=!1;function Ys(e,t){if(!e||Qs)return"";Qs=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(t){var J=function(){throw Error()};if(Object.defineProperty(J.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(J,[])}catch(X){var V=X}Reflect.construct(e,[],J)}else{try{J.call()}catch(X){V=X}e.call(J.prototype)}}else{try{throw Error()}catch(X){V=X}(J=e())&&typeof J.catch=="function"&&J.catch(function(){})}}catch(X){if(X&&V&&typeof X.stack=="string")return[X.stack,V.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=n.DetermineComponentFrameRoot(),o=r[0],p=r[1];if(o&&p){var z=o.split(`
`),P=p.split(`
`);for(i=n=0;n<z.length&&!z[n].includes("DetermineComponentFrameRoot");)n++;for(;i<P.length&&!P[i].includes("DetermineComponentFrameRoot");)i++;if(n===z.length||i===P.length)for(n=z.length-1,i=P.length-1;1<=n&&0<=i&&z[n]!==P[i];)i--;for(;1<=n&&0<=i;n--,i--)if(z[n]!==P[i]){if(n!==1||i!==1)do if(n--,i--,0>i||z[n]!==P[i]){var Z=`
`+z[n].replace(" at new "," at ");return e.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",e.displayName)),Z}while(1<=n&&0<=i);break}}}finally{Qs=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Na(a):""}function Ah(e,t){switch(e.tag){case 26:case 27:case 5:return Na(e.type);case 16:return Na("Lazy");case 13:return e.child!==t&&t!==null?Na("Suspense Fallback"):Na("Suspense");case 19:return Na("SuspenseList");case 0:case 15:return Ys(e.type,!1);case 11:return Ys(e.type.render,!1);case 1:return Ys(e.type,!0);case 31:return Na("Activity");default:return""}}function Tl(e){try{var t="",a=null;do t+=Ah(e,a),a=e,e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}var Ps=Object.prototype.hasOwnProperty,Vs=y.unstable_scheduleCallback,Xs=y.unstable_cancelCallback,zh=y.unstable_shouldYield,Nh=y.unstable_requestPaint,ut=y.unstable_now,kh=y.unstable_getCurrentPriorityLevel,El=y.unstable_ImmediatePriority,Rl=y.unstable_UserBlockingPriority,pr=y.unstable_NormalPriority,jh=y.unstable_LowPriority,Dl=y.unstable_IdlePriority,Uh=y.log,qh=y.unstable_setDisableYieldValue,Xn=null,dt=null;function ca(e){if(typeof Uh=="function"&&qh(e),dt&&typeof dt.setStrictMode=="function")try{dt.setStrictMode(Xn,e)}catch{}}var ft=Math.clz32?Math.clz32:Gh,Hh=Math.log,Bh=Math.LN2;function Gh(e){return e>>>=0,e===0?32:31-(Hh(e)/Bh|0)|0}var hr=256,mr=262144,gr=4194304;function ka(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function vr(e,t,a){var n=e.pendingLanes;if(n===0)return 0;var i=0,r=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var p=n&134217727;return p!==0?(n=p&~r,n!==0?i=ka(n):(o&=p,o!==0?i=ka(o):a||(a=p&~e,a!==0&&(i=ka(a))))):(p=n&~r,p!==0?i=ka(p):o!==0?i=ka(o):a||(a=n&~e,a!==0&&(i=ka(a)))),i===0?0:t!==0&&t!==i&&(t&r)===0&&(r=i&-i,a=t&-t,r>=a||r===32&&(a&4194048)!==0)?t:i}function Zn(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Qh(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ml(){var e=gr;return gr<<=1,(gr&62914560)===0&&(gr=4194304),e}function Zs(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function In(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Yh(e,t,a,n,i,r){var o=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var p=e.entanglements,z=e.expirationTimes,P=e.hiddenUpdates;for(a=o&~a;0<a;){var Z=31-ft(a),J=1<<Z;p[Z]=0,z[Z]=-1;var V=P[Z];if(V!==null)for(P[Z]=null,Z=0;Z<V.length;Z++){var X=V[Z];X!==null&&(X.lane&=-536870913)}a&=~J}n!==0&&xl(e,n,0),r!==0&&i===0&&e.tag!==0&&(e.suspendedLanes|=r&~(o&~t))}function xl(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var n=31-ft(t);e.entangledLanes|=t,e.entanglements[n]=e.entanglements[n]|1073741824|a&261930}function Ol(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var n=31-ft(a),i=1<<n;i&t|e[n]&t&&(e[n]|=t),a&=~i}}function Ll(e,t){var a=t&-t;return a=(a&42)!==0?1:Is(a),(a&(e.suspendedLanes|t))!==0?0:a}function Is(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Fs(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Al(){var e=G.p;return e!==0?e:(e=window.event,e===void 0?32:yp(e.type))}function zl(e,t){var a=G.p;try{return G.p=e,t()}finally{G.p=a}}var oa=Math.random().toString(36).slice(2),Ze="__reactFiber$"+oa,at="__reactProps$"+oa,an="__reactContainer$"+oa,Ks="__reactEvents$"+oa,Ph="__reactListeners$"+oa,Vh="__reactHandles$"+oa,Nl="__reactResources$"+oa,Fn="__reactMarker$"+oa;function Js(e){delete e[Ze],delete e[at],delete e[Ks],delete e[Ph],delete e[Vh]}function nn(e){var t=e[Ze];if(t)return t;for(var a=e.parentNode;a;){if(t=a[an]||a[Ze]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=ap(e);e!==null;){if(a=e[Ze])return a;e=ap(e)}return t}e=a,a=e.parentNode}return null}function rn(e){if(e=e[Ze]||e[an]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Kn(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(s(33))}function sn(e){var t=e[Nl];return t||(t=e[Nl]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Pe(e){e[Fn]=!0}var kl=new Set,jl={};function ja(e,t){cn(e,t),cn(e+"Capture",t)}function cn(e,t){for(jl[e]=t,e=0;e<t.length;e++)kl.add(t[e])}var Xh=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ul={},ql={};function Zh(e){return Ps.call(ql,e)?!0:Ps.call(Ul,e)?!1:Xh.test(e)?ql[e]=!0:(Ul[e]=!0,!1)}function yr(e,t,a){if(Zh(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var n=t.toLowerCase().slice(0,5);if(n!=="data-"&&n!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function _r(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function Gt(e,t,a,n){if(n===null)e.removeAttribute(a);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+n)}}function bt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Hl(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Ih(e,t,a){var n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,r=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){a=""+o,r.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return a},setValue:function(o){a=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function $s(e){if(!e._valueTracker){var t=Hl(e)?"checked":"value";e._valueTracker=Ih(e,t,""+e[t])}}function Bl(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),n="";return e&&(n=Hl(e)?e.checked?"true":"false":e.value),e=n,e!==a?(t.setValue(e),!0):!1}function Sr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Fh=/[\n"\\]/g;function wt(e){return e.replace(Fh,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Ws(e,t,a,n,i,r,o,p){e.name="",o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?e.type=o:e.removeAttribute("type"),t!=null?o==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+bt(t)):e.value!==""+bt(t)&&(e.value=""+bt(t)):o!=="submit"&&o!=="reset"||e.removeAttribute("value"),t!=null?ec(e,o,bt(t)):a!=null?ec(e,o,bt(a)):n!=null&&e.removeAttribute("value"),i==null&&r!=null&&(e.defaultChecked=!!r),i!=null&&(e.checked=i&&typeof i!="function"&&typeof i!="symbol"),p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"?e.name=""+bt(p):e.removeAttribute("name")}function Gl(e,t,a,n,i,r,o,p){if(r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(e.type=r),t!=null||a!=null){if(!(r!=="submit"&&r!=="reset"||t!=null)){$s(e);return}a=a!=null?""+bt(a):"",t=t!=null?""+bt(t):a,p||t===e.value||(e.value=t),e.defaultValue=t}n=n??i,n=typeof n!="function"&&typeof n!="symbol"&&!!n,e.checked=p?e.checked:!!n,e.defaultChecked=!!n,o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(e.name=o),$s(e)}function ec(e,t,a){t==="number"&&Sr(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function on(e,t,a,n){if(e=e.options,t){t={};for(var i=0;i<a.length;i++)t["$"+a[i]]=!0;for(a=0;a<e.length;a++)i=t.hasOwnProperty("$"+e[a].value),e[a].selected!==i&&(e[a].selected=i),i&&n&&(e[a].defaultSelected=!0)}else{for(a=""+bt(a),t=null,i=0;i<e.length;i++){if(e[i].value===a){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Ql(e,t,a){if(t!=null&&(t=""+bt(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+bt(a):""}function Yl(e,t,a,n){if(t==null){if(n!=null){if(a!=null)throw Error(s(92));if(I(n)){if(1<n.length)throw Error(s(93));n=n[0]}a=n}a==null&&(a=""),t=a}a=bt(t),e.defaultValue=a,n=e.textContent,n===a&&n!==""&&n!==null&&(e.value=n),$s(e)}function ln(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var Kh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Pl(e,t,a){var n=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?n?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":n?e.setProperty(t,a):typeof a!="number"||a===0||Kh.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function Vl(e,t,a){if(t!=null&&typeof t!="object")throw Error(s(62));if(e=e.style,a!=null){for(var n in a)!a.hasOwnProperty(n)||t!=null&&t.hasOwnProperty(n)||(n.indexOf("--")===0?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="");for(var i in t)n=t[i],t.hasOwnProperty(i)&&a[i]!==n&&Pl(e,i,n)}else for(var r in t)t.hasOwnProperty(r)&&Pl(e,r,t[r])}function tc(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),$h=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function br(e){return $h.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Qt(){}var ac=null;function nc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var un=null,dn=null;function Xl(e){var t=rn(e);if(t&&(e=t.stateNode)){var a=e[at]||null;e:switch(e=t.stateNode,t.type){case"input":if(Ws(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+wt(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var n=a[t];if(n!==e&&n.form===e.form){var i=n[at]||null;if(!i)throw Error(s(90));Ws(n,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<a.length;t++)n=a[t],n.form===e.form&&Bl(n)}break e;case"textarea":Ql(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&on(e,!!a.multiple,t,!1)}}}var ic=!1;function Zl(e,t,a){if(ic)return e(t,a);ic=!0;try{var n=e(t);return n}finally{if(ic=!1,(un!==null||dn!==null)&&(os(),un&&(t=un,e=dn,dn=un=null,Xl(t),e)))for(t=0;t<e.length;t++)Xl(e[t])}}function Jn(e,t){var a=e.stateNode;if(a===null)return null;var n=a[at]||null;if(n===null)return null;a=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(s(231,t,typeof a));return a}var Yt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rc=!1;if(Yt)try{var $n={};Object.defineProperty($n,"passive",{get:function(){rc=!0}}),window.addEventListener("test",$n,$n),window.removeEventListener("test",$n,$n)}catch{rc=!1}var la=null,sc=null,wr=null;function Il(){if(wr)return wr;var e,t=sc,a=t.length,n,i="value"in la?la.value:la.textContent,r=i.length;for(e=0;e<a&&t[e]===i[e];e++);var o=a-e;for(n=1;n<=o&&t[a-n]===i[r-n];n++);return wr=i.slice(e,1<n?1-n:void 0)}function Cr(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Tr(){return!0}function Fl(){return!1}function nt(e){function t(a,n,i,r,o){this._reactName=a,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=o,this.currentTarget=null;for(var p in e)e.hasOwnProperty(p)&&(a=e[p],this[p]=a?a(r):r[p]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?Tr:Fl,this.isPropagationStopped=Fl,this}return S(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Tr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Tr)},persist:function(){},isPersistent:Tr}),t}var Ua={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Er=nt(Ua),Wn=S({},Ua,{view:0,detail:0}),Wh=nt(Wn),cc,oc,ei,Rr=S({},Wn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:uc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ei&&(ei&&e.type==="mousemove"?(cc=e.screenX-ei.screenX,oc=e.screenY-ei.screenY):oc=cc=0,ei=e),cc)},movementY:function(e){return"movementY"in e?e.movementY:oc}}),Kl=nt(Rr),em=S({},Rr,{dataTransfer:0}),tm=nt(em),am=S({},Wn,{relatedTarget:0}),lc=nt(am),nm=S({},Ua,{animationName:0,elapsedTime:0,pseudoElement:0}),im=nt(nm),rm=S({},Ua,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),sm=nt(rm),cm=S({},Ua,{data:0}),Jl=nt(cm),om={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},um={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=um[e])?!!t[e]:!1}function uc(){return dm}var fm=S({},Wn,{key:function(e){if(e.key){var t=om[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Cr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?lm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:uc,charCode:function(e){return e.type==="keypress"?Cr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Cr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),pm=nt(fm),hm=S({},Rr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$l=nt(hm),mm=S({},Wn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:uc}),gm=nt(mm),vm=S({},Ua,{propertyName:0,elapsedTime:0,pseudoElement:0}),ym=nt(vm),_m=S({},Rr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Sm=nt(_m),bm=S({},Ua,{newState:0,oldState:0}),wm=nt(bm),Cm=[9,13,27,32],dc=Yt&&"CompositionEvent"in window,ti=null;Yt&&"documentMode"in document&&(ti=document.documentMode);var Tm=Yt&&"TextEvent"in window&&!ti,Wl=Yt&&(!dc||ti&&8<ti&&11>=ti),eu=" ",tu=!1;function au(e,t){switch(e){case"keyup":return Cm.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var fn=!1;function Em(e,t){switch(e){case"compositionend":return nu(t);case"keypress":return t.which!==32?null:(tu=!0,eu);case"textInput":return e=t.data,e===eu&&tu?null:e;default:return null}}function Rm(e,t){if(fn)return e==="compositionend"||!dc&&au(e,t)?(e=Il(),wr=sc=la=null,fn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Wl&&t.locale!=="ko"?null:t.data;default:return null}}var Dm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function iu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Dm[e.type]:t==="textarea"}function ru(e,t,a,n){un?dn?dn.push(n):dn=[n]:un=n,t=ms(t,"onChange"),0<t.length&&(a=new Er("onChange","change",null,a,n),e.push({event:a,listeners:t}))}var ai=null,ni=null;function Mm(e){Qf(e,0)}function Dr(e){var t=Kn(e);if(Bl(t))return e}function su(e,t){if(e==="change")return t}var cu=!1;if(Yt){var fc;if(Yt){var pc="oninput"in document;if(!pc){var ou=document.createElement("div");ou.setAttribute("oninput","return;"),pc=typeof ou.oninput=="function"}fc=pc}else fc=!1;cu=fc&&(!document.documentMode||9<document.documentMode)}function lu(){ai&&(ai.detachEvent("onpropertychange",uu),ni=ai=null)}function uu(e){if(e.propertyName==="value"&&Dr(ni)){var t=[];ru(t,ni,e,nc(e)),Zl(Mm,t)}}function xm(e,t,a){e==="focusin"?(lu(),ai=t,ni=a,ai.attachEvent("onpropertychange",uu)):e==="focusout"&&lu()}function Om(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Dr(ni)}function Lm(e,t){if(e==="click")return Dr(t)}function Am(e,t){if(e==="input"||e==="change")return Dr(t)}function zm(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var pt=typeof Object.is=="function"?Object.is:zm;function ii(e,t){if(pt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),n=Object.keys(t);if(a.length!==n.length)return!1;for(n=0;n<a.length;n++){var i=a[n];if(!Ps.call(t,i)||!pt(e[i],t[i]))return!1}return!0}function du(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function fu(e,t){var a=du(e);e=0;for(var n;a;){if(a.nodeType===3){if(n=e+a.textContent.length,e<=t&&n>=t)return{node:a,offset:t-e};e=n}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=du(a)}}function pu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?pu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function hu(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Sr(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=Sr(e.document)}return t}function hc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Nm=Yt&&"documentMode"in document&&11>=document.documentMode,pn=null,mc=null,ri=null,gc=!1;function mu(e,t,a){var n=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;gc||pn==null||pn!==Sr(n)||(n=pn,"selectionStart"in n&&hc(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),ri&&ii(ri,n)||(ri=n,n=ms(mc,"onSelect"),0<n.length&&(t=new Er("onSelect","select",null,t,a),e.push({event:t,listeners:n}),t.target=pn)))}function qa(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var hn={animationend:qa("Animation","AnimationEnd"),animationiteration:qa("Animation","AnimationIteration"),animationstart:qa("Animation","AnimationStart"),transitionrun:qa("Transition","TransitionRun"),transitionstart:qa("Transition","TransitionStart"),transitioncancel:qa("Transition","TransitionCancel"),transitionend:qa("Transition","TransitionEnd")},vc={},gu={};Yt&&(gu=document.createElement("div").style,"AnimationEvent"in window||(delete hn.animationend.animation,delete hn.animationiteration.animation,delete hn.animationstart.animation),"TransitionEvent"in window||delete hn.transitionend.transition);function Ha(e){if(vc[e])return vc[e];if(!hn[e])return e;var t=hn[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in gu)return vc[e]=t[a];return e}var vu=Ha("animationend"),yu=Ha("animationiteration"),_u=Ha("animationstart"),km=Ha("transitionrun"),jm=Ha("transitionstart"),Um=Ha("transitioncancel"),Su=Ha("transitionend"),bu=new Map,yc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");yc.push("scrollEnd");function At(e,t){bu.set(e,t),ja(t,[e])}var Mr=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Ct=[],mn=0,_c=0;function xr(){for(var e=mn,t=_c=mn=0;t<e;){var a=Ct[t];Ct[t++]=null;var n=Ct[t];Ct[t++]=null;var i=Ct[t];Ct[t++]=null;var r=Ct[t];if(Ct[t++]=null,n!==null&&i!==null){var o=n.pending;o===null?i.next=i:(i.next=o.next,o.next=i),n.pending=i}r!==0&&wu(a,i,r)}}function Or(e,t,a,n){Ct[mn++]=e,Ct[mn++]=t,Ct[mn++]=a,Ct[mn++]=n,_c|=n,e.lanes|=n,e=e.alternate,e!==null&&(e.lanes|=n)}function Sc(e,t,a,n){return Or(e,t,a,n),Lr(e)}function Ba(e,t){return Or(e,null,null,t),Lr(e)}function wu(e,t,a){e.lanes|=a;var n=e.alternate;n!==null&&(n.lanes|=a);for(var i=!1,r=e.return;r!==null;)r.childLanes|=a,n=r.alternate,n!==null&&(n.childLanes|=a),r.tag===22&&(e=r.stateNode,e===null||e._visibility&1||(i=!0)),e=r,r=r.return;return e.tag===3?(r=e.stateNode,i&&t!==null&&(i=31-ft(a),e=r.hiddenUpdates,n=e[i],n===null?e[i]=[t]:n.push(t),t.lane=a|536870912),r):null}function Lr(e){if(50<Di)throw Di=0,Oo=null,Error(s(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var gn={};function qm(e,t,a,n){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ht(e,t,a,n){return new qm(e,t,a,n)}function bc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Pt(e,t){var a=e.alternate;return a===null?(a=ht(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Cu(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Ar(e,t,a,n,i,r){var o=0;if(n=e,typeof e=="function")bc(e)&&(o=1);else if(typeof e=="string")o=Yg(e,a,re.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case O:return e=ht(31,a,t,i),e.elementType=O,e.lanes=r,e;case c:return Ga(a.children,i,r,t);case l:o=8,i|=24;break;case d:return e=ht(12,a,t,i|2),e.elementType=d,e.lanes=r,e;case M:return e=ht(13,a,t,i),e.elementType=M,e.lanes=r,e;case b:return e=ht(19,a,t,i),e.elementType=b,e.lanes=r,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case x:o=10;break e;case g:o=9;break e;case E:o=11;break e;case f:o=14;break e;case v:o=16,n=null;break e}o=29,a=Error(s(130,e===null?"null":typeof e,"")),n=null}return t=ht(o,a,t,i),t.elementType=e,t.type=n,t.lanes=r,t}function Ga(e,t,a,n){return e=ht(7,e,n,t),e.lanes=a,e}function wc(e,t,a){return e=ht(6,e,null,t),e.lanes=a,e}function Tu(e){var t=ht(18,null,null,0);return t.stateNode=e,t}function Cc(e,t,a){return t=ht(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Eu=new WeakMap;function Tt(e,t){if(typeof e=="object"&&e!==null){var a=Eu.get(e);return a!==void 0?a:(t={value:e,source:t,stack:Tl(t)},Eu.set(e,t),t)}return{value:e,source:t,stack:Tl(t)}}var vn=[],yn=0,zr=null,si=0,Et=[],Rt=0,ua=null,Ut=1,qt="";function Vt(e,t){vn[yn++]=si,vn[yn++]=zr,zr=e,si=t}function Ru(e,t,a){Et[Rt++]=Ut,Et[Rt++]=qt,Et[Rt++]=ua,ua=e;var n=Ut;e=qt;var i=32-ft(n)-1;n&=~(1<<i),a+=1;var r=32-ft(t)+i;if(30<r){var o=i-i%5;r=(n&(1<<o)-1).toString(32),n>>=o,i-=o,Ut=1<<32-ft(t)+i|a<<i|n,qt=r+e}else Ut=1<<r|a<<i|n,qt=e}function Tc(e){e.return!==null&&(Vt(e,1),Ru(e,1,0))}function Ec(e){for(;e===zr;)zr=vn[--yn],vn[yn]=null,si=vn[--yn],vn[yn]=null;for(;e===ua;)ua=Et[--Rt],Et[Rt]=null,qt=Et[--Rt],Et[Rt]=null,Ut=Et[--Rt],Et[Rt]=null}function Du(e,t){Et[Rt++]=Ut,Et[Rt++]=qt,Et[Rt++]=ua,Ut=t.id,qt=t.overflow,ua=e}var Ie=null,Oe=null,_e=!1,da=null,Dt=!1,Rc=Error(s(519));function fa(e){var t=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ci(Tt(t,e)),Rc}function Mu(e){var t=e.stateNode,a=e.type,n=e.memoizedProps;switch(t[Ze]=e,t[at]=n,a){case"dialog":me("cancel",t),me("close",t);break;case"iframe":case"object":case"embed":me("load",t);break;case"video":case"audio":for(a=0;a<xi.length;a++)me(xi[a],t);break;case"source":me("error",t);break;case"img":case"image":case"link":me("error",t),me("load",t);break;case"details":me("toggle",t);break;case"input":me("invalid",t),Gl(t,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0);break;case"select":me("invalid",t);break;case"textarea":me("invalid",t),Yl(t,n.value,n.defaultValue,n.children)}a=n.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||n.suppressHydrationWarning===!0||Xf(t.textContent,a)?(n.popover!=null&&(me("beforetoggle",t),me("toggle",t)),n.onScroll!=null&&me("scroll",t),n.onScrollEnd!=null&&me("scrollend",t),n.onClick!=null&&(t.onclick=Qt),t=!0):t=!1,t||fa(e,!0)}function xu(e){for(Ie=e.return;Ie;)switch(Ie.tag){case 5:case 31:case 13:Dt=!1;return;case 27:case 3:Dt=!0;return;default:Ie=Ie.return}}function _n(e){if(e!==Ie)return!1;if(!_e)return xu(e),_e=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Vo(e.type,e.memoizedProps)),a=!a),a&&Oe&&fa(e),xu(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Oe=tp(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Oe=tp(e)}else t===27?(t=Oe,Ra(e.type)?(e=Ko,Ko=null,Oe=e):Oe=t):Oe=Ie?xt(e.stateNode.nextSibling):null;return!0}function Qa(){Oe=Ie=null,_e=!1}function Dc(){var e=da;return e!==null&&(ct===null?ct=e:ct.push.apply(ct,e),da=null),e}function ci(e){da===null?da=[e]:da.push(e)}var Mc=U(null),Ya=null,Xt=null;function pa(e,t,a){ae(Mc,t._currentValue),t._currentValue=a}function Zt(e){e._currentValue=Mc.current,$(Mc)}function xc(e,t,a){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===a)break;e=e.return}}function Oc(e,t,a,n){var i=e.child;for(i!==null&&(i.return=e);i!==null;){var r=i.dependencies;if(r!==null){var o=i.child;r=r.firstContext;e:for(;r!==null;){var p=r;r=i;for(var z=0;z<t.length;z++)if(p.context===t[z]){r.lanes|=a,p=r.alternate,p!==null&&(p.lanes|=a),xc(r.return,a,e),n||(o=null);break e}r=p.next}}else if(i.tag===18){if(o=i.return,o===null)throw Error(s(341));o.lanes|=a,r=o.alternate,r!==null&&(r.lanes|=a),xc(o,a,e),o=null}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}}function Sn(e,t,a,n){e=null;for(var i=t,r=!1;i!==null;){if(!r){if((i.flags&524288)!==0)r=!0;else if((i.flags&262144)!==0)break}if(i.tag===10){var o=i.alternate;if(o===null)throw Error(s(387));if(o=o.memoizedProps,o!==null){var p=i.type;pt(i.pendingProps.value,o.value)||(e!==null?e.push(p):e=[p])}}else if(i===Ce.current){if(o=i.alternate,o===null)throw Error(s(387));o.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(e!==null?e.push(Ni):e=[Ni])}i=i.return}e!==null&&Oc(t,e,a,n),t.flags|=262144}function Nr(e){for(e=e.firstContext;e!==null;){if(!pt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Pa(e){Ya=e,Xt=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Fe(e){return Ou(Ya,e)}function kr(e,t){return Ya===null&&Pa(e),Ou(e,t)}function Ou(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},Xt===null){if(e===null)throw Error(s(308));Xt=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Xt=Xt.next=t;return a}var Hm=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},Bm=y.unstable_scheduleCallback,Gm=y.unstable_NormalPriority,He={$$typeof:x,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Lc(){return{controller:new Hm,data:new Map,refCount:0}}function oi(e){e.refCount--,e.refCount===0&&Bm(Gm,function(){e.controller.abort()})}var li=null,Ac=0,bn=0,wn=null;function Qm(e,t){if(li===null){var a=li=[];Ac=0,bn=jo(),wn={status:"pending",value:void 0,then:function(n){a.push(n)}}}return Ac++,t.then(Lu,Lu),t}function Lu(){if(--Ac===0&&li!==null){wn!==null&&(wn.status="fulfilled");var e=li;li=null,bn=0,wn=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Ym(e,t){var a=[],n={status:"pending",value:null,reason:null,then:function(i){a.push(i)}};return e.then(function(){n.status="fulfilled",n.value=t;for(var i=0;i<a.length;i++)(0,a[i])(t)},function(i){for(n.status="rejected",n.reason=i,i=0;i<a.length;i++)(0,a[i])(void 0)}),n}var Au=D.S;D.S=function(e,t){gf=ut(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&Qm(e,t),Au!==null&&Au(e,t)};var Va=U(null);function zc(){var e=Va.current;return e!==null?e:xe.pooledCache}function jr(e,t){t===null?ae(Va,Va.current):ae(Va,t.pool)}function zu(){var e=zc();return e===null?null:{parent:He._currentValue,pool:e}}var Cn=Error(s(460)),Nc=Error(s(474)),Ur=Error(s(542)),qr={then:function(){}};function Nu(e){return e=e.status,e==="fulfilled"||e==="rejected"}function ku(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(Qt,Qt),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Uu(e),e;default:if(typeof t.status=="string")t.then(Qt,Qt);else{if(e=xe,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=t,e.status="pending",e.then(function(n){if(t.status==="pending"){var i=t;i.status="fulfilled",i.value=n}},function(n){if(t.status==="pending"){var i=t;i.status="rejected",i.reason=n}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Uu(e),e}throw Za=t,Cn}}function Xa(e){try{var t=e._init;return t(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Za=a,Cn):a}}var Za=null;function ju(){if(Za===null)throw Error(s(459));var e=Za;return Za=null,e}function Uu(e){if(e===Cn||e===Ur)throw Error(s(483))}var Tn=null,ui=0;function Hr(e){var t=ui;return ui+=1,Tn===null&&(Tn=[]),ku(Tn,e,t)}function di(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Br(e,t){throw t.$$typeof===C?Error(s(525)):(e=Object.prototype.toString.call(t),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function qu(e){function t(B,j){if(e){var Y=B.deletions;Y===null?(B.deletions=[j],B.flags|=16):Y.push(j)}}function a(B,j){if(!e)return null;for(;j!==null;)t(B,j),j=j.sibling;return null}function n(B){for(var j=new Map;B!==null;)B.key!==null?j.set(B.key,B):j.set(B.index,B),B=B.sibling;return j}function i(B,j){return B=Pt(B,j),B.index=0,B.sibling=null,B}function r(B,j,Y){return B.index=Y,e?(Y=B.alternate,Y!==null?(Y=Y.index,Y<j?(B.flags|=67108866,j):Y):(B.flags|=67108866,j)):(B.flags|=1048576,j)}function o(B){return e&&B.alternate===null&&(B.flags|=67108866),B}function p(B,j,Y,F){return j===null||j.tag!==6?(j=wc(Y,B.mode,F),j.return=B,j):(j=i(j,Y),j.return=B,j)}function z(B,j,Y,F){var ce=Y.type;return ce===c?Z(B,j,Y.props.children,F,Y.key):j!==null&&(j.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===v&&Xa(ce)===j.type)?(j=i(j,Y.props),di(j,Y),j.return=B,j):(j=Ar(Y.type,Y.key,Y.props,null,B.mode,F),di(j,Y),j.return=B,j)}function P(B,j,Y,F){return j===null||j.tag!==4||j.stateNode.containerInfo!==Y.containerInfo||j.stateNode.implementation!==Y.implementation?(j=Cc(Y,B.mode,F),j.return=B,j):(j=i(j,Y.children||[]),j.return=B,j)}function Z(B,j,Y,F,ce){return j===null||j.tag!==7?(j=Ga(Y,B.mode,F,ce),j.return=B,j):(j=i(j,Y),j.return=B,j)}function J(B,j,Y){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return j=wc(""+j,B.mode,Y),j.return=B,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case H:return Y=Ar(j.type,j.key,j.props,null,B.mode,Y),di(Y,j),Y.return=B,Y;case k:return j=Cc(j,B.mode,Y),j.return=B,j;case v:return j=Xa(j),J(B,j,Y)}if(I(j)||ee(j))return j=Ga(j,B.mode,Y,null),j.return=B,j;if(typeof j.then=="function")return J(B,Hr(j),Y);if(j.$$typeof===x)return J(B,kr(B,j),Y);Br(B,j)}return null}function V(B,j,Y,F){var ce=j!==null?j.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return ce!==null?null:p(B,j,""+Y,F);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case H:return Y.key===ce?z(B,j,Y,F):null;case k:return Y.key===ce?P(B,j,Y,F):null;case v:return Y=Xa(Y),V(B,j,Y,F)}if(I(Y)||ee(Y))return ce!==null?null:Z(B,j,Y,F,null);if(typeof Y.then=="function")return V(B,j,Hr(Y),F);if(Y.$$typeof===x)return V(B,j,kr(B,Y),F);Br(B,Y)}return null}function X(B,j,Y,F,ce){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return B=B.get(Y)||null,p(j,B,""+F,ce);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case H:return B=B.get(F.key===null?Y:F.key)||null,z(j,B,F,ce);case k:return B=B.get(F.key===null?Y:F.key)||null,P(j,B,F,ce);case v:return F=Xa(F),X(B,j,Y,F,ce)}if(I(F)||ee(F))return B=B.get(Y)||null,Z(j,B,F,ce,null);if(typeof F.then=="function")return X(B,j,Y,Hr(F),ce);if(F.$$typeof===x)return X(B,j,Y,kr(j,F),ce);Br(j,F)}return null}function ie(B,j,Y,F){for(var ce=null,Se=null,se=j,fe=j=0,ye=null;se!==null&&fe<Y.length;fe++){se.index>fe?(ye=se,se=null):ye=se.sibling;var be=V(B,se,Y[fe],F);if(be===null){se===null&&(se=ye);break}e&&se&&be.alternate===null&&t(B,se),j=r(be,j,fe),Se===null?ce=be:Se.sibling=be,Se=be,se=ye}if(fe===Y.length)return a(B,se),_e&&Vt(B,fe),ce;if(se===null){for(;fe<Y.length;fe++)se=J(B,Y[fe],F),se!==null&&(j=r(se,j,fe),Se===null?ce=se:Se.sibling=se,Se=se);return _e&&Vt(B,fe),ce}for(se=n(se);fe<Y.length;fe++)ye=X(se,B,fe,Y[fe],F),ye!==null&&(e&&ye.alternate!==null&&se.delete(ye.key===null?fe:ye.key),j=r(ye,j,fe),Se===null?ce=ye:Se.sibling=ye,Se=ye);return e&&se.forEach(function(La){return t(B,La)}),_e&&Vt(B,fe),ce}function oe(B,j,Y,F){if(Y==null)throw Error(s(151));for(var ce=null,Se=null,se=j,fe=j=0,ye=null,be=Y.next();se!==null&&!be.done;fe++,be=Y.next()){se.index>fe?(ye=se,se=null):ye=se.sibling;var La=V(B,se,be.value,F);if(La===null){se===null&&(se=ye);break}e&&se&&La.alternate===null&&t(B,se),j=r(La,j,fe),Se===null?ce=La:Se.sibling=La,Se=La,se=ye}if(be.done)return a(B,se),_e&&Vt(B,fe),ce;if(se===null){for(;!be.done;fe++,be=Y.next())be=J(B,be.value,F),be!==null&&(j=r(be,j,fe),Se===null?ce=be:Se.sibling=be,Se=be);return _e&&Vt(B,fe),ce}for(se=n(se);!be.done;fe++,be=Y.next())be=X(se,B,fe,be.value,F),be!==null&&(e&&be.alternate!==null&&se.delete(be.key===null?fe:be.key),j=r(be,j,fe),Se===null?ce=be:Se.sibling=be,Se=be);return e&&se.forEach(function(ev){return t(B,ev)}),_e&&Vt(B,fe),ce}function Me(B,j,Y,F){if(typeof Y=="object"&&Y!==null&&Y.type===c&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case H:e:{for(var ce=Y.key;j!==null;){if(j.key===ce){if(ce=Y.type,ce===c){if(j.tag===7){a(B,j.sibling),F=i(j,Y.props.children),F.return=B,B=F;break e}}else if(j.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===v&&Xa(ce)===j.type){a(B,j.sibling),F=i(j,Y.props),di(F,Y),F.return=B,B=F;break e}a(B,j);break}else t(B,j);j=j.sibling}Y.type===c?(F=Ga(Y.props.children,B.mode,F,Y.key),F.return=B,B=F):(F=Ar(Y.type,Y.key,Y.props,null,B.mode,F),di(F,Y),F.return=B,B=F)}return o(B);case k:e:{for(ce=Y.key;j!==null;){if(j.key===ce)if(j.tag===4&&j.stateNode.containerInfo===Y.containerInfo&&j.stateNode.implementation===Y.implementation){a(B,j.sibling),F=i(j,Y.children||[]),F.return=B,B=F;break e}else{a(B,j);break}else t(B,j);j=j.sibling}F=Cc(Y,B.mode,F),F.return=B,B=F}return o(B);case v:return Y=Xa(Y),Me(B,j,Y,F)}if(I(Y))return ie(B,j,Y,F);if(ee(Y)){if(ce=ee(Y),typeof ce!="function")throw Error(s(150));return Y=ce.call(Y),oe(B,j,Y,F)}if(typeof Y.then=="function")return Me(B,j,Hr(Y),F);if(Y.$$typeof===x)return Me(B,j,kr(B,Y),F);Br(B,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,j!==null&&j.tag===6?(a(B,j.sibling),F=i(j,Y),F.return=B,B=F):(a(B,j),F=wc(Y,B.mode,F),F.return=B,B=F),o(B)):a(B,j)}return function(B,j,Y,F){try{ui=0;var ce=Me(B,j,Y,F);return Tn=null,ce}catch(se){if(se===Cn||se===Ur)throw se;var Se=ht(29,se,null,B.mode);return Se.lanes=F,Se.return=B,Se}}}var Ia=qu(!0),Hu=qu(!1),ha=!1;function kc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function jc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ma(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ga(e,t,a){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,(we&2)!==0){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,t=Lr(e),wu(e,null,a),t}return Or(e,n,t,a),Lr(e)}function fi(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var n=t.lanes;n&=e.pendingLanes,a|=n,t.lanes=a,Ol(e,a)}}function Uc(e,t){var a=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,a===n)){var i=null,r=null;if(a=a.firstBaseUpdate,a!==null){do{var o={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};r===null?i=r=o:r=r.next=o,a=a.next}while(a!==null);r===null?i=r=t:r=r.next=t}else i=r=t;a={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:r,shared:n.shared,callbacks:n.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var qc=!1;function pi(){if(qc){var e=wn;if(e!==null)throw e}}function hi(e,t,a,n){qc=!1;var i=e.updateQueue;ha=!1;var r=i.firstBaseUpdate,o=i.lastBaseUpdate,p=i.shared.pending;if(p!==null){i.shared.pending=null;var z=p,P=z.next;z.next=null,o===null?r=P:o.next=P,o=z;var Z=e.alternate;Z!==null&&(Z=Z.updateQueue,p=Z.lastBaseUpdate,p!==o&&(p===null?Z.firstBaseUpdate=P:p.next=P,Z.lastBaseUpdate=z))}if(r!==null){var J=i.baseState;o=0,Z=P=z=null,p=r;do{var V=p.lane&-536870913,X=V!==p.lane;if(X?(ve&V)===V:(n&V)===V){V!==0&&V===bn&&(qc=!0),Z!==null&&(Z=Z.next={lane:0,tag:p.tag,payload:p.payload,callback:null,next:null});e:{var ie=e,oe=p;V=t;var Me=a;switch(oe.tag){case 1:if(ie=oe.payload,typeof ie=="function"){J=ie.call(Me,J,V);break e}J=ie;break e;case 3:ie.flags=ie.flags&-65537|128;case 0:if(ie=oe.payload,V=typeof ie=="function"?ie.call(Me,J,V):ie,V==null)break e;J=S({},J,V);break e;case 2:ha=!0}}V=p.callback,V!==null&&(e.flags|=64,X&&(e.flags|=8192),X=i.callbacks,X===null?i.callbacks=[V]:X.push(V))}else X={lane:V,tag:p.tag,payload:p.payload,callback:p.callback,next:null},Z===null?(P=Z=X,z=J):Z=Z.next=X,o|=V;if(p=p.next,p===null){if(p=i.shared.pending,p===null)break;X=p,p=X.next,X.next=null,i.lastBaseUpdate=X,i.shared.pending=null}}while(!0);Z===null&&(z=J),i.baseState=z,i.firstBaseUpdate=P,i.lastBaseUpdate=Z,r===null&&(i.shared.lanes=0),ba|=o,e.lanes=o,e.memoizedState=J}}function Bu(e,t){if(typeof e!="function")throw Error(s(191,e));e.call(t)}function Gu(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Bu(a[e],t)}var En=U(null),Gr=U(0);function Qu(e,t){e=aa,ae(Gr,e),ae(En,t),aa=e|t.baseLanes}function Hc(){ae(Gr,aa),ae(En,En.current)}function Bc(){aa=Gr.current,$(En),$(Gr)}var mt=U(null),Mt=null;function va(e){var t=e.alternate;ae(Ue,Ue.current&1),ae(mt,e),Mt===null&&(t===null||En.current!==null||t.memoizedState!==null)&&(Mt=e)}function Gc(e){ae(Ue,Ue.current),ae(mt,e),Mt===null&&(Mt=e)}function Yu(e){e.tag===22?(ae(Ue,Ue.current),ae(mt,e),Mt===null&&(Mt=e)):ya()}function ya(){ae(Ue,Ue.current),ae(mt,mt.current)}function gt(e){$(mt),Mt===e&&(Mt=null),$(Ue)}var Ue=U(0);function Qr(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Io(a)||Fo(a)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var It=0,de=null,Re=null,Be=null,Yr=!1,Rn=!1,Fa=!1,Pr=0,mi=0,Dn=null,Pm=0;function Ne(){throw Error(s(321))}function Qc(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!pt(e[a],t[a]))return!1;return!0}function Yc(e,t,a,n,i,r){return It=r,de=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,D.H=e===null||e.memoizedState===null?Rd:io,Fa=!1,r=a(n,i),Fa=!1,Rn&&(r=Vu(t,a,n,i)),Pu(e),r}function Pu(e){D.H=yi;var t=Re!==null&&Re.next!==null;if(It=0,Be=Re=de=null,Yr=!1,mi=0,Dn=null,t)throw Error(s(300));e===null||Ge||(e=e.dependencies,e!==null&&Nr(e)&&(Ge=!0))}function Vu(e,t,a,n){de=e;var i=0;do{if(Rn&&(Dn=null),mi=0,Rn=!1,25<=i)throw Error(s(301));if(i+=1,Be=Re=null,e.updateQueue!=null){var r=e.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,r.memoCache!=null&&(r.memoCache.index=0)}D.H=Dd,r=t(a,n)}while(Rn);return r}function Vm(){var e=D.H,t=e.useState()[0];return t=typeof t.then=="function"?gi(t):t,e=e.useState()[0],(Re!==null?Re.memoizedState:null)!==e&&(de.flags|=1024),t}function Pc(){var e=Pr!==0;return Pr=0,e}function Vc(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function Xc(e){if(Yr){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Yr=!1}It=0,Be=Re=de=null,Rn=!1,mi=Pr=0,Dn=null}function et(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Be===null?de.memoizedState=Be=e:Be=Be.next=e,Be}function qe(){if(Re===null){var e=de.alternate;e=e!==null?e.memoizedState:null}else e=Re.next;var t=Be===null?de.memoizedState:Be.next;if(t!==null)Be=t,Re=e;else{if(e===null)throw de.alternate===null?Error(s(467)):Error(s(310));Re=e,e={memoizedState:Re.memoizedState,baseState:Re.baseState,baseQueue:Re.baseQueue,queue:Re.queue,next:null},Be===null?de.memoizedState=Be=e:Be=Be.next=e}return Be}function Vr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function gi(e){var t=mi;return mi+=1,Dn===null&&(Dn=[]),e=ku(Dn,e,t),t=de,(Be===null?t.memoizedState:Be.next)===null&&(t=t.alternate,D.H=t===null||t.memoizedState===null?Rd:io),e}function Xr(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return gi(e);if(e.$$typeof===x)return Fe(e)}throw Error(s(438,String(e)))}function Zc(e){var t=null,a=de.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var n=de.alternate;n!==null&&(n=n.updateQueue,n!==null&&(n=n.memoCache,n!=null&&(t={data:n.data.map(function(i){return i.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=Vr(),de.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),n=0;n<e;n++)a[n]=q;return t.index++,a}function Ft(e,t){return typeof t=="function"?t(e):t}function Zr(e){var t=qe();return Ic(t,Re,e)}function Ic(e,t,a){var n=e.queue;if(n===null)throw Error(s(311));n.lastRenderedReducer=a;var i=e.baseQueue,r=n.pending;if(r!==null){if(i!==null){var o=i.next;i.next=r.next,r.next=o}t.baseQueue=i=r,n.pending=null}if(r=e.baseState,i===null)e.memoizedState=r;else{t=i.next;var p=o=null,z=null,P=t,Z=!1;do{var J=P.lane&-536870913;if(J!==P.lane?(ve&J)===J:(It&J)===J){var V=P.revertLane;if(V===0)z!==null&&(z=z.next={lane:0,revertLane:0,gesture:null,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null}),J===bn&&(Z=!0);else if((It&V)===V){P=P.next,V===bn&&(Z=!0);continue}else J={lane:0,revertLane:P.revertLane,gesture:null,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null},z===null?(p=z=J,o=r):z=z.next=J,de.lanes|=V,ba|=V;J=P.action,Fa&&a(r,J),r=P.hasEagerState?P.eagerState:a(r,J)}else V={lane:J,revertLane:P.revertLane,gesture:P.gesture,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null},z===null?(p=z=V,o=r):z=z.next=V,de.lanes|=J,ba|=J;P=P.next}while(P!==null&&P!==t);if(z===null?o=r:z.next=p,!pt(r,e.memoizedState)&&(Ge=!0,Z&&(a=wn,a!==null)))throw a;e.memoizedState=r,e.baseState=o,e.baseQueue=z,n.lastRenderedState=r}return i===null&&(n.lanes=0),[e.memoizedState,n.dispatch]}function Fc(e){var t=qe(),a=t.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=e;var n=a.dispatch,i=a.pending,r=t.memoizedState;if(i!==null){a.pending=null;var o=i=i.next;do r=e(r,o.action),o=o.next;while(o!==i);pt(r,t.memoizedState)||(Ge=!0),t.memoizedState=r,t.baseQueue===null&&(t.baseState=r),a.lastRenderedState=r}return[r,n]}function Xu(e,t,a){var n=de,i=qe(),r=_e;if(r){if(a===void 0)throw Error(s(407));a=a()}else a=t();var o=!pt((Re||i).memoizedState,a);if(o&&(i.memoizedState=a,Ge=!0),i=i.queue,$c(Fu.bind(null,n,i,e),[e]),i.getSnapshot!==t||o||Be!==null&&Be.memoizedState.tag&1){if(n.flags|=2048,Mn(9,{destroy:void 0},Iu.bind(null,n,i,a,t),null),xe===null)throw Error(s(349));r||(It&127)!==0||Zu(n,t,a)}return a}function Zu(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=de.updateQueue,t===null?(t=Vr(),de.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function Iu(e,t,a,n){t.value=a,t.getSnapshot=n,Ku(t)&&Ju(e)}function Fu(e,t,a){return a(function(){Ku(t)&&Ju(e)})}function Ku(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!pt(e,a)}catch{return!0}}function Ju(e){var t=Ba(e,2);t!==null&&ot(t,e,2)}function Kc(e){var t=et();if(typeof e=="function"){var a=e;if(e=a(),Fa){ca(!0);try{a()}finally{ca(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ft,lastRenderedState:e},t}function $u(e,t,a,n){return e.baseState=a,Ic(e,Re,typeof n=="function"?n:Ft)}function Xm(e,t,a,n,i){if(Kr(e))throw Error(s(485));if(e=t.action,e!==null){var r={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(o){r.listeners.push(o)}};D.T!==null?a(!0):r.isTransition=!1,n(r),a=t.pending,a===null?(r.next=t.pending=r,Wu(t,r)):(r.next=a.next,t.pending=a.next=r)}}function Wu(e,t){var a=t.action,n=t.payload,i=e.state;if(t.isTransition){var r=D.T,o={};D.T=o;try{var p=a(i,n),z=D.S;z!==null&&z(o,p),ed(e,t,p)}catch(P){Jc(e,t,P)}finally{r!==null&&o.types!==null&&(r.types=o.types),D.T=r}}else try{r=a(i,n),ed(e,t,r)}catch(P){Jc(e,t,P)}}function ed(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(n){td(e,t,n)},function(n){return Jc(e,t,n)}):td(e,t,a)}function td(e,t,a){t.status="fulfilled",t.value=a,ad(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,Wu(e,a)))}function Jc(e,t,a){var n=e.pending;if(e.pending=null,n!==null){n=n.next;do t.status="rejected",t.reason=a,ad(t),t=t.next;while(t!==n)}e.action=null}function ad(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function nd(e,t){return t}function id(e,t){if(_e){var a=xe.formState;if(a!==null){e:{var n=de;if(_e){if(Oe){t:{for(var i=Oe,r=Dt;i.nodeType!==8;){if(!r){i=null;break t}if(i=xt(i.nextSibling),i===null){i=null;break t}}r=i.data,i=r==="F!"||r==="F"?i:null}if(i){Oe=xt(i.nextSibling),n=i.data==="F!";break e}}fa(n)}n=!1}n&&(t=a[0])}}return a=et(),a.memoizedState=a.baseState=t,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:nd,lastRenderedState:t},a.queue=n,a=Cd.bind(null,de,n),n.dispatch=a,n=Kc(!1),r=no.bind(null,de,!1,n.queue),n=et(),i={state:t,dispatch:null,action:e,pending:null},n.queue=i,a=Xm.bind(null,de,i,r,a),i.dispatch=a,n.memoizedState=e,[t,a,!1]}function rd(e){var t=qe();return sd(t,Re,e)}function sd(e,t,a){if(t=Ic(e,t,nd)[0],e=Zr(Ft)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var n=gi(t)}catch(o){throw o===Cn?Ur:o}else n=t;t=qe();var i=t.queue,r=i.dispatch;return a!==t.memoizedState&&(de.flags|=2048,Mn(9,{destroy:void 0},Zm.bind(null,i,a),null)),[n,r,e]}function Zm(e,t){e.action=t}function cd(e){var t=qe(),a=Re;if(a!==null)return sd(t,a,e);qe(),t=t.memoizedState,a=qe();var n=a.queue.dispatch;return a.memoizedState=e,[t,n,!1]}function Mn(e,t,a,n){return e={tag:e,create:a,deps:n,inst:t,next:null},t=de.updateQueue,t===null&&(t=Vr(),de.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(n=a.next,a.next=e,e.next=n,t.lastEffect=e),e}function od(){return qe().memoizedState}function Ir(e,t,a,n){var i=et();de.flags|=e,i.memoizedState=Mn(1|t,{destroy:void 0},a,n===void 0?null:n)}function Fr(e,t,a,n){var i=qe();n=n===void 0?null:n;var r=i.memoizedState.inst;Re!==null&&n!==null&&Qc(n,Re.memoizedState.deps)?i.memoizedState=Mn(t,r,a,n):(de.flags|=e,i.memoizedState=Mn(1|t,r,a,n))}function ld(e,t){Ir(8390656,8,e,t)}function $c(e,t){Fr(2048,8,e,t)}function Im(e){de.flags|=4;var t=de.updateQueue;if(t===null)t=Vr(),de.updateQueue=t,t.events=[e];else{var a=t.events;a===null?t.events=[e]:a.push(e)}}function ud(e){var t=qe().memoizedState;return Im({ref:t,nextImpl:e}),function(){if((we&2)!==0)throw Error(s(440));return t.impl.apply(void 0,arguments)}}function dd(e,t){return Fr(4,2,e,t)}function fd(e,t){return Fr(4,4,e,t)}function pd(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function hd(e,t,a){a=a!=null?a.concat([e]):null,Fr(4,4,pd.bind(null,t,e),a)}function Wc(){}function md(e,t){var a=qe();t=t===void 0?null:t;var n=a.memoizedState;return t!==null&&Qc(t,n[1])?n[0]:(a.memoizedState=[e,t],e)}function gd(e,t){var a=qe();t=t===void 0?null:t;var n=a.memoizedState;if(t!==null&&Qc(t,n[1]))return n[0];if(n=e(),Fa){ca(!0);try{e()}finally{ca(!1)}}return a.memoizedState=[n,t],n}function eo(e,t,a){return a===void 0||(It&1073741824)!==0&&(ve&261930)===0?e.memoizedState=t:(e.memoizedState=a,e=yf(),de.lanes|=e,ba|=e,a)}function vd(e,t,a,n){return pt(a,t)?a:En.current!==null?(e=eo(e,a,n),pt(e,t)||(Ge=!0),e):(It&42)===0||(It&1073741824)!==0&&(ve&261930)===0?(Ge=!0,e.memoizedState=a):(e=yf(),de.lanes|=e,ba|=e,t)}function yd(e,t,a,n,i){var r=G.p;G.p=r!==0&&8>r?r:8;var o=D.T,p={};D.T=p,no(e,!1,t,a);try{var z=i(),P=D.S;if(P!==null&&P(p,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var Z=Ym(z,n);vi(e,t,Z,_t(e))}else vi(e,t,n,_t(e))}catch(J){vi(e,t,{then:function(){},status:"rejected",reason:J},_t())}finally{G.p=r,o!==null&&p.types!==null&&(o.types=p.types),D.T=o}}function Fm(){}function to(e,t,a,n){if(e.tag!==5)throw Error(s(476));var i=_d(e).queue;yd(e,i,t,K,a===null?Fm:function(){return Sd(e),a(n)})}function _d(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:K,baseState:K,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ft,lastRenderedState:K},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ft,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Sd(e){var t=_d(e);t.next===null&&(t=e.alternate.memoizedState),vi(e,t.next.queue,{},_t())}function ao(){return Fe(Ni)}function bd(){return qe().memoizedState}function wd(){return qe().memoizedState}function Km(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=_t();e=ma(a);var n=ga(t,e,a);n!==null&&(ot(n,t,a),fi(n,t,a)),t={cache:Lc()},e.payload=t;return}t=t.return}}function Jm(e,t,a){var n=_t();a={lane:n,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Kr(e)?Td(t,a):(a=Sc(e,t,a,n),a!==null&&(ot(a,e,n),Ed(a,t,n)))}function Cd(e,t,a){var n=_t();vi(e,t,a,n)}function vi(e,t,a,n){var i={lane:n,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Kr(e))Td(t,i);else{var r=e.alternate;if(e.lanes===0&&(r===null||r.lanes===0)&&(r=t.lastRenderedReducer,r!==null))try{var o=t.lastRenderedState,p=r(o,a);if(i.hasEagerState=!0,i.eagerState=p,pt(p,o))return Or(e,t,i,0),xe===null&&xr(),!1}catch{}if(a=Sc(e,t,i,n),a!==null)return ot(a,e,n),Ed(a,t,n),!0}return!1}function no(e,t,a,n){if(n={lane:2,revertLane:jo(),gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Kr(e)){if(t)throw Error(s(479))}else t=Sc(e,a,n,2),t!==null&&ot(t,e,2)}function Kr(e){var t=e.alternate;return e===de||t!==null&&t===de}function Td(e,t){Rn=Yr=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function Ed(e,t,a){if((a&4194048)!==0){var n=t.lanes;n&=e.pendingLanes,a|=n,t.lanes=a,Ol(e,a)}}var yi={readContext:Fe,use:Xr,useCallback:Ne,useContext:Ne,useEffect:Ne,useImperativeHandle:Ne,useLayoutEffect:Ne,useInsertionEffect:Ne,useMemo:Ne,useReducer:Ne,useRef:Ne,useState:Ne,useDebugValue:Ne,useDeferredValue:Ne,useTransition:Ne,useSyncExternalStore:Ne,useId:Ne,useHostTransitionStatus:Ne,useFormState:Ne,useActionState:Ne,useOptimistic:Ne,useMemoCache:Ne,useCacheRefresh:Ne};yi.useEffectEvent=Ne;var Rd={readContext:Fe,use:Xr,useCallback:function(e,t){return et().memoizedState=[e,t===void 0?null:t],e},useContext:Fe,useEffect:ld,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,Ir(4194308,4,pd.bind(null,t,e),a)},useLayoutEffect:function(e,t){return Ir(4194308,4,e,t)},useInsertionEffect:function(e,t){Ir(4,2,e,t)},useMemo:function(e,t){var a=et();t=t===void 0?null:t;var n=e();if(Fa){ca(!0);try{e()}finally{ca(!1)}}return a.memoizedState=[n,t],n},useReducer:function(e,t,a){var n=et();if(a!==void 0){var i=a(t);if(Fa){ca(!0);try{a(t)}finally{ca(!1)}}}else i=t;return n.memoizedState=n.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},n.queue=e,e=e.dispatch=Jm.bind(null,de,e),[n.memoizedState,e]},useRef:function(e){var t=et();return e={current:e},t.memoizedState=e},useState:function(e){e=Kc(e);var t=e.queue,a=Cd.bind(null,de,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:Wc,useDeferredValue:function(e,t){var a=et();return eo(a,e,t)},useTransition:function(){var e=Kc(!1);return e=yd.bind(null,de,e.queue,!0,!1),et().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var n=de,i=et();if(_e){if(a===void 0)throw Error(s(407));a=a()}else{if(a=t(),xe===null)throw Error(s(349));(ve&127)!==0||Zu(n,t,a)}i.memoizedState=a;var r={value:a,getSnapshot:t};return i.queue=r,ld(Fu.bind(null,n,r,e),[e]),n.flags|=2048,Mn(9,{destroy:void 0},Iu.bind(null,n,r,a,t),null),a},useId:function(){var e=et(),t=xe.identifierPrefix;if(_e){var a=qt,n=Ut;a=(n&~(1<<32-ft(n)-1)).toString(32)+a,t="_"+t+"R_"+a,a=Pr++,0<a&&(t+="H"+a.toString(32)),t+="_"}else a=Pm++,t="_"+t+"r_"+a.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:ao,useFormState:id,useActionState:id,useOptimistic:function(e){var t=et();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=no.bind(null,de,!0,a),a.dispatch=t,[e,t]},useMemoCache:Zc,useCacheRefresh:function(){return et().memoizedState=Km.bind(null,de)},useEffectEvent:function(e){var t=et(),a={impl:e};return t.memoizedState=a,function(){if((we&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},io={readContext:Fe,use:Xr,useCallback:md,useContext:Fe,useEffect:$c,useImperativeHandle:hd,useInsertionEffect:dd,useLayoutEffect:fd,useMemo:gd,useReducer:Zr,useRef:od,useState:function(){return Zr(Ft)},useDebugValue:Wc,useDeferredValue:function(e,t){var a=qe();return vd(a,Re.memoizedState,e,t)},useTransition:function(){var e=Zr(Ft)[0],t=qe().memoizedState;return[typeof e=="boolean"?e:gi(e),t]},useSyncExternalStore:Xu,useId:bd,useHostTransitionStatus:ao,useFormState:rd,useActionState:rd,useOptimistic:function(e,t){var a=qe();return $u(a,Re,e,t)},useMemoCache:Zc,useCacheRefresh:wd};io.useEffectEvent=ud;var Dd={readContext:Fe,use:Xr,useCallback:md,useContext:Fe,useEffect:$c,useImperativeHandle:hd,useInsertionEffect:dd,useLayoutEffect:fd,useMemo:gd,useReducer:Fc,useRef:od,useState:function(){return Fc(Ft)},useDebugValue:Wc,useDeferredValue:function(e,t){var a=qe();return Re===null?eo(a,e,t):vd(a,Re.memoizedState,e,t)},useTransition:function(){var e=Fc(Ft)[0],t=qe().memoizedState;return[typeof e=="boolean"?e:gi(e),t]},useSyncExternalStore:Xu,useId:bd,useHostTransitionStatus:ao,useFormState:cd,useActionState:cd,useOptimistic:function(e,t){var a=qe();return Re!==null?$u(a,Re,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Zc,useCacheRefresh:wd};Dd.useEffectEvent=ud;function ro(e,t,a,n){t=e.memoizedState,a=a(n,t),a=a==null?t:S({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var so={enqueueSetState:function(e,t,a){e=e._reactInternals;var n=_t(),i=ma(n);i.payload=t,a!=null&&(i.callback=a),t=ga(e,i,n),t!==null&&(ot(t,e,n),fi(t,e,n))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var n=_t(),i=ma(n);i.tag=1,i.payload=t,a!=null&&(i.callback=a),t=ga(e,i,n),t!==null&&(ot(t,e,n),fi(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=_t(),n=ma(a);n.tag=2,t!=null&&(n.callback=t),t=ga(e,n,a),t!==null&&(ot(t,e,a),fi(t,e,a))}};function Md(e,t,a,n,i,r,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,r,o):t.prototype&&t.prototype.isPureReactComponent?!ii(a,n)||!ii(i,r):!0}function xd(e,t,a,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,n),t.state!==e&&so.enqueueReplaceState(t,t.state,null)}function Ka(e,t){var a=t;if("ref"in t){a={};for(var n in t)n!=="ref"&&(a[n]=t[n])}if(e=e.defaultProps){a===t&&(a=S({},a));for(var i in e)a[i]===void 0&&(a[i]=e[i])}return a}function Od(e){Mr(e)}function Ld(e){console.error(e)}function Ad(e){Mr(e)}function Jr(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function zd(e,t,a){try{var n=e.onCaughtError;n(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function co(e,t,a){return a=ma(a),a.tag=3,a.payload={element:null},a.callback=function(){Jr(e,t)},a}function Nd(e){return e=ma(e),e.tag=3,e}function kd(e,t,a,n){var i=a.type.getDerivedStateFromError;if(typeof i=="function"){var r=n.value;e.payload=function(){return i(r)},e.callback=function(){zd(t,a,n)}}var o=a.stateNode;o!==null&&typeof o.componentDidCatch=="function"&&(e.callback=function(){zd(t,a,n),typeof i!="function"&&(wa===null?wa=new Set([this]):wa.add(this));var p=n.stack;this.componentDidCatch(n.value,{componentStack:p!==null?p:""})})}function $m(e,t,a,n,i){if(a.flags|=32768,n!==null&&typeof n=="object"&&typeof n.then=="function"){if(t=a.alternate,t!==null&&Sn(t,a,i,!0),a=mt.current,a!==null){switch(a.tag){case 31:case 13:return Mt===null?ls():a.alternate===null&&ke===0&&(ke=3),a.flags&=-257,a.flags|=65536,a.lanes=i,n===qr?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([n]):t.add(n),zo(e,n,i)),!1;case 22:return a.flags|=65536,n===qr?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([n])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([n]):a.add(n)),zo(e,n,i)),!1}throw Error(s(435,a.tag))}return zo(e,n,i),ls(),!1}if(_e)return t=mt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=i,n!==Rc&&(e=Error(s(422),{cause:n}),ci(Tt(e,a)))):(n!==Rc&&(t=Error(s(423),{cause:n}),ci(Tt(t,a))),e=e.current.alternate,e.flags|=65536,i&=-i,e.lanes|=i,n=Tt(n,a),i=co(e.stateNode,n,i),Uc(e,i),ke!==4&&(ke=2)),!1;var r=Error(s(520),{cause:n});if(r=Tt(r,a),Ri===null?Ri=[r]:Ri.push(r),ke!==4&&(ke=2),t===null)return!0;n=Tt(n,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=i&-i,a.lanes|=e,e=co(a.stateNode,n,e),Uc(a,e),!1;case 1:if(t=a.type,r=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||r!==null&&typeof r.componentDidCatch=="function"&&(wa===null||!wa.has(r))))return a.flags|=65536,i&=-i,a.lanes|=i,i=Nd(i),kd(i,e,a,n),Uc(a,i),!1}a=a.return}while(a!==null);return!1}var oo=Error(s(461)),Ge=!1;function Ke(e,t,a,n){t.child=e===null?Hu(t,null,a,n):Ia(t,e.child,a,n)}function jd(e,t,a,n,i){a=a.render;var r=t.ref;if("ref"in n){var o={};for(var p in n)p!=="ref"&&(o[p]=n[p])}else o=n;return Pa(t),n=Yc(e,t,a,o,r,i),p=Pc(),e!==null&&!Ge?(Vc(e,t,i),Kt(e,t,i)):(_e&&p&&Tc(t),t.flags|=1,Ke(e,t,n,i),t.child)}function Ud(e,t,a,n,i){if(e===null){var r=a.type;return typeof r=="function"&&!bc(r)&&r.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=r,qd(e,t,r,n,i)):(e=Ar(a.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(r=e.child,!vo(e,i)){var o=r.memoizedProps;if(a=a.compare,a=a!==null?a:ii,a(o,n)&&e.ref===t.ref)return Kt(e,t,i)}return t.flags|=1,e=Pt(r,n),e.ref=t.ref,e.return=t,t.child=e}function qd(e,t,a,n,i){if(e!==null){var r=e.memoizedProps;if(ii(r,n)&&e.ref===t.ref)if(Ge=!1,t.pendingProps=n=r,vo(e,i))(e.flags&131072)!==0&&(Ge=!0);else return t.lanes=e.lanes,Kt(e,t,i)}return lo(e,t,a,n,i)}function Hd(e,t,a,n){var i=n.children,r=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.mode==="hidden"){if((t.flags&128)!==0){if(r=r!==null?r.baseLanes|a:a,e!==null){for(n=t.child=e.child,i=0;n!==null;)i=i|n.lanes|n.childLanes,n=n.sibling;n=i&~r}else n=0,t.child=null;return Bd(e,t,r,a,n)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&jr(t,r!==null?r.cachePool:null),r!==null?Qu(t,r):Hc(),Yu(t);else return n=t.lanes=536870912,Bd(e,t,r!==null?r.baseLanes|a:a,a,n)}else r!==null?(jr(t,r.cachePool),Qu(t,r),ya(),t.memoizedState=null):(e!==null&&jr(t,null),Hc(),ya());return Ke(e,t,i,a),t.child}function _i(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Bd(e,t,a,n,i){var r=zc();return r=r===null?null:{parent:He._currentValue,pool:r},t.memoizedState={baseLanes:a,cachePool:r},e!==null&&jr(t,null),Hc(),Yu(t),e!==null&&Sn(e,t,n,!0),t.childLanes=i,null}function $r(e,t){return t=es({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Gd(e,t,a){return Ia(t,e.child,null,a),e=$r(t,t.pendingProps),e.flags|=2,gt(t),t.memoizedState=null,e}function Wm(e,t,a){var n=t.pendingProps,i=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(_e){if(n.mode==="hidden")return e=$r(t,n),t.lanes=536870912,_i(null,e);if(Gc(t),(e=Oe)?(e=ep(e,Dt),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:ua!==null?{id:Ut,overflow:qt}:null,retryLane:536870912,hydrationErrors:null},a=Tu(e),a.return=t,t.child=a,Ie=t,Oe=null)):e=null,e===null)throw fa(t);return t.lanes=536870912,null}return $r(t,n)}var r=e.memoizedState;if(r!==null){var o=r.dehydrated;if(Gc(t),i)if(t.flags&256)t.flags&=-257,t=Gd(e,t,a);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(s(558));else if(Ge||Sn(e,t,a,!1),i=(a&e.childLanes)!==0,Ge||i){if(n=xe,n!==null&&(o=Ll(n,a),o!==0&&o!==r.retryLane))throw r.retryLane=o,Ba(e,o),ot(n,e,o),oo;ls(),t=Gd(e,t,a)}else e=r.treeContext,Oe=xt(o.nextSibling),Ie=t,_e=!0,da=null,Dt=!1,e!==null&&Du(t,e),t=$r(t,n),t.flags|=4096;return t}return e=Pt(e.child,{mode:n.mode,children:n.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Wr(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function lo(e,t,a,n,i){return Pa(t),a=Yc(e,t,a,n,void 0,i),n=Pc(),e!==null&&!Ge?(Vc(e,t,i),Kt(e,t,i)):(_e&&n&&Tc(t),t.flags|=1,Ke(e,t,a,i),t.child)}function Qd(e,t,a,n,i,r){return Pa(t),t.updateQueue=null,a=Vu(t,n,a,i),Pu(e),n=Pc(),e!==null&&!Ge?(Vc(e,t,r),Kt(e,t,r)):(_e&&n&&Tc(t),t.flags|=1,Ke(e,t,a,r),t.child)}function Yd(e,t,a,n,i){if(Pa(t),t.stateNode===null){var r=gn,o=a.contextType;typeof o=="object"&&o!==null&&(r=Fe(o)),r=new a(n,r),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=so,t.stateNode=r,r._reactInternals=t,r=t.stateNode,r.props=n,r.state=t.memoizedState,r.refs={},kc(t),o=a.contextType,r.context=typeof o=="object"&&o!==null?Fe(o):gn,r.state=t.memoizedState,o=a.getDerivedStateFromProps,typeof o=="function"&&(ro(t,a,o,n),r.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(o=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),o!==r.state&&so.enqueueReplaceState(r,r.state,null),hi(t,n,r,i),pi(),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308),n=!0}else if(e===null){r=t.stateNode;var p=t.memoizedProps,z=Ka(a,p);r.props=z;var P=r.context,Z=a.contextType;o=gn,typeof Z=="object"&&Z!==null&&(o=Fe(Z));var J=a.getDerivedStateFromProps;Z=typeof J=="function"||typeof r.getSnapshotBeforeUpdate=="function",p=t.pendingProps!==p,Z||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(p||P!==o)&&xd(t,r,n,o),ha=!1;var V=t.memoizedState;r.state=V,hi(t,n,r,i),pi(),P=t.memoizedState,p||V!==P||ha?(typeof J=="function"&&(ro(t,a,J,n),P=t.memoizedState),(z=ha||Md(t,a,z,n,V,P,o))?(Z||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(t.flags|=4194308)):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=P),r.props=n,r.state=P,r.context=o,n=z):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{r=t.stateNode,jc(e,t),o=t.memoizedProps,Z=Ka(a,o),r.props=Z,J=t.pendingProps,V=r.context,P=a.contextType,z=gn,typeof P=="object"&&P!==null&&(z=Fe(P)),p=a.getDerivedStateFromProps,(P=typeof p=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(o!==J||V!==z)&&xd(t,r,n,z),ha=!1,V=t.memoizedState,r.state=V,hi(t,n,r,i),pi();var X=t.memoizedState;o!==J||V!==X||ha||e!==null&&e.dependencies!==null&&Nr(e.dependencies)?(typeof p=="function"&&(ro(t,a,p,n),X=t.memoizedState),(Z=ha||Md(t,a,Z,n,V,X,z)||e!==null&&e.dependencies!==null&&Nr(e.dependencies))?(P||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(n,X,z),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(n,X,z)),typeof r.componentDidUpdate=="function"&&(t.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof r.componentDidUpdate!="function"||o===e.memoizedProps&&V===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&V===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=X),r.props=n,r.state=X,r.context=z,n=Z):(typeof r.componentDidUpdate!="function"||o===e.memoizedProps&&V===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&V===e.memoizedState||(t.flags|=1024),n=!1)}return r=n,Wr(e,t),n=(t.flags&128)!==0,r||n?(r=t.stateNode,a=n&&typeof a.getDerivedStateFromError!="function"?null:r.render(),t.flags|=1,e!==null&&n?(t.child=Ia(t,e.child,null,i),t.child=Ia(t,null,a,i)):Ke(e,t,a,i),t.memoizedState=r.state,e=t.child):e=Kt(e,t,i),e}function Pd(e,t,a,n){return Qa(),t.flags|=256,Ke(e,t,a,n),t.child}var uo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function fo(e){return{baseLanes:e,cachePool:zu()}}function po(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=yt),e}function Vd(e,t,a){var n=t.pendingProps,i=!1,r=(t.flags&128)!==0,o;if((o=r)||(o=e!==null&&e.memoizedState===null?!1:(Ue.current&2)!==0),o&&(i=!0,t.flags&=-129),o=(t.flags&32)!==0,t.flags&=-33,e===null){if(_e){if(i?va(t):ya(),(e=Oe)?(e=ep(e,Dt),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:ua!==null?{id:Ut,overflow:qt}:null,retryLane:536870912,hydrationErrors:null},a=Tu(e),a.return=t,t.child=a,Ie=t,Oe=null)):e=null,e===null)throw fa(t);return Fo(e)?t.lanes=32:t.lanes=536870912,null}var p=n.children;return n=n.fallback,i?(ya(),i=t.mode,p=es({mode:"hidden",children:p},i),n=Ga(n,i,a,null),p.return=t,n.return=t,p.sibling=n,t.child=p,n=t.child,n.memoizedState=fo(a),n.childLanes=po(e,o,a),t.memoizedState=uo,_i(null,n)):(va(t),ho(t,p))}var z=e.memoizedState;if(z!==null&&(p=z.dehydrated,p!==null)){if(r)t.flags&256?(va(t),t.flags&=-257,t=mo(e,t,a)):t.memoizedState!==null?(ya(),t.child=e.child,t.flags|=128,t=null):(ya(),p=n.fallback,i=t.mode,n=es({mode:"visible",children:n.children},i),p=Ga(p,i,a,null),p.flags|=2,n.return=t,p.return=t,n.sibling=p,t.child=n,Ia(t,e.child,null,a),n=t.child,n.memoizedState=fo(a),n.childLanes=po(e,o,a),t.memoizedState=uo,t=_i(null,n));else if(va(t),Fo(p)){if(o=p.nextSibling&&p.nextSibling.dataset,o)var P=o.dgst;o=P,n=Error(s(419)),n.stack="",n.digest=o,ci({value:n,source:null,stack:null}),t=mo(e,t,a)}else if(Ge||Sn(e,t,a,!1),o=(a&e.childLanes)!==0,Ge||o){if(o=xe,o!==null&&(n=Ll(o,a),n!==0&&n!==z.retryLane))throw z.retryLane=n,Ba(e,n),ot(o,e,n),oo;Io(p)||ls(),t=mo(e,t,a)}else Io(p)?(t.flags|=192,t.child=e.child,t=null):(e=z.treeContext,Oe=xt(p.nextSibling),Ie=t,_e=!0,da=null,Dt=!1,e!==null&&Du(t,e),t=ho(t,n.children),t.flags|=4096);return t}return i?(ya(),p=n.fallback,i=t.mode,z=e.child,P=z.sibling,n=Pt(z,{mode:"hidden",children:n.children}),n.subtreeFlags=z.subtreeFlags&65011712,P!==null?p=Pt(P,p):(p=Ga(p,i,a,null),p.flags|=2),p.return=t,n.return=t,n.sibling=p,t.child=n,_i(null,n),n=t.child,p=e.child.memoizedState,p===null?p=fo(a):(i=p.cachePool,i!==null?(z=He._currentValue,i=i.parent!==z?{parent:z,pool:z}:i):i=zu(),p={baseLanes:p.baseLanes|a,cachePool:i}),n.memoizedState=p,n.childLanes=po(e,o,a),t.memoizedState=uo,_i(e.child,n)):(va(t),a=e.child,e=a.sibling,a=Pt(a,{mode:"visible",children:n.children}),a.return=t,a.sibling=null,e!==null&&(o=t.deletions,o===null?(t.deletions=[e],t.flags|=16):o.push(e)),t.child=a,t.memoizedState=null,a)}function ho(e,t){return t=es({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function es(e,t){return e=ht(22,e,null,t),e.lanes=0,e}function mo(e,t,a){return Ia(t,e.child,null,a),e=ho(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Xd(e,t,a){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),xc(e.return,t,a)}function go(e,t,a,n,i,r){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:a,tailMode:i,treeForkCount:r}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=a,o.tailMode=i,o.treeForkCount=r)}function Zd(e,t,a){var n=t.pendingProps,i=n.revealOrder,r=n.tail;n=n.children;var o=Ue.current,p=(o&2)!==0;if(p?(o=o&1|2,t.flags|=128):o&=1,ae(Ue,o),Ke(e,t,n,a),n=_e?si:0,!p&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Xd(e,a,t);else if(e.tag===19)Xd(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(i){case"forwards":for(a=t.child,i=null;a!==null;)e=a.alternate,e!==null&&Qr(e)===null&&(i=a),a=a.sibling;a=i,a===null?(i=t.child,t.child=null):(i=a.sibling,a.sibling=null),go(t,!1,i,a,r,n);break;case"backwards":case"unstable_legacy-backwards":for(a=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Qr(e)===null){t.child=i;break}e=i.sibling,i.sibling=a,a=i,i=e}go(t,!0,a,null,r,n);break;case"together":go(t,!1,null,null,void 0,n);break;default:t.memoizedState=null}return t.child}function Kt(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),ba|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(Sn(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(s(153));if(t.child!==null){for(e=t.child,a=Pt(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=Pt(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function vo(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Nr(e)))}function eg(e,t,a){switch(t.tag){case 3:We(t,t.stateNode.containerInfo),pa(t,He,e.memoizedState.cache),Qa();break;case 27:case 5:Vn(t);break;case 4:We(t,t.stateNode.containerInfo);break;case 10:pa(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Gc(t),null;break;case 13:var n=t.memoizedState;if(n!==null)return n.dehydrated!==null?(va(t),t.flags|=128,null):(a&t.child.childLanes)!==0?Vd(e,t,a):(va(t),e=Kt(e,t,a),e!==null?e.sibling:null);va(t);break;case 19:var i=(e.flags&128)!==0;if(n=(a&t.childLanes)!==0,n||(Sn(e,t,a,!1),n=(a&t.childLanes)!==0),i){if(n)return Zd(e,t,a);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ae(Ue,Ue.current),n)break;return null;case 22:return t.lanes=0,Hd(e,t,a,t.pendingProps);case 24:pa(t,He,e.memoizedState.cache)}return Kt(e,t,a)}function Id(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)Ge=!0;else{if(!vo(e,a)&&(t.flags&128)===0)return Ge=!1,eg(e,t,a);Ge=(e.flags&131072)!==0}else Ge=!1,_e&&(t.flags&1048576)!==0&&Ru(t,si,t.index);switch(t.lanes=0,t.tag){case 16:e:{var n=t.pendingProps;if(e=Xa(t.elementType),t.type=e,typeof e=="function")bc(e)?(n=Ka(e,n),t.tag=1,t=Yd(null,t,e,n,a)):(t.tag=0,t=lo(null,t,e,n,a));else{if(e!=null){var i=e.$$typeof;if(i===E){t.tag=11,t=jd(null,t,e,n,a);break e}else if(i===f){t.tag=14,t=Ud(null,t,e,n,a);break e}}throw t=Q(e)||e,Error(s(306,t,""))}}return t;case 0:return lo(e,t,t.type,t.pendingProps,a);case 1:return n=t.type,i=Ka(n,t.pendingProps),Yd(e,t,n,i,a);case 3:e:{if(We(t,t.stateNode.containerInfo),e===null)throw Error(s(387));n=t.pendingProps;var r=t.memoizedState;i=r.element,jc(e,t),hi(t,n,null,a);var o=t.memoizedState;if(n=o.cache,pa(t,He,n),n!==r.cache&&Oc(t,[He],a,!0),pi(),n=o.element,r.isDehydrated)if(r={element:n,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){t=Pd(e,t,n,a);break e}else if(n!==i){i=Tt(Error(s(424)),t),ci(i),t=Pd(e,t,n,a);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,Oe=xt(e.firstChild),Ie=t,_e=!0,da=null,Dt=!0,a=Hu(t,null,n,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Qa(),n===i){t=Kt(e,t,a);break e}Ke(e,t,n,a)}t=t.child}return t;case 26:return Wr(e,t),e===null?(a=sp(t.type,null,t.pendingProps,null))?t.memoizedState=a:_e||(a=t.type,e=t.pendingProps,n=gs(pe.current).createElement(a),n[Ze]=t,n[at]=e,Je(n,a,e),Pe(n),t.stateNode=n):t.memoizedState=sp(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Vn(t),e===null&&_e&&(n=t.stateNode=np(t.type,t.pendingProps,pe.current),Ie=t,Dt=!0,i=Oe,Ra(t.type)?(Ko=i,Oe=xt(n.firstChild)):Oe=i),Ke(e,t,t.pendingProps.children,a),Wr(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&_e&&((i=n=Oe)&&(n=Og(n,t.type,t.pendingProps,Dt),n!==null?(t.stateNode=n,Ie=t,Oe=xt(n.firstChild),Dt=!1,i=!0):i=!1),i||fa(t)),Vn(t),i=t.type,r=t.pendingProps,o=e!==null?e.memoizedProps:null,n=r.children,Vo(i,r)?n=null:o!==null&&Vo(i,o)&&(t.flags|=32),t.memoizedState!==null&&(i=Yc(e,t,Vm,null,null,a),Ni._currentValue=i),Wr(e,t),Ke(e,t,n,a),t.child;case 6:return e===null&&_e&&((e=a=Oe)&&(a=Lg(a,t.pendingProps,Dt),a!==null?(t.stateNode=a,Ie=t,Oe=null,e=!0):e=!1),e||fa(t)),null;case 13:return Vd(e,t,a);case 4:return We(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Ia(t,null,n,a):Ke(e,t,n,a),t.child;case 11:return jd(e,t,t.type,t.pendingProps,a);case 7:return Ke(e,t,t.pendingProps,a),t.child;case 8:return Ke(e,t,t.pendingProps.children,a),t.child;case 12:return Ke(e,t,t.pendingProps.children,a),t.child;case 10:return n=t.pendingProps,pa(t,t.type,n.value),Ke(e,t,n.children,a),t.child;case 9:return i=t.type._context,n=t.pendingProps.children,Pa(t),i=Fe(i),n=n(i),t.flags|=1,Ke(e,t,n,a),t.child;case 14:return Ud(e,t,t.type,t.pendingProps,a);case 15:return qd(e,t,t.type,t.pendingProps,a);case 19:return Zd(e,t,a);case 31:return Wm(e,t,a);case 22:return Hd(e,t,a,t.pendingProps);case 24:return Pa(t),n=Fe(He),e===null?(i=zc(),i===null&&(i=xe,r=Lc(),i.pooledCache=r,r.refCount++,r!==null&&(i.pooledCacheLanes|=a),i=r),t.memoizedState={parent:n,cache:i},kc(t),pa(t,He,i)):((e.lanes&a)!==0&&(jc(e,t),hi(t,null,null,a),pi()),i=e.memoizedState,r=t.memoizedState,i.parent!==n?(i={parent:n,cache:n},t.memoizedState=i,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=i),pa(t,He,n)):(n=r.cache,pa(t,He,n),n!==i.cache&&Oc(t,[He],a,!0))),Ke(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}function Jt(e){e.flags|=4}function yo(e,t,a,n,i){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(i&335544128)===i)if(e.stateNode.complete)e.flags|=8192;else if(wf())e.flags|=8192;else throw Za=qr,Nc}else e.flags&=-16777217}function Fd(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!dp(t))if(wf())e.flags|=8192;else throw Za=qr,Nc}function ts(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Ml():536870912,e.lanes|=t,An|=t)}function Si(e,t){if(!_e)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var n=null;a!==null;)a.alternate!==null&&(n=a),a=a.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Le(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,n=0;if(t)for(var i=e.child;i!==null;)a|=i.lanes|i.childLanes,n|=i.subtreeFlags&65011712,n|=i.flags&65011712,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)a|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=a,t}function tg(e,t,a){var n=t.pendingProps;switch(Ec(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Le(t),null;case 1:return Le(t),null;case 3:return a=t.stateNode,n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Zt(He),je(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(_n(t)?Jt(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Dc())),Le(t),null;case 26:var i=t.type,r=t.memoizedState;return e===null?(Jt(t),r!==null?(Le(t),Fd(t,r)):(Le(t),yo(t,i,null,n,a))):r?r!==e.memoizedState?(Jt(t),Le(t),Fd(t,r)):(Le(t),t.flags&=-16777217):(e=e.memoizedProps,e!==n&&Jt(t),Le(t),yo(t,i,e,n,a)),null;case 27:if(fr(t),a=pe.current,i=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==n&&Jt(t);else{if(!n){if(t.stateNode===null)throw Error(s(166));return Le(t),null}e=re.current,_n(t)?Mu(t):(e=np(i,n,a),t.stateNode=e,Jt(t))}return Le(t),null;case 5:if(fr(t),i=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==n&&Jt(t);else{if(!n){if(t.stateNode===null)throw Error(s(166));return Le(t),null}if(r=re.current,_n(t))Mu(t);else{var o=gs(pe.current);switch(r){case 1:r=o.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:r=o.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":r=o.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":r=o.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":r=o.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof n.is=="string"?o.createElement("select",{is:n.is}):o.createElement("select"),n.multiple?r.multiple=!0:n.size&&(r.size=n.size);break;default:r=typeof n.is=="string"?o.createElement(i,{is:n.is}):o.createElement(i)}}r[Ze]=t,r[at]=n;e:for(o=t.child;o!==null;){if(o.tag===5||o.tag===6)r.appendChild(o.stateNode);else if(o.tag!==4&&o.tag!==27&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===t)break e;for(;o.sibling===null;){if(o.return===null||o.return===t)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}t.stateNode=r;e:switch(Je(r,i,n),i){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&Jt(t)}}return Le(t),yo(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,a),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==n&&Jt(t);else{if(typeof n!="string"&&t.stateNode===null)throw Error(s(166));if(e=pe.current,_n(t)){if(e=t.stateNode,a=t.memoizedProps,n=null,i=Ie,i!==null)switch(i.tag){case 27:case 5:n=i.memoizedProps}e[Ze]=t,e=!!(e.nodeValue===a||n!==null&&n.suppressHydrationWarning===!0||Xf(e.nodeValue,a)),e||fa(t,!0)}else e=gs(e).createTextNode(n),e[Ze]=t,t.stateNode=e}return Le(t),null;case 31:if(a=t.memoizedState,e===null||e.memoizedState!==null){if(n=_n(t),a!==null){if(e===null){if(!n)throw Error(s(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[Ze]=t}else Qa(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Le(t),e=!1}else a=Dc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return t.flags&256?(gt(t),t):(gt(t),null);if((t.flags&128)!==0)throw Error(s(558))}return Le(t),null;case 13:if(n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(i=_n(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(s(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));i[Ze]=t}else Qa(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Le(t),i=!1}else i=Dc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return t.flags&256?(gt(t),t):(gt(t),null)}return gt(t),(t.flags&128)!==0?(t.lanes=a,t):(a=n!==null,e=e!==null&&e.memoizedState!==null,a&&(n=t.child,i=null,n.alternate!==null&&n.alternate.memoizedState!==null&&n.alternate.memoizedState.cachePool!==null&&(i=n.alternate.memoizedState.cachePool.pool),r=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(r=n.memoizedState.cachePool.pool),r!==i&&(n.flags|=2048)),a!==e&&a&&(t.child.flags|=8192),ts(t,t.updateQueue),Le(t),null);case 4:return je(),e===null&&Bo(t.stateNode.containerInfo),Le(t),null;case 10:return Zt(t.type),Le(t),null;case 19:if($(Ue),n=t.memoizedState,n===null)return Le(t),null;if(i=(t.flags&128)!==0,r=n.rendering,r===null)if(i)Si(n,!1);else{if(ke!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(r=Qr(e),r!==null){for(t.flags|=128,Si(n,!1),e=r.updateQueue,t.updateQueue=e,ts(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)Cu(a,e),a=a.sibling;return ae(Ue,Ue.current&1|2),_e&&Vt(t,n.treeForkCount),t.child}e=e.sibling}n.tail!==null&&ut()>ss&&(t.flags|=128,i=!0,Si(n,!1),t.lanes=4194304)}else{if(!i)if(e=Qr(r),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,ts(t,e),Si(n,!0),n.tail===null&&n.tailMode==="hidden"&&!r.alternate&&!_e)return Le(t),null}else 2*ut()-n.renderingStartTime>ss&&a!==536870912&&(t.flags|=128,i=!0,Si(n,!1),t.lanes=4194304);n.isBackwards?(r.sibling=t.child,t.child=r):(e=n.last,e!==null?e.sibling=r:t.child=r,n.last=r)}return n.tail!==null?(e=n.tail,n.rendering=e,n.tail=e.sibling,n.renderingStartTime=ut(),e.sibling=null,a=Ue.current,ae(Ue,i?a&1|2:a&1),_e&&Vt(t,n.treeForkCount),e):(Le(t),null);case 22:case 23:return gt(t),Bc(),n=t.memoizedState!==null,e!==null?e.memoizedState!==null!==n&&(t.flags|=8192):n&&(t.flags|=8192),n?(a&536870912)!==0&&(t.flags&128)===0&&(Le(t),t.subtreeFlags&6&&(t.flags|=8192)):Le(t),a=t.updateQueue,a!==null&&ts(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),n=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),n!==a&&(t.flags|=2048),e!==null&&$(Va),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),Zt(He),Le(t),null;case 25:return null;case 30:return null}throw Error(s(156,t.tag))}function ag(e,t){switch(Ec(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Zt(He),je(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return fr(t),null;case 31:if(t.memoizedState!==null){if(gt(t),t.alternate===null)throw Error(s(340));Qa()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(gt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(s(340));Qa()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return $(Ue),null;case 4:return je(),null;case 10:return Zt(t.type),null;case 22:case 23:return gt(t),Bc(),e!==null&&$(Va),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Zt(He),null;case 25:return null;default:return null}}function Kd(e,t){switch(Ec(t),t.tag){case 3:Zt(He),je();break;case 26:case 27:case 5:fr(t);break;case 4:je();break;case 31:t.memoizedState!==null&&gt(t);break;case 13:gt(t);break;case 19:$(Ue);break;case 10:Zt(t.type);break;case 22:case 23:gt(t),Bc(),e!==null&&$(Va);break;case 24:Zt(He)}}function bi(e,t){try{var a=t.updateQueue,n=a!==null?a.lastEffect:null;if(n!==null){var i=n.next;a=i;do{if((a.tag&e)===e){n=void 0;var r=a.create,o=a.inst;n=r(),o.destroy=n}a=a.next}while(a!==i)}}catch(p){Ee(t,t.return,p)}}function _a(e,t,a){try{var n=t.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var r=i.next;n=r;do{if((n.tag&e)===e){var o=n.inst,p=o.destroy;if(p!==void 0){o.destroy=void 0,i=t;var z=a,P=p;try{P()}catch(Z){Ee(i,z,Z)}}}n=n.next}while(n!==r)}}catch(Z){Ee(t,t.return,Z)}}function Jd(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{Gu(t,a)}catch(n){Ee(e,e.return,n)}}}function $d(e,t,a){a.props=Ka(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(n){Ee(e,t,n)}}function wi(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var n=e.stateNode;break;case 30:n=e.stateNode;break;default:n=e.stateNode}typeof a=="function"?e.refCleanup=a(n):a.current=n}}catch(i){Ee(e,t,i)}}function Ht(e,t){var a=e.ref,n=e.refCleanup;if(a!==null)if(typeof n=="function")try{n()}catch(i){Ee(e,t,i)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(i){Ee(e,t,i)}else a.current=null}function Wd(e){var t=e.type,a=e.memoizedProps,n=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break e;case"img":a.src?n.src=a.src:a.srcSet&&(n.srcset=a.srcSet)}}catch(i){Ee(e,e.return,i)}}function _o(e,t,a){try{var n=e.stateNode;Tg(n,e.type,a,t),n[at]=t}catch(i){Ee(e,e.return,i)}}function ef(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ra(e.type)||e.tag===4}function So(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||ef(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ra(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function bo(e,t,a){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=Qt));else if(n!==4&&(n===27&&Ra(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(bo(e,t,a),e=e.sibling;e!==null;)bo(e,t,a),e=e.sibling}function as(e,t,a){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(n!==4&&(n===27&&Ra(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(as(e,t,a),e=e.sibling;e!==null;)as(e,t,a),e=e.sibling}function tf(e){var t=e.stateNode,a=e.memoizedProps;try{for(var n=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Je(t,n,a),t[Ze]=e,t[at]=a}catch(r){Ee(e,e.return,r)}}var $t=!1,Qe=!1,wo=!1,af=typeof WeakSet=="function"?WeakSet:Set,Ve=null;function ng(e,t){if(e=e.containerInfo,Yo=Cs,e=hu(e),hc(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var n=a.getSelection&&a.getSelection();if(n&&n.rangeCount!==0){a=n.anchorNode;var i=n.anchorOffset,r=n.focusNode;n=n.focusOffset;try{a.nodeType,r.nodeType}catch{a=null;break e}var o=0,p=-1,z=-1,P=0,Z=0,J=e,V=null;t:for(;;){for(var X;J!==a||i!==0&&J.nodeType!==3||(p=o+i),J!==r||n!==0&&J.nodeType!==3||(z=o+n),J.nodeType===3&&(o+=J.nodeValue.length),(X=J.firstChild)!==null;)V=J,J=X;for(;;){if(J===e)break t;if(V===a&&++P===i&&(p=o),V===r&&++Z===n&&(z=o),(X=J.nextSibling)!==null)break;J=V,V=J.parentNode}J=X}a=p===-1||z===-1?null:{start:p,end:z}}else a=null}a=a||{start:0,end:0}}else a=null;for(Po={focusedElem:e,selectionRange:a},Cs=!1,Ve=t;Ve!==null;)if(t=Ve,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ve=e;else for(;Ve!==null;){switch(t=Ve,r=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)i=e[a],i.ref.impl=i.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&r!==null){e=void 0,a=t,i=r.memoizedProps,r=r.memoizedState,n=a.stateNode;try{var ie=Ka(a.type,i);e=n.getSnapshotBeforeUpdate(ie,r),n.__reactInternalSnapshotBeforeUpdate=e}catch(oe){Ee(a,a.return,oe)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)Zo(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Zo(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=t.sibling,e!==null){e.return=t.return,Ve=e;break}Ve=t.return}}function nf(e,t,a){var n=a.flags;switch(a.tag){case 0:case 11:case 15:ea(e,a),n&4&&bi(5,a);break;case 1:if(ea(e,a),n&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(o){Ee(a,a.return,o)}else{var i=Ka(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){Ee(a,a.return,o)}}n&64&&Jd(a),n&512&&wi(a,a.return);break;case 3:if(ea(e,a),n&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{Gu(e,t)}catch(o){Ee(a,a.return,o)}}break;case 27:t===null&&n&4&&tf(a);case 26:case 5:ea(e,a),t===null&&n&4&&Wd(a),n&512&&wi(a,a.return);break;case 12:ea(e,a);break;case 31:ea(e,a),n&4&&cf(e,a);break;case 13:ea(e,a),n&4&&of(e,a),n&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=fg.bind(null,a),Ag(e,a))));break;case 22:if(n=a.memoizedState!==null||$t,!n){t=t!==null&&t.memoizedState!==null||Qe,i=$t;var r=Qe;$t=n,(Qe=t)&&!r?ta(e,a,(a.subtreeFlags&8772)!==0):ea(e,a),$t=i,Qe=r}break;case 30:break;default:ea(e,a)}}function rf(e){var t=e.alternate;t!==null&&(e.alternate=null,rf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Js(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ae=null,it=!1;function Wt(e,t,a){for(a=a.child;a!==null;)sf(e,t,a),a=a.sibling}function sf(e,t,a){if(dt&&typeof dt.onCommitFiberUnmount=="function")try{dt.onCommitFiberUnmount(Xn,a)}catch{}switch(a.tag){case 26:Qe||Ht(a,t),Wt(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Qe||Ht(a,t);var n=Ae,i=it;Ra(a.type)&&(Ae=a.stateNode,it=!1),Wt(e,t,a),Li(a.stateNode),Ae=n,it=i;break;case 5:Qe||Ht(a,t);case 6:if(n=Ae,i=it,Ae=null,Wt(e,t,a),Ae=n,it=i,Ae!==null)if(it)try{(Ae.nodeType===9?Ae.body:Ae.nodeName==="HTML"?Ae.ownerDocument.body:Ae).removeChild(a.stateNode)}catch(r){Ee(a,t,r)}else try{Ae.removeChild(a.stateNode)}catch(r){Ee(a,t,r)}break;case 18:Ae!==null&&(it?(e=Ae,$f(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Bn(e)):$f(Ae,a.stateNode));break;case 4:n=Ae,i=it,Ae=a.stateNode.containerInfo,it=!0,Wt(e,t,a),Ae=n,it=i;break;case 0:case 11:case 14:case 15:_a(2,a,t),Qe||_a(4,a,t),Wt(e,t,a);break;case 1:Qe||(Ht(a,t),n=a.stateNode,typeof n.componentWillUnmount=="function"&&$d(a,t,n)),Wt(e,t,a);break;case 21:Wt(e,t,a);break;case 22:Qe=(n=Qe)||a.memoizedState!==null,Wt(e,t,a),Qe=n;break;default:Wt(e,t,a)}}function cf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Bn(e)}catch(a){Ee(t,t.return,a)}}}function of(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Bn(e)}catch(a){Ee(t,t.return,a)}}function ig(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new af),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new af),t;default:throw Error(s(435,e.tag))}}function ns(e,t){var a=ig(e);t.forEach(function(n){if(!a.has(n)){a.add(n);var i=pg.bind(null,e,n);n.then(i,i)}})}function rt(e,t){var a=t.deletions;if(a!==null)for(var n=0;n<a.length;n++){var i=a[n],r=e,o=t,p=o;e:for(;p!==null;){switch(p.tag){case 27:if(Ra(p.type)){Ae=p.stateNode,it=!1;break e}break;case 5:Ae=p.stateNode,it=!1;break e;case 3:case 4:Ae=p.stateNode.containerInfo,it=!0;break e}p=p.return}if(Ae===null)throw Error(s(160));sf(r,o,i),Ae=null,it=!1,r=i.alternate,r!==null&&(r.return=null),i.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)lf(t,e),t=t.sibling}var zt=null;function lf(e,t){var a=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:rt(t,e),st(e),n&4&&(_a(3,e,e.return),bi(3,e),_a(5,e,e.return));break;case 1:rt(t,e),st(e),n&512&&(Qe||a===null||Ht(a,a.return)),n&64&&$t&&(e=e.updateQueue,e!==null&&(n=e.callbacks,n!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?n:a.concat(n))));break;case 26:var i=zt;if(rt(t,e),st(e),n&512&&(Qe||a===null||Ht(a,a.return)),n&4){var r=a!==null?a.memoizedState:null;if(n=e.memoizedState,a===null)if(n===null)if(e.stateNode===null){e:{n=e.type,a=e.memoizedProps,i=i.ownerDocument||i;t:switch(n){case"title":r=i.getElementsByTagName("title")[0],(!r||r[Fn]||r[Ze]||r.namespaceURI==="http://www.w3.org/2000/svg"||r.hasAttribute("itemprop"))&&(r=i.createElement(n),i.head.insertBefore(r,i.querySelector("head > title"))),Je(r,n,a),r[Ze]=e,Pe(r),n=r;break e;case"link":var o=lp("link","href",i).get(n+(a.href||""));if(o){for(var p=0;p<o.length;p++)if(r=o[p],r.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&r.getAttribute("rel")===(a.rel==null?null:a.rel)&&r.getAttribute("title")===(a.title==null?null:a.title)&&r.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){o.splice(p,1);break t}}r=i.createElement(n),Je(r,n,a),i.head.appendChild(r);break;case"meta":if(o=lp("meta","content",i).get(n+(a.content||""))){for(p=0;p<o.length;p++)if(r=o[p],r.getAttribute("content")===(a.content==null?null:""+a.content)&&r.getAttribute("name")===(a.name==null?null:a.name)&&r.getAttribute("property")===(a.property==null?null:a.property)&&r.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&r.getAttribute("charset")===(a.charSet==null?null:a.charSet)){o.splice(p,1);break t}}r=i.createElement(n),Je(r,n,a),i.head.appendChild(r);break;default:throw Error(s(468,n))}r[Ze]=e,Pe(r),n=r}e.stateNode=n}else up(i,e.type,e.stateNode);else e.stateNode=op(i,n,e.memoizedProps);else r!==n?(r===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):r.count--,n===null?up(i,e.type,e.stateNode):op(i,n,e.memoizedProps)):n===null&&e.stateNode!==null&&_o(e,e.memoizedProps,a.memoizedProps)}break;case 27:rt(t,e),st(e),n&512&&(Qe||a===null||Ht(a,a.return)),a!==null&&n&4&&_o(e,e.memoizedProps,a.memoizedProps);break;case 5:if(rt(t,e),st(e),n&512&&(Qe||a===null||Ht(a,a.return)),e.flags&32){i=e.stateNode;try{ln(i,"")}catch(ie){Ee(e,e.return,ie)}}n&4&&e.stateNode!=null&&(i=e.memoizedProps,_o(e,i,a!==null?a.memoizedProps:i)),n&1024&&(wo=!0);break;case 6:if(rt(t,e),st(e),n&4){if(e.stateNode===null)throw Error(s(162));n=e.memoizedProps,a=e.stateNode;try{a.nodeValue=n}catch(ie){Ee(e,e.return,ie)}}break;case 3:if(_s=null,i=zt,zt=vs(t.containerInfo),rt(t,e),zt=i,st(e),n&4&&a!==null&&a.memoizedState.isDehydrated)try{Bn(t.containerInfo)}catch(ie){Ee(e,e.return,ie)}wo&&(wo=!1,uf(e));break;case 4:n=zt,zt=vs(e.stateNode.containerInfo),rt(t,e),st(e),zt=n;break;case 12:rt(t,e),st(e);break;case 31:rt(t,e),st(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,ns(e,n)));break;case 13:rt(t,e),st(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(rs=ut()),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,ns(e,n)));break;case 22:i=e.memoizedState!==null;var z=a!==null&&a.memoizedState!==null,P=$t,Z=Qe;if($t=P||i,Qe=Z||z,rt(t,e),Qe=Z,$t=P,st(e),n&8192)e:for(t=e.stateNode,t._visibility=i?t._visibility&-2:t._visibility|1,i&&(a===null||z||$t||Qe||Ja(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){z=a=t;try{if(r=z.stateNode,i)o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none";else{p=z.stateNode;var J=z.memoizedProps.style,V=J!=null&&J.hasOwnProperty("display")?J.display:null;p.style.display=V==null||typeof V=="boolean"?"":(""+V).trim()}}catch(ie){Ee(z,z.return,ie)}}}else if(t.tag===6){if(a===null){z=t;try{z.stateNode.nodeValue=i?"":z.memoizedProps}catch(ie){Ee(z,z.return,ie)}}}else if(t.tag===18){if(a===null){z=t;try{var X=z.stateNode;i?Wf(X,!0):Wf(z.stateNode,!1)}catch(ie){Ee(z,z.return,ie)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}n&4&&(n=e.updateQueue,n!==null&&(a=n.retryQueue,a!==null&&(n.retryQueue=null,ns(e,a))));break;case 19:rt(t,e),st(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,ns(e,n)));break;case 30:break;case 21:break;default:rt(t,e),st(e)}}function st(e){var t=e.flags;if(t&2){try{for(var a,n=e.return;n!==null;){if(ef(n)){a=n;break}n=n.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var i=a.stateNode,r=So(e);as(e,r,i);break;case 5:var o=a.stateNode;a.flags&32&&(ln(o,""),a.flags&=-33);var p=So(e);as(e,p,o);break;case 3:case 4:var z=a.stateNode.containerInfo,P=So(e);bo(e,P,z);break;default:throw Error(s(161))}}catch(Z){Ee(e,e.return,Z)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function uf(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;uf(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function ea(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)nf(e,t.alternate,t),t=t.sibling}function Ja(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:_a(4,t,t.return),Ja(t);break;case 1:Ht(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&$d(t,t.return,a),Ja(t);break;case 27:Li(t.stateNode);case 26:case 5:Ht(t,t.return),Ja(t);break;case 22:t.memoizedState===null&&Ja(t);break;case 30:Ja(t);break;default:Ja(t)}e=e.sibling}}function ta(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var n=t.alternate,i=e,r=t,o=r.flags;switch(r.tag){case 0:case 11:case 15:ta(i,r,a),bi(4,r);break;case 1:if(ta(i,r,a),n=r,i=n.stateNode,typeof i.componentDidMount=="function")try{i.componentDidMount()}catch(P){Ee(n,n.return,P)}if(n=r,i=n.updateQueue,i!==null){var p=n.stateNode;try{var z=i.shared.hiddenCallbacks;if(z!==null)for(i.shared.hiddenCallbacks=null,i=0;i<z.length;i++)Bu(z[i],p)}catch(P){Ee(n,n.return,P)}}a&&o&64&&Jd(r),wi(r,r.return);break;case 27:tf(r);case 26:case 5:ta(i,r,a),a&&n===null&&o&4&&Wd(r),wi(r,r.return);break;case 12:ta(i,r,a);break;case 31:ta(i,r,a),a&&o&4&&cf(i,r);break;case 13:ta(i,r,a),a&&o&4&&of(i,r);break;case 22:r.memoizedState===null&&ta(i,r,a),wi(r,r.return);break;case 30:break;default:ta(i,r,a)}t=t.sibling}}function Co(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&oi(a))}function To(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&oi(e))}function Nt(e,t,a,n){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)df(e,t,a,n),t=t.sibling}function df(e,t,a,n){var i=t.flags;switch(t.tag){case 0:case 11:case 15:Nt(e,t,a,n),i&2048&&bi(9,t);break;case 1:Nt(e,t,a,n);break;case 3:Nt(e,t,a,n),i&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&oi(e)));break;case 12:if(i&2048){Nt(e,t,a,n),e=t.stateNode;try{var r=t.memoizedProps,o=r.id,p=r.onPostCommit;typeof p=="function"&&p(o,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(z){Ee(t,t.return,z)}}else Nt(e,t,a,n);break;case 31:Nt(e,t,a,n);break;case 13:Nt(e,t,a,n);break;case 23:break;case 22:r=t.stateNode,o=t.alternate,t.memoizedState!==null?r._visibility&2?Nt(e,t,a,n):Ci(e,t):r._visibility&2?Nt(e,t,a,n):(r._visibility|=2,xn(e,t,a,n,(t.subtreeFlags&10256)!==0||!1)),i&2048&&Co(o,t);break;case 24:Nt(e,t,a,n),i&2048&&To(t.alternate,t);break;default:Nt(e,t,a,n)}}function xn(e,t,a,n,i){for(i=i&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var r=e,o=t,p=a,z=n,P=o.flags;switch(o.tag){case 0:case 11:case 15:xn(r,o,p,z,i),bi(8,o);break;case 23:break;case 22:var Z=o.stateNode;o.memoizedState!==null?Z._visibility&2?xn(r,o,p,z,i):Ci(r,o):(Z._visibility|=2,xn(r,o,p,z,i)),i&&P&2048&&Co(o.alternate,o);break;case 24:xn(r,o,p,z,i),i&&P&2048&&To(o.alternate,o);break;default:xn(r,o,p,z,i)}t=t.sibling}}function Ci(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,n=t,i=n.flags;switch(n.tag){case 22:Ci(a,n),i&2048&&Co(n.alternate,n);break;case 24:Ci(a,n),i&2048&&To(n.alternate,n);break;default:Ci(a,n)}t=t.sibling}}var Ti=8192;function On(e,t,a){if(e.subtreeFlags&Ti)for(e=e.child;e!==null;)ff(e,t,a),e=e.sibling}function ff(e,t,a){switch(e.tag){case 26:On(e,t,a),e.flags&Ti&&e.memoizedState!==null&&Pg(a,zt,e.memoizedState,e.memoizedProps);break;case 5:On(e,t,a);break;case 3:case 4:var n=zt;zt=vs(e.stateNode.containerInfo),On(e,t,a),zt=n;break;case 22:e.memoizedState===null&&(n=e.alternate,n!==null&&n.memoizedState!==null?(n=Ti,Ti=16777216,On(e,t,a),Ti=n):On(e,t,a));break;default:On(e,t,a)}}function pf(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Ei(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var n=t[a];Ve=n,mf(n,e)}pf(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)hf(e),e=e.sibling}function hf(e){switch(e.tag){case 0:case 11:case 15:Ei(e),e.flags&2048&&_a(9,e,e.return);break;case 3:Ei(e);break;case 12:Ei(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,is(e)):Ei(e);break;default:Ei(e)}}function is(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var n=t[a];Ve=n,mf(n,e)}pf(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:_a(8,t,t.return),is(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,is(t));break;default:is(t)}e=e.sibling}}function mf(e,t){for(;Ve!==null;){var a=Ve;switch(a.tag){case 0:case 11:case 15:_a(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var n=a.memoizedState.cachePool.pool;n!=null&&n.refCount++}break;case 24:oi(a.memoizedState.cache)}if(n=a.child,n!==null)n.return=a,Ve=n;else e:for(a=e;Ve!==null;){n=Ve;var i=n.sibling,r=n.return;if(rf(n),n===a){Ve=null;break e}if(i!==null){i.return=r,Ve=i;break e}Ve=r}}}var rg={getCacheForType:function(e){var t=Fe(He),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a},cacheSignal:function(){return Fe(He).controller.signal}},sg=typeof WeakMap=="function"?WeakMap:Map,we=0,xe=null,he=null,ve=0,Te=0,vt=null,Sa=!1,Ln=!1,Eo=!1,aa=0,ke=0,ba=0,$a=0,Ro=0,yt=0,An=0,Ri=null,ct=null,Do=!1,rs=0,gf=0,ss=1/0,cs=null,wa=null,Ye=0,Ca=null,zn=null,na=0,Mo=0,xo=null,vf=null,Di=0,Oo=null;function _t(){return(we&2)!==0&&ve!==0?ve&-ve:D.T!==null?jo():Al()}function yf(){if(yt===0)if((ve&536870912)===0||_e){var e=mr;mr<<=1,(mr&3932160)===0&&(mr=262144),yt=e}else yt=536870912;return e=mt.current,e!==null&&(e.flags|=32),yt}function ot(e,t,a){(e===xe&&(Te===2||Te===9)||e.cancelPendingCommit!==null)&&(Nn(e,0),Ta(e,ve,yt,!1)),In(e,a),((we&2)===0||e!==xe)&&(e===xe&&((we&2)===0&&($a|=a),ke===4&&Ta(e,ve,yt,!1)),Bt(e))}function _f(e,t,a){if((we&6)!==0)throw Error(s(327));var n=!a&&(t&127)===0&&(t&e.expiredLanes)===0||Zn(e,t),i=n?lg(e,t):Ao(e,t,!0),r=n;do{if(i===0){Ln&&!n&&Ta(e,t,0,!1);break}else{if(a=e.current.alternate,r&&!cg(a)){i=Ao(e,t,!1),r=!1;continue}if(i===2){if(r=t,e.errorRecoveryDisabledLanes&r)var o=0;else o=e.pendingLanes&-536870913,o=o!==0?o:o&536870912?536870912:0;if(o!==0){t=o;e:{var p=e;i=Ri;var z=p.current.memoizedState.isDehydrated;if(z&&(Nn(p,o).flags|=256),o=Ao(p,o,!1),o!==2){if(Eo&&!z){p.errorRecoveryDisabledLanes|=r,$a|=r,i=4;break e}r=ct,ct=i,r!==null&&(ct===null?ct=r:ct.push.apply(ct,r))}i=o}if(r=!1,i!==2)continue}}if(i===1){Nn(e,0),Ta(e,t,0,!0);break}e:{switch(n=e,r=i,r){case 0:case 1:throw Error(s(345));case 4:if((t&4194048)!==t)break;case 6:Ta(n,t,yt,!Sa);break e;case 2:ct=null;break;case 3:case 5:break;default:throw Error(s(329))}if((t&62914560)===t&&(i=rs+300-ut(),10<i)){if(Ta(n,t,yt,!Sa),vr(n,0,!0)!==0)break e;na=t,n.timeoutHandle=Kf(Sf.bind(null,n,a,ct,cs,Do,t,yt,$a,An,Sa,r,"Throttled",-0,0),i);break e}Sf(n,a,ct,cs,Do,t,yt,$a,An,Sa,r,null,-0,0)}}break}while(!0);Bt(e)}function Sf(e,t,a,n,i,r,o,p,z,P,Z,J,V,X){if(e.timeoutHandle=-1,J=t.subtreeFlags,J&8192||(J&16785408)===16785408){J={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Qt},ff(t,r,J);var ie=(r&62914560)===r?rs-ut():(r&4194048)===r?gf-ut():0;if(ie=Vg(J,ie),ie!==null){na=r,e.cancelPendingCommit=ie(Mf.bind(null,e,t,r,a,n,i,o,p,z,Z,J,null,V,X)),Ta(e,r,o,!P);return}}Mf(e,t,r,a,n,i,o,p,z)}function cg(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var n=0;n<a.length;n++){var i=a[n],r=i.getSnapshot;i=i.value;try{if(!pt(r(),i))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ta(e,t,a,n){t&=~Ro,t&=~$a,e.suspendedLanes|=t,e.pingedLanes&=~t,n&&(e.warmLanes|=t),n=e.expirationTimes;for(var i=t;0<i;){var r=31-ft(i),o=1<<r;n[r]=-1,i&=~o}a!==0&&xl(e,a,t)}function os(){return(we&6)===0?(Mi(0),!1):!0}function Lo(){if(he!==null){if(Te===0)var e=he.return;else e=he,Xt=Ya=null,Xc(e),Tn=null,ui=0,e=he;for(;e!==null;)Kd(e.alternate,e),e=e.return;he=null}}function Nn(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,Dg(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),na=0,Lo(),xe=e,he=a=Pt(e.current,null),ve=t,Te=0,vt=null,Sa=!1,Ln=Zn(e,t),Eo=!1,An=yt=Ro=$a=ba=ke=0,ct=Ri=null,Do=!1,(t&8)!==0&&(t|=t&32);var n=e.entangledLanes;if(n!==0)for(e=e.entanglements,n&=t;0<n;){var i=31-ft(n),r=1<<i;t|=e[i],n&=~r}return aa=t,xr(),a}function bf(e,t){de=null,D.H=yi,t===Cn||t===Ur?(t=ju(),Te=3):t===Nc?(t=ju(),Te=4):Te=t===oo?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,vt=t,he===null&&(ke=1,Jr(e,Tt(t,e.current)))}function wf(){var e=mt.current;return e===null?!0:(ve&4194048)===ve?Mt===null:(ve&62914560)===ve||(ve&536870912)!==0?e===Mt:!1}function Cf(){var e=D.H;return D.H=yi,e===null?yi:e}function Tf(){var e=D.A;return D.A=rg,e}function ls(){ke=4,Sa||(ve&4194048)!==ve&&mt.current!==null||(Ln=!0),(ba&134217727)===0&&($a&134217727)===0||xe===null||Ta(xe,ve,yt,!1)}function Ao(e,t,a){var n=we;we|=2;var i=Cf(),r=Tf();(xe!==e||ve!==t)&&(cs=null,Nn(e,t)),t=!1;var o=ke;e:do try{if(Te!==0&&he!==null){var p=he,z=vt;switch(Te){case 8:Lo(),o=6;break e;case 3:case 2:case 9:case 6:mt.current===null&&(t=!0);var P=Te;if(Te=0,vt=null,kn(e,p,z,P),a&&Ln){o=0;break e}break;default:P=Te,Te=0,vt=null,kn(e,p,z,P)}}og(),o=ke;break}catch(Z){bf(e,Z)}while(!0);return t&&e.shellSuspendCounter++,Xt=Ya=null,we=n,D.H=i,D.A=r,he===null&&(xe=null,ve=0,xr()),o}function og(){for(;he!==null;)Ef(he)}function lg(e,t){var a=we;we|=2;var n=Cf(),i=Tf();xe!==e||ve!==t?(cs=null,ss=ut()+500,Nn(e,t)):Ln=Zn(e,t);e:do try{if(Te!==0&&he!==null){t=he;var r=vt;t:switch(Te){case 1:Te=0,vt=null,kn(e,t,r,1);break;case 2:case 9:if(Nu(r)){Te=0,vt=null,Rf(t);break}t=function(){Te!==2&&Te!==9||xe!==e||(Te=7),Bt(e)},r.then(t,t);break e;case 3:Te=7;break e;case 4:Te=5;break e;case 7:Nu(r)?(Te=0,vt=null,Rf(t)):(Te=0,vt=null,kn(e,t,r,7));break;case 5:var o=null;switch(he.tag){case 26:o=he.memoizedState;case 5:case 27:var p=he;if(o?dp(o):p.stateNode.complete){Te=0,vt=null;var z=p.sibling;if(z!==null)he=z;else{var P=p.return;P!==null?(he=P,us(P)):he=null}break t}}Te=0,vt=null,kn(e,t,r,5);break;case 6:Te=0,vt=null,kn(e,t,r,6);break;case 8:Lo(),ke=6;break e;default:throw Error(s(462))}}ug();break}catch(Z){bf(e,Z)}while(!0);return Xt=Ya=null,D.H=n,D.A=i,we=a,he!==null?0:(xe=null,ve=0,xr(),ke)}function ug(){for(;he!==null&&!zh();)Ef(he)}function Ef(e){var t=Id(e.alternate,e,aa);e.memoizedProps=e.pendingProps,t===null?us(e):he=t}function Rf(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=Qd(a,t,t.pendingProps,t.type,void 0,ve);break;case 11:t=Qd(a,t,t.pendingProps,t.type.render,t.ref,ve);break;case 5:Xc(t);default:Kd(a,t),t=he=Cu(t,aa),t=Id(a,t,aa)}e.memoizedProps=e.pendingProps,t===null?us(e):he=t}function kn(e,t,a,n){Xt=Ya=null,Xc(t),Tn=null,ui=0;var i=t.return;try{if($m(e,i,t,a,ve)){ke=1,Jr(e,Tt(a,e.current)),he=null;return}}catch(r){if(i!==null)throw he=i,r;ke=1,Jr(e,Tt(a,e.current)),he=null;return}t.flags&32768?(_e||n===1?e=!0:Ln||(ve&536870912)!==0?e=!1:(Sa=e=!0,(n===2||n===9||n===3||n===6)&&(n=mt.current,n!==null&&n.tag===13&&(n.flags|=16384))),Df(t,e)):us(t)}function us(e){var t=e;do{if((t.flags&32768)!==0){Df(t,Sa);return}e=t.return;var a=tg(t.alternate,t,aa);if(a!==null){he=a;return}if(t=t.sibling,t!==null){he=t;return}he=t=e}while(t!==null);ke===0&&(ke=5)}function Df(e,t){do{var a=ag(e.alternate,e);if(a!==null){a.flags&=32767,he=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){he=e;return}he=e=a}while(e!==null);ke=6,he=null}function Mf(e,t,a,n,i,r,o,p,z){e.cancelPendingCommit=null;do ds();while(Ye!==0);if((we&6)!==0)throw Error(s(327));if(t!==null){if(t===e.current)throw Error(s(177));if(r=t.lanes|t.childLanes,r|=_c,Yh(e,a,r,o,p,z),e===xe&&(he=xe=null,ve=0),zn=t,Ca=e,na=a,Mo=r,xo=i,vf=n,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,hg(pr,function(){return zf(),null})):(e.callbackNode=null,e.callbackPriority=0),n=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||n){n=D.T,D.T=null,i=G.p,G.p=2,o=we,we|=4;try{ng(e,t,a)}finally{we=o,G.p=i,D.T=n}}Ye=1,xf(),Of(),Lf()}}function xf(){if(Ye===1){Ye=0;var e=Ca,t=zn,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=D.T,D.T=null;var n=G.p;G.p=2;var i=we;we|=4;try{lf(t,e);var r=Po,o=hu(e.containerInfo),p=r.focusedElem,z=r.selectionRange;if(o!==p&&p&&p.ownerDocument&&pu(p.ownerDocument.documentElement,p)){if(z!==null&&hc(p)){var P=z.start,Z=z.end;if(Z===void 0&&(Z=P),"selectionStart"in p)p.selectionStart=P,p.selectionEnd=Math.min(Z,p.value.length);else{var J=p.ownerDocument||document,V=J&&J.defaultView||window;if(V.getSelection){var X=V.getSelection(),ie=p.textContent.length,oe=Math.min(z.start,ie),Me=z.end===void 0?oe:Math.min(z.end,ie);!X.extend&&oe>Me&&(o=Me,Me=oe,oe=o);var B=fu(p,oe),j=fu(p,Me);if(B&&j&&(X.rangeCount!==1||X.anchorNode!==B.node||X.anchorOffset!==B.offset||X.focusNode!==j.node||X.focusOffset!==j.offset)){var Y=J.createRange();Y.setStart(B.node,B.offset),X.removeAllRanges(),oe>Me?(X.addRange(Y),X.extend(j.node,j.offset)):(Y.setEnd(j.node,j.offset),X.addRange(Y))}}}}for(J=[],X=p;X=X.parentNode;)X.nodeType===1&&J.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof p.focus=="function"&&p.focus(),p=0;p<J.length;p++){var F=J[p];F.element.scrollLeft=F.left,F.element.scrollTop=F.top}}Cs=!!Yo,Po=Yo=null}finally{we=i,G.p=n,D.T=a}}e.current=t,Ye=2}}function Of(){if(Ye===2){Ye=0;var e=Ca,t=zn,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=D.T,D.T=null;var n=G.p;G.p=2;var i=we;we|=4;try{nf(e,t.alternate,t)}finally{we=i,G.p=n,D.T=a}}Ye=3}}function Lf(){if(Ye===4||Ye===3){Ye=0,Nh();var e=Ca,t=zn,a=na,n=vf;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Ye=5:(Ye=0,zn=Ca=null,Af(e,e.pendingLanes));var i=e.pendingLanes;if(i===0&&(wa=null),Fs(a),t=t.stateNode,dt&&typeof dt.onCommitFiberRoot=="function")try{dt.onCommitFiberRoot(Xn,t,void 0,(t.current.flags&128)===128)}catch{}if(n!==null){t=D.T,i=G.p,G.p=2,D.T=null;try{for(var r=e.onRecoverableError,o=0;o<n.length;o++){var p=n[o];r(p.value,{componentStack:p.stack})}}finally{D.T=t,G.p=i}}(na&3)!==0&&ds(),Bt(e),i=e.pendingLanes,(a&261930)!==0&&(i&42)!==0?e===Oo?Di++:(Di=0,Oo=e):Di=0,Mi(0)}}function Af(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,oi(t)))}function ds(){return xf(),Of(),Lf(),zf()}function zf(){if(Ye!==5)return!1;var e=Ca,t=Mo;Mo=0;var a=Fs(na),n=D.T,i=G.p;try{G.p=32>a?32:a,D.T=null,a=xo,xo=null;var r=Ca,o=na;if(Ye=0,zn=Ca=null,na=0,(we&6)!==0)throw Error(s(331));var p=we;if(we|=4,hf(r.current),df(r,r.current,o,a),we=p,Mi(0,!1),dt&&typeof dt.onPostCommitFiberRoot=="function")try{dt.onPostCommitFiberRoot(Xn,r)}catch{}return!0}finally{G.p=i,D.T=n,Af(e,t)}}function Nf(e,t,a){t=Tt(a,t),t=co(e.stateNode,t,2),e=ga(e,t,2),e!==null&&(In(e,2),Bt(e))}function Ee(e,t,a){if(e.tag===3)Nf(e,e,a);else for(;t!==null;){if(t.tag===3){Nf(t,e,a);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(wa===null||!wa.has(n))){e=Tt(a,e),a=Nd(2),n=ga(t,a,2),n!==null&&(kd(a,n,t,e),In(n,2),Bt(n));break}}t=t.return}}function zo(e,t,a){var n=e.pingCache;if(n===null){n=e.pingCache=new sg;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(a)||(Eo=!0,i.add(a),e=dg.bind(null,e,t,a),t.then(e,e))}function dg(e,t,a){var n=e.pingCache;n!==null&&n.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,xe===e&&(ve&a)===a&&(ke===4||ke===3&&(ve&62914560)===ve&&300>ut()-rs?(we&2)===0&&Nn(e,0):Ro|=a,An===ve&&(An=0)),Bt(e)}function kf(e,t){t===0&&(t=Ml()),e=Ba(e,t),e!==null&&(In(e,t),Bt(e))}function fg(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),kf(e,a)}function pg(e,t){var a=0;switch(e.tag){case 31:case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(a=i.retryLane);break;case 19:n=e.stateNode;break;case 22:n=e.stateNode._retryCache;break;default:throw Error(s(314))}n!==null&&n.delete(t),kf(e,a)}function hg(e,t){return Vs(e,t)}var fs=null,jn=null,No=!1,ps=!1,ko=!1,Ea=0;function Bt(e){e!==jn&&e.next===null&&(jn===null?fs=jn=e:jn=jn.next=e),ps=!0,No||(No=!0,gg())}function Mi(e,t){if(!ko&&ps){ko=!0;do for(var a=!1,n=fs;n!==null;){if(e!==0){var i=n.pendingLanes;if(i===0)var r=0;else{var o=n.suspendedLanes,p=n.pingedLanes;r=(1<<31-ft(42|e)+1)-1,r&=i&~(o&~p),r=r&201326741?r&201326741|1:r?r|2:0}r!==0&&(a=!0,Hf(n,r))}else r=ve,r=vr(n,n===xe?r:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),(r&3)===0||Zn(n,r)||(a=!0,Hf(n,r));n=n.next}while(a);ko=!1}}function mg(){jf()}function jf(){ps=No=!1;var e=0;Ea!==0&&Rg()&&(e=Ea);for(var t=ut(),a=null,n=fs;n!==null;){var i=n.next,r=Uf(n,t);r===0?(n.next=null,a===null?fs=i:a.next=i,i===null&&(jn=a)):(a=n,(e!==0||(r&3)!==0)&&(ps=!0)),n=i}Ye!==0&&Ye!==5||Mi(e),Ea!==0&&(Ea=0)}function Uf(e,t){for(var a=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,r=e.pendingLanes&-62914561;0<r;){var o=31-ft(r),p=1<<o,z=i[o];z===-1?((p&a)===0||(p&n)!==0)&&(i[o]=Qh(p,t)):z<=t&&(e.expiredLanes|=p),r&=~p}if(t=xe,a=ve,a=vr(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n=e.callbackNode,a===0||e===t&&(Te===2||Te===9)||e.cancelPendingCommit!==null)return n!==null&&n!==null&&Xs(n),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||Zn(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(n!==null&&Xs(n),Fs(a)){case 2:case 8:a=Rl;break;case 32:a=pr;break;case 268435456:a=Dl;break;default:a=pr}return n=qf.bind(null,e),a=Vs(a,n),e.callbackPriority=t,e.callbackNode=a,t}return n!==null&&n!==null&&Xs(n),e.callbackPriority=2,e.callbackNode=null,2}function qf(e,t){if(Ye!==0&&Ye!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(ds()&&e.callbackNode!==a)return null;var n=ve;return n=vr(e,e===xe?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n===0?null:(_f(e,n,t),Uf(e,ut()),e.callbackNode!=null&&e.callbackNode===a?qf.bind(null,e):null)}function Hf(e,t){if(ds())return null;_f(e,t,!0)}function gg(){Mg(function(){(we&6)!==0?Vs(El,mg):jf()})}function jo(){if(Ea===0){var e=bn;e===0&&(e=hr,hr<<=1,(hr&261888)===0&&(hr=256)),Ea=e}return Ea}function Bf(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:br(""+e)}function Gf(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function vg(e,t,a,n,i){if(t==="submit"&&a&&a.stateNode===i){var r=Bf((i[at]||null).action),o=n.submitter;o&&(t=(t=o[at]||null)?Bf(t.formAction):o.getAttribute("formAction"),t!==null&&(r=t,o=null));var p=new Er("action","action",null,n,i);e.push({event:p,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(Ea!==0){var z=o?Gf(i,o):new FormData(i);to(a,{pending:!0,data:z,method:i.method,action:r},null,z)}}else typeof r=="function"&&(p.preventDefault(),z=o?Gf(i,o):new FormData(i),to(a,{pending:!0,data:z,method:i.method,action:r},r,z))},currentTarget:i}]})}}for(var Uo=0;Uo<yc.length;Uo++){var qo=yc[Uo],yg=qo.toLowerCase(),_g=qo[0].toUpperCase()+qo.slice(1);At(yg,"on"+_g)}At(vu,"onAnimationEnd"),At(yu,"onAnimationIteration"),At(_u,"onAnimationStart"),At("dblclick","onDoubleClick"),At("focusin","onFocus"),At("focusout","onBlur"),At(km,"onTransitionRun"),At(jm,"onTransitionStart"),At(Um,"onTransitionCancel"),At(Su,"onTransitionEnd"),cn("onMouseEnter",["mouseout","mouseover"]),cn("onMouseLeave",["mouseout","mouseover"]),cn("onPointerEnter",["pointerout","pointerover"]),cn("onPointerLeave",["pointerout","pointerover"]),ja("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ja("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ja("onBeforeInput",["compositionend","keypress","textInput","paste"]),ja("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ja("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ja("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sg=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(xi));function Qf(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var n=e[a],i=n.event;n=n.listeners;e:{var r=void 0;if(t)for(var o=n.length-1;0<=o;o--){var p=n[o],z=p.instance,P=p.currentTarget;if(p=p.listener,z!==r&&i.isPropagationStopped())break e;r=p,i.currentTarget=P;try{r(i)}catch(Z){Mr(Z)}i.currentTarget=null,r=z}else for(o=0;o<n.length;o++){if(p=n[o],z=p.instance,P=p.currentTarget,p=p.listener,z!==r&&i.isPropagationStopped())break e;r=p,i.currentTarget=P;try{r(i)}catch(Z){Mr(Z)}i.currentTarget=null,r=z}}}}function me(e,t){var a=t[Ks];a===void 0&&(a=t[Ks]=new Set);var n=e+"__bubble";a.has(n)||(Yf(t,e,2,!1),a.add(n))}function Ho(e,t,a){var n=0;t&&(n|=4),Yf(a,e,n,t)}var hs="_reactListening"+Math.random().toString(36).slice(2);function Bo(e){if(!e[hs]){e[hs]=!0,kl.forEach(function(a){a!=="selectionchange"&&(Sg.has(a)||Ho(a,!1,e),Ho(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[hs]||(t[hs]=!0,Ho("selectionchange",!1,t))}}function Yf(e,t,a,n){switch(yp(t)){case 2:var i=Ig;break;case 8:i=Fg;break;default:i=tl}a=i.bind(null,t,a,e),i=void 0,!rc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,a,{capture:!0,passive:i}):e.addEventListener(t,a,!0):i!==void 0?e.addEventListener(t,a,{passive:i}):e.addEventListener(t,a,!1)}function Go(e,t,a,n,i){var r=n;if((t&1)===0&&(t&2)===0&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var p=n.stateNode.containerInfo;if(p===i)break;if(o===4)for(o=n.return;o!==null;){var z=o.tag;if((z===3||z===4)&&o.stateNode.containerInfo===i)return;o=o.return}for(;p!==null;){if(o=nn(p),o===null)return;if(z=o.tag,z===5||z===6||z===26||z===27){n=r=o;continue e}p=p.parentNode}}n=n.return}Zl(function(){var P=r,Z=nc(a),J=[];e:{var V=bu.get(e);if(V!==void 0){var X=Er,ie=e;switch(e){case"keypress":if(Cr(a)===0)break e;case"keydown":case"keyup":X=pm;break;case"focusin":ie="focus",X=lc;break;case"focusout":ie="blur",X=lc;break;case"beforeblur":case"afterblur":X=lc;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=Kl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=tm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=gm;break;case vu:case yu:case _u:X=im;break;case Su:X=ym;break;case"scroll":case"scrollend":X=Wh;break;case"wheel":X=Sm;break;case"copy":case"cut":case"paste":X=sm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=$l;break;case"toggle":case"beforetoggle":X=wm}var oe=(t&4)!==0,Me=!oe&&(e==="scroll"||e==="scrollend"),B=oe?V!==null?V+"Capture":null:V;oe=[];for(var j=P,Y;j!==null;){var F=j;if(Y=F.stateNode,F=F.tag,F!==5&&F!==26&&F!==27||Y===null||B===null||(F=Jn(j,B),F!=null&&oe.push(Oi(j,F,Y))),Me)break;j=j.return}0<oe.length&&(V=new X(V,ie,null,a,Z),J.push({event:V,listeners:oe}))}}if((t&7)===0){e:{if(V=e==="mouseover"||e==="pointerover",X=e==="mouseout"||e==="pointerout",V&&a!==ac&&(ie=a.relatedTarget||a.fromElement)&&(nn(ie)||ie[an]))break e;if((X||V)&&(V=Z.window===Z?Z:(V=Z.ownerDocument)?V.defaultView||V.parentWindow:window,X?(ie=a.relatedTarget||a.toElement,X=P,ie=ie?nn(ie):null,ie!==null&&(Me=N(ie),oe=ie.tag,ie!==Me||oe!==5&&oe!==27&&oe!==6)&&(ie=null)):(X=null,ie=P),X!==ie)){if(oe=Kl,F="onMouseLeave",B="onMouseEnter",j="mouse",(e==="pointerout"||e==="pointerover")&&(oe=$l,F="onPointerLeave",B="onPointerEnter",j="pointer"),Me=X==null?V:Kn(X),Y=ie==null?V:Kn(ie),V=new oe(F,j+"leave",X,a,Z),V.target=Me,V.relatedTarget=Y,F=null,nn(Z)===P&&(oe=new oe(B,j+"enter",ie,a,Z),oe.target=Y,oe.relatedTarget=Me,F=oe),Me=F,X&&ie)t:{for(oe=bg,B=X,j=ie,Y=0,F=B;F;F=oe(F))Y++;F=0;for(var ce=j;ce;ce=oe(ce))F++;for(;0<Y-F;)B=oe(B),Y--;for(;0<F-Y;)j=oe(j),F--;for(;Y--;){if(B===j||j!==null&&B===j.alternate){oe=B;break t}B=oe(B),j=oe(j)}oe=null}else oe=null;X!==null&&Pf(J,V,X,oe,!1),ie!==null&&Me!==null&&Pf(J,Me,ie,oe,!0)}}e:{if(V=P?Kn(P):window,X=V.nodeName&&V.nodeName.toLowerCase(),X==="select"||X==="input"&&V.type==="file")var Se=su;else if(iu(V))if(cu)Se=Am;else{Se=Om;var se=xm}else X=V.nodeName,!X||X.toLowerCase()!=="input"||V.type!=="checkbox"&&V.type!=="radio"?P&&tc(P.elementType)&&(Se=su):Se=Lm;if(Se&&(Se=Se(e,P))){ru(J,Se,a,Z);break e}se&&se(e,V,P),e==="focusout"&&P&&V.type==="number"&&P.memoizedProps.value!=null&&ec(V,"number",V.value)}switch(se=P?Kn(P):window,e){case"focusin":(iu(se)||se.contentEditable==="true")&&(pn=se,mc=P,ri=null);break;case"focusout":ri=mc=pn=null;break;case"mousedown":gc=!0;break;case"contextmenu":case"mouseup":case"dragend":gc=!1,mu(J,a,Z);break;case"selectionchange":if(Nm)break;case"keydown":case"keyup":mu(J,a,Z)}var fe;if(dc)e:{switch(e){case"compositionstart":var ye="onCompositionStart";break e;case"compositionend":ye="onCompositionEnd";break e;case"compositionupdate":ye="onCompositionUpdate";break e}ye=void 0}else fn?au(e,a)&&(ye="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(ye="onCompositionStart");ye&&(Wl&&a.locale!=="ko"&&(fn||ye!=="onCompositionStart"?ye==="onCompositionEnd"&&fn&&(fe=Il()):(la=Z,sc="value"in la?la.value:la.textContent,fn=!0)),se=ms(P,ye),0<se.length&&(ye=new Jl(ye,e,null,a,Z),J.push({event:ye,listeners:se}),fe?ye.data=fe:(fe=nu(a),fe!==null&&(ye.data=fe)))),(fe=Tm?Em(e,a):Rm(e,a))&&(ye=ms(P,"onBeforeInput"),0<ye.length&&(se=new Jl("onBeforeInput","beforeinput",null,a,Z),J.push({event:se,listeners:ye}),se.data=fe)),vg(J,e,P,a,Z)}Qf(J,t)})}function Oi(e,t,a){return{instance:e,listener:t,currentTarget:a}}function ms(e,t){for(var a=t+"Capture",n=[];e!==null;){var i=e,r=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||r===null||(i=Jn(e,a),i!=null&&n.unshift(Oi(e,i,r)),i=Jn(e,t),i!=null&&n.push(Oi(e,i,r))),e.tag===3)return n;e=e.return}return[]}function bg(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Pf(e,t,a,n,i){for(var r=t._reactName,o=[];a!==null&&a!==n;){var p=a,z=p.alternate,P=p.stateNode;if(p=p.tag,z!==null&&z===n)break;p!==5&&p!==26&&p!==27||P===null||(z=P,i?(P=Jn(a,r),P!=null&&o.unshift(Oi(a,P,z))):i||(P=Jn(a,r),P!=null&&o.push(Oi(a,P,z)))),a=a.return}o.length!==0&&e.push({event:t,listeners:o})}var wg=/\r\n?/g,Cg=/\u0000|\uFFFD/g;function Vf(e){return(typeof e=="string"?e:""+e).replace(wg,`
`).replace(Cg,"")}function Xf(e,t){return t=Vf(t),Vf(e)===t}function De(e,t,a,n,i,r){switch(a){case"children":typeof n=="string"?t==="body"||t==="textarea"&&n===""||ln(e,n):(typeof n=="number"||typeof n=="bigint")&&t!=="body"&&ln(e,""+n);break;case"className":_r(e,"class",n);break;case"tabIndex":_r(e,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":_r(e,a,n);break;case"style":Vl(e,n,r);break;case"data":if(t!=="object"){_r(e,"data",n);break}case"src":case"href":if(n===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(n==null||typeof n=="function"||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(a);break}n=br(""+n),e.setAttribute(a,n);break;case"action":case"formAction":if(typeof n=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof r=="function"&&(a==="formAction"?(t!=="input"&&De(e,t,"name",i.name,i,null),De(e,t,"formEncType",i.formEncType,i,null),De(e,t,"formMethod",i.formMethod,i,null),De(e,t,"formTarget",i.formTarget,i,null)):(De(e,t,"encType",i.encType,i,null),De(e,t,"method",i.method,i,null),De(e,t,"target",i.target,i,null)));if(n==null||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(a);break}n=br(""+n),e.setAttribute(a,n);break;case"onClick":n!=null&&(e.onclick=Qt);break;case"onScroll":n!=null&&me("scroll",e);break;case"onScrollEnd":n!=null&&me("scrollend",e);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(s(61));if(a=n.__html,a!=null){if(i.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"multiple":e.multiple=n&&typeof n!="function"&&typeof n!="symbol";break;case"muted":e.muted=n&&typeof n!="function"&&typeof n!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(n==null||typeof n=="function"||typeof n=="boolean"||typeof n=="symbol"){e.removeAttribute("xlink:href");break}a=br(""+n),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(a,""+n):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":n===!0?e.setAttribute(a,""):n!==!1&&n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(a,n):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":n!=null&&typeof n!="function"&&typeof n!="symbol"&&!isNaN(n)&&1<=n?e.setAttribute(a,n):e.removeAttribute(a);break;case"rowSpan":case"start":n==null||typeof n=="function"||typeof n=="symbol"||isNaN(n)?e.removeAttribute(a):e.setAttribute(a,n);break;case"popover":me("beforetoggle",e),me("toggle",e),yr(e,"popover",n);break;case"xlinkActuate":Gt(e,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":Gt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":Gt(e,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":Gt(e,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":Gt(e,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":Gt(e,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":Gt(e,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":Gt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":Gt(e,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":yr(e,"is",n);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Jh.get(a)||a,yr(e,a,n))}}function Qo(e,t,a,n,i,r){switch(a){case"style":Vl(e,n,r);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(s(61));if(a=n.__html,a!=null){if(i.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"children":typeof n=="string"?ln(e,n):(typeof n=="number"||typeof n=="bigint")&&ln(e,""+n);break;case"onScroll":n!=null&&me("scroll",e);break;case"onScrollEnd":n!=null&&me("scrollend",e);break;case"onClick":n!=null&&(e.onclick=Qt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!jl.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(i=a.endsWith("Capture"),t=a.slice(2,i?a.length-7:void 0),r=e[at]||null,r=r!=null?r[a]:null,typeof r=="function"&&e.removeEventListener(t,r,i),typeof n=="function")){typeof r!="function"&&r!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,n,i);break e}a in e?e[a]=n:n===!0?e.setAttribute(a,""):yr(e,a,n)}}}function Je(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":me("error",e),me("load",e);var n=!1,i=!1,r;for(r in a)if(a.hasOwnProperty(r)){var o=a[r];if(o!=null)switch(r){case"src":n=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:De(e,t,r,o,a,null)}}i&&De(e,t,"srcSet",a.srcSet,a,null),n&&De(e,t,"src",a.src,a,null);return;case"input":me("invalid",e);var p=r=o=i=null,z=null,P=null;for(n in a)if(a.hasOwnProperty(n)){var Z=a[n];if(Z!=null)switch(n){case"name":i=Z;break;case"type":o=Z;break;case"checked":z=Z;break;case"defaultChecked":P=Z;break;case"value":r=Z;break;case"defaultValue":p=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(s(137,t));break;default:De(e,t,n,Z,a,null)}}Gl(e,r,p,z,P,o,i,!1);return;case"select":me("invalid",e),n=o=r=null;for(i in a)if(a.hasOwnProperty(i)&&(p=a[i],p!=null))switch(i){case"value":r=p;break;case"defaultValue":o=p;break;case"multiple":n=p;default:De(e,t,i,p,a,null)}t=r,a=o,e.multiple=!!n,t!=null?on(e,!!n,t,!1):a!=null&&on(e,!!n,a,!0);return;case"textarea":me("invalid",e),r=i=n=null;for(o in a)if(a.hasOwnProperty(o)&&(p=a[o],p!=null))switch(o){case"value":n=p;break;case"defaultValue":i=p;break;case"children":r=p;break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(s(91));break;default:De(e,t,o,p,a,null)}Yl(e,n,i,r);return;case"option":for(z in a)a.hasOwnProperty(z)&&(n=a[z],n!=null)&&(z==="selected"?e.selected=n&&typeof n!="function"&&typeof n!="symbol":De(e,t,z,n,a,null));return;case"dialog":me("beforetoggle",e),me("toggle",e),me("cancel",e),me("close",e);break;case"iframe":case"object":me("load",e);break;case"video":case"audio":for(n=0;n<xi.length;n++)me(xi[n],e);break;case"image":me("error",e),me("load",e);break;case"details":me("toggle",e);break;case"embed":case"source":case"link":me("error",e),me("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(P in a)if(a.hasOwnProperty(P)&&(n=a[P],n!=null))switch(P){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:De(e,t,P,n,a,null)}return;default:if(tc(t)){for(Z in a)a.hasOwnProperty(Z)&&(n=a[Z],n!==void 0&&Qo(e,t,Z,n,a,void 0));return}}for(p in a)a.hasOwnProperty(p)&&(n=a[p],n!=null&&De(e,t,p,n,a,null))}function Tg(e,t,a,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,r=null,o=null,p=null,z=null,P=null,Z=null;for(X in a){var J=a[X];if(a.hasOwnProperty(X)&&J!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":z=J;default:n.hasOwnProperty(X)||De(e,t,X,null,n,J)}}for(var V in n){var X=n[V];if(J=a[V],n.hasOwnProperty(V)&&(X!=null||J!=null))switch(V){case"type":r=X;break;case"name":i=X;break;case"checked":P=X;break;case"defaultChecked":Z=X;break;case"value":o=X;break;case"defaultValue":p=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,t));break;default:X!==J&&De(e,t,V,X,n,J)}}Ws(e,o,p,z,P,Z,r,i);return;case"select":X=o=p=V=null;for(r in a)if(z=a[r],a.hasOwnProperty(r)&&z!=null)switch(r){case"value":break;case"multiple":X=z;default:n.hasOwnProperty(r)||De(e,t,r,null,n,z)}for(i in n)if(r=n[i],z=a[i],n.hasOwnProperty(i)&&(r!=null||z!=null))switch(i){case"value":V=r;break;case"defaultValue":p=r;break;case"multiple":o=r;default:r!==z&&De(e,t,i,r,n,z)}t=p,a=o,n=X,V!=null?on(e,!!a,V,!1):!!n!=!!a&&(t!=null?on(e,!!a,t,!0):on(e,!!a,a?[]:"",!1));return;case"textarea":X=V=null;for(p in a)if(i=a[p],a.hasOwnProperty(p)&&i!=null&&!n.hasOwnProperty(p))switch(p){case"value":break;case"children":break;default:De(e,t,p,null,n,i)}for(o in n)if(i=n[o],r=a[o],n.hasOwnProperty(o)&&(i!=null||r!=null))switch(o){case"value":V=i;break;case"defaultValue":X=i;break;case"children":break;case"dangerouslySetInnerHTML":if(i!=null)throw Error(s(91));break;default:i!==r&&De(e,t,o,i,n,r)}Ql(e,V,X);return;case"option":for(var ie in a)V=a[ie],a.hasOwnProperty(ie)&&V!=null&&!n.hasOwnProperty(ie)&&(ie==="selected"?e.selected=!1:De(e,t,ie,null,n,V));for(z in n)V=n[z],X=a[z],n.hasOwnProperty(z)&&V!==X&&(V!=null||X!=null)&&(z==="selected"?e.selected=V&&typeof V!="function"&&typeof V!="symbol":De(e,t,z,V,n,X));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var oe in a)V=a[oe],a.hasOwnProperty(oe)&&V!=null&&!n.hasOwnProperty(oe)&&De(e,t,oe,null,n,V);for(P in n)if(V=n[P],X=a[P],n.hasOwnProperty(P)&&V!==X&&(V!=null||X!=null))switch(P){case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(s(137,t));break;default:De(e,t,P,V,n,X)}return;default:if(tc(t)){for(var Me in a)V=a[Me],a.hasOwnProperty(Me)&&V!==void 0&&!n.hasOwnProperty(Me)&&Qo(e,t,Me,void 0,n,V);for(Z in n)V=n[Z],X=a[Z],!n.hasOwnProperty(Z)||V===X||V===void 0&&X===void 0||Qo(e,t,Z,V,n,X);return}}for(var B in a)V=a[B],a.hasOwnProperty(B)&&V!=null&&!n.hasOwnProperty(B)&&De(e,t,B,null,n,V);for(J in n)V=n[J],X=a[J],!n.hasOwnProperty(J)||V===X||V==null&&X==null||De(e,t,J,V,n,X)}function Zf(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Eg(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,a=performance.getEntriesByType("resource"),n=0;n<a.length;n++){var i=a[n],r=i.transferSize,o=i.initiatorType,p=i.duration;if(r&&p&&Zf(o)){for(o=0,p=i.responseEnd,n+=1;n<a.length;n++){var z=a[n],P=z.startTime;if(P>p)break;var Z=z.transferSize,J=z.initiatorType;Z&&Zf(J)&&(z=z.responseEnd,o+=Z*(z<p?1:(p-P)/(z-P)))}if(--n,t+=8*(r+o)/(i.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Yo=null,Po=null;function gs(e){return e.nodeType===9?e:e.ownerDocument}function If(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ff(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Vo(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Xo=null;function Rg(){var e=window.event;return e&&e.type==="popstate"?e===Xo?!1:(Xo=e,!0):(Xo=null,!1)}var Kf=typeof setTimeout=="function"?setTimeout:void 0,Dg=typeof clearTimeout=="function"?clearTimeout:void 0,Jf=typeof Promise=="function"?Promise:void 0,Mg=typeof queueMicrotask=="function"?queueMicrotask:typeof Jf<"u"?function(e){return Jf.resolve(null).then(e).catch(xg)}:Kf;function xg(e){setTimeout(function(){throw e})}function Ra(e){return e==="head"}function $f(e,t){var a=t,n=0;do{var i=a.nextSibling;if(e.removeChild(a),i&&i.nodeType===8)if(a=i.data,a==="/$"||a==="/&"){if(n===0){e.removeChild(i),Bn(t);return}n--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")n++;else if(a==="html")Li(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,Li(a);for(var r=a.firstChild;r;){var o=r.nextSibling,p=r.nodeName;r[Fn]||p==="SCRIPT"||p==="STYLE"||p==="LINK"&&r.rel.toLowerCase()==="stylesheet"||a.removeChild(r),r=o}}else a==="body"&&Li(e.ownerDocument.body);a=i}while(a);Bn(t)}function Wf(e,t){var a=e;e=0;do{var n=a.nextSibling;if(a.nodeType===1?t?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(t?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),n&&n.nodeType===8)if(a=n.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=n}while(a)}function Zo(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Zo(a),Js(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function Og(e,t,a,n){for(;e.nodeType===1;){var i=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!n&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(n){if(!e[Fn])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(r=e.getAttribute("rel"),r==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(r!==i.rel||e.getAttribute("href")!==(i.href==null||i.href===""?null:i.href)||e.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin)||e.getAttribute("title")!==(i.title==null?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(r=e.getAttribute("src"),(r!==(i.src==null?null:i.src)||e.getAttribute("type")!==(i.type==null?null:i.type)||e.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin))&&r&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var r=i.name==null?null:""+i.name;if(i.type==="hidden"&&e.getAttribute("name")===r)return e}else return e;if(e=xt(e.nextSibling),e===null)break}return null}function Lg(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=xt(e.nextSibling),e===null))return null;return e}function ep(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=xt(e.nextSibling),e===null))return null;return e}function Io(e){return e.data==="$?"||e.data==="$~"}function Fo(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Ag(e,t){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||a.readyState!=="loading")t();else{var n=function(){t(),a.removeEventListener("DOMContentLoaded",n)};a.addEventListener("DOMContentLoaded",n),e._reactRetry=n}}function xt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Ko=null;function tp(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(t===0)return xt(e.nextSibling);t--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||t++}e=e.nextSibling}return null}function ap(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(t===0)return e;t--}else a!=="/$"&&a!=="/&"||t++}e=e.previousSibling}return null}function np(e,t,a){switch(t=gs(a),e){case"html":if(e=t.documentElement,!e)throw Error(s(452));return e;case"head":if(e=t.head,!e)throw Error(s(453));return e;case"body":if(e=t.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function Li(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Js(e)}var Ot=new Map,ip=new Set;function vs(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ia=G.d;G.d={f:zg,r:Ng,D:kg,C:jg,L:Ug,m:qg,X:Bg,S:Hg,M:Gg};function zg(){var e=ia.f(),t=os();return e||t}function Ng(e){var t=rn(e);t!==null&&t.tag===5&&t.type==="form"?Sd(t):ia.r(e)}var Un=typeof document>"u"?null:document;function rp(e,t,a){var n=Un;if(n&&typeof t=="string"&&t){var i=wt(t);i='link[rel="'+e+'"][href="'+i+'"]',typeof a=="string"&&(i+='[crossorigin="'+a+'"]'),ip.has(i)||(ip.add(i),e={rel:e,crossOrigin:a,href:t},n.querySelector(i)===null&&(t=n.createElement("link"),Je(t,"link",e),Pe(t),n.head.appendChild(t)))}}function kg(e){ia.D(e),rp("dns-prefetch",e,null)}function jg(e,t){ia.C(e,t),rp("preconnect",e,t)}function Ug(e,t,a){ia.L(e,t,a);var n=Un;if(n&&e&&t){var i='link[rel="preload"][as="'+wt(t)+'"]';t==="image"&&a&&a.imageSrcSet?(i+='[imagesrcset="'+wt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(i+='[imagesizes="'+wt(a.imageSizes)+'"]')):i+='[href="'+wt(e)+'"]';var r=i;switch(t){case"style":r=qn(e);break;case"script":r=Hn(e)}Ot.has(r)||(e=S({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),Ot.set(r,e),n.querySelector(i)!==null||t==="style"&&n.querySelector(Ai(r))||t==="script"&&n.querySelector(zi(r))||(t=n.createElement("link"),Je(t,"link",e),Pe(t),n.head.appendChild(t)))}}function qg(e,t){ia.m(e,t);var a=Un;if(a&&e){var n=t&&typeof t.as=="string"?t.as:"script",i='link[rel="modulepreload"][as="'+wt(n)+'"][href="'+wt(e)+'"]',r=i;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=Hn(e)}if(!Ot.has(r)&&(e=S({rel:"modulepreload",href:e},t),Ot.set(r,e),a.querySelector(i)===null)){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(zi(r)))return}n=a.createElement("link"),Je(n,"link",e),Pe(n),a.head.appendChild(n)}}}function Hg(e,t,a){ia.S(e,t,a);var n=Un;if(n&&e){var i=sn(n).hoistableStyles,r=qn(e);t=t||"default";var o=i.get(r);if(!o){var p={loading:0,preload:null};if(o=n.querySelector(Ai(r)))p.loading=5;else{e=S({rel:"stylesheet",href:e,"data-precedence":t},a),(a=Ot.get(r))&&Jo(e,a);var z=o=n.createElement("link");Pe(z),Je(z,"link",e),z._p=new Promise(function(P,Z){z.onload=P,z.onerror=Z}),z.addEventListener("load",function(){p.loading|=1}),z.addEventListener("error",function(){p.loading|=2}),p.loading|=4,ys(o,t,n)}o={type:"stylesheet",instance:o,count:1,state:p},i.set(r,o)}}}function Bg(e,t){ia.X(e,t);var a=Un;if(a&&e){var n=sn(a).hoistableScripts,i=Hn(e),r=n.get(i);r||(r=a.querySelector(zi(i)),r||(e=S({src:e,async:!0},t),(t=Ot.get(i))&&$o(e,t),r=a.createElement("script"),Pe(r),Je(r,"link",e),a.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},n.set(i,r))}}function Gg(e,t){ia.M(e,t);var a=Un;if(a&&e){var n=sn(a).hoistableScripts,i=Hn(e),r=n.get(i);r||(r=a.querySelector(zi(i)),r||(e=S({src:e,async:!0,type:"module"},t),(t=Ot.get(i))&&$o(e,t),r=a.createElement("script"),Pe(r),Je(r,"link",e),a.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},n.set(i,r))}}function sp(e,t,a,n){var i=(i=pe.current)?vs(i):null;if(!i)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=qn(a.href),a=sn(i).hoistableStyles,n=a.get(t),n||(n={type:"style",instance:null,count:0,state:null},a.set(t,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=qn(a.href);var r=sn(i).hoistableStyles,o=r.get(e);if(o||(i=i.ownerDocument||i,o={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},r.set(e,o),(r=i.querySelector(Ai(e)))&&!r._p&&(o.instance=r,o.state.loading=5),Ot.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Ot.set(e,a),r||Qg(i,e,a,o.state))),t&&n===null)throw Error(s(528,""));return o}if(t&&n!==null)throw Error(s(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Hn(a),a=sn(i).hoistableScripts,n=a.get(t),n||(n={type:"script",instance:null,count:0,state:null},a.set(t,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function qn(e){return'href="'+wt(e)+'"'}function Ai(e){return'link[rel="stylesheet"]['+e+"]"}function cp(e){return S({},e,{"data-precedence":e.precedence,precedence:null})}function Qg(e,t,a,n){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?n.loading=1:(t=e.createElement("link"),n.preload=t,t.addEventListener("load",function(){return n.loading|=1}),t.addEventListener("error",function(){return n.loading|=2}),Je(t,"link",a),Pe(t),e.head.appendChild(t))}function Hn(e){return'[src="'+wt(e)+'"]'}function zi(e){return"script[async]"+e}function op(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var n=e.querySelector('style[data-href~="'+wt(a.href)+'"]');if(n)return t.instance=n,Pe(n),n;var i=S({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return n=(e.ownerDocument||e).createElement("style"),Pe(n),Je(n,"style",i),ys(n,a.precedence,e),t.instance=n;case"stylesheet":i=qn(a.href);var r=e.querySelector(Ai(i));if(r)return t.state.loading|=4,t.instance=r,Pe(r),r;n=cp(a),(i=Ot.get(i))&&Jo(n,i),r=(e.ownerDocument||e).createElement("link"),Pe(r);var o=r;return o._p=new Promise(function(p,z){o.onload=p,o.onerror=z}),Je(r,"link",n),t.state.loading|=4,ys(r,a.precedence,e),t.instance=r;case"script":return r=Hn(a.src),(i=e.querySelector(zi(r)))?(t.instance=i,Pe(i),i):(n=a,(i=Ot.get(r))&&(n=S({},a),$o(n,i)),e=e.ownerDocument||e,i=e.createElement("script"),Pe(i),Je(i,"link",n),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(s(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(n=t.instance,t.state.loading|=4,ys(n,a.precedence,e));return t.instance}function ys(e,t,a){for(var n=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=n.length?n[n.length-1]:null,r=i,o=0;o<n.length;o++){var p=n[o];if(p.dataset.precedence===t)r=p;else if(r!==i)break}r?r.parentNode.insertBefore(e,r.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function Jo(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function $o(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var _s=null;function lp(e,t,a){if(_s===null){var n=new Map,i=_s=new Map;i.set(a,n)}else i=_s,n=i.get(a),n||(n=new Map,i.set(a,n));if(n.has(e))return n;for(n.set(e,null),a=a.getElementsByTagName(e),i=0;i<a.length;i++){var r=a[i];if(!(r[Fn]||r[Ze]||e==="link"&&r.getAttribute("rel")==="stylesheet")&&r.namespaceURI!=="http://www.w3.org/2000/svg"){var o=r.getAttribute(t)||"";o=e+o;var p=n.get(o);p?p.push(r):n.set(o,[r])}}return n}function up(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function Yg(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function dp(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Pg(e,t,a,n){if(a.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var i=qn(n.href),r=t.querySelector(Ai(i));if(r){t=r._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Ss.bind(e),t.then(e,e)),a.state.loading|=4,a.instance=r,Pe(r);return}r=t.ownerDocument||t,n=cp(n),(i=Ot.get(i))&&Jo(n,i),r=r.createElement("link"),Pe(r);var o=r;o._p=new Promise(function(p,z){o.onload=p,o.onerror=z}),Je(r,"link",n),a.instance=r}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=Ss.bind(e),t.addEventListener("load",a),t.addEventListener("error",a))}}var Wo=0;function Vg(e,t){return e.stylesheets&&e.count===0&&ws(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var n=setTimeout(function(){if(e.stylesheets&&ws(e,e.stylesheets),e.unsuspend){var r=e.unsuspend;e.unsuspend=null,r()}},6e4+t);0<e.imgBytes&&Wo===0&&(Wo=62500*Eg());var i=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&ws(e,e.stylesheets),e.unsuspend)){var r=e.unsuspend;e.unsuspend=null,r()}},(e.imgBytes>Wo?50:800)+t);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(n),clearTimeout(i)}}:null}function Ss(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ws(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var bs=null;function ws(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,bs=new Map,t.forEach(Xg,e),bs=null,Ss.call(e))}function Xg(e,t){if(!(t.state.loading&4)){var a=bs.get(e);if(a)var n=a.get(null);else{a=new Map,bs.set(e,a);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<i.length;r++){var o=i[r];(o.nodeName==="LINK"||o.getAttribute("media")!=="not all")&&(a.set(o.dataset.precedence,o),n=o)}n&&a.set(null,n)}i=t.instance,o=i.getAttribute("data-precedence"),r=a.get(o)||n,r===n&&a.set(null,i),a.set(o,i),this.count++,n=Ss.bind(this),i.addEventListener("load",n),i.addEventListener("error",n),r?r.parentNode.insertBefore(i,r.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(i,e.firstChild)),t.state.loading|=4}}var Ni={$$typeof:x,Provider:null,Consumer:null,_currentValue:K,_currentValue2:K,_threadCount:0};function Zg(e,t,a,n,i,r,o,p,z){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Zs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zs(0),this.hiddenUpdates=Zs(null),this.identifierPrefix=n,this.onUncaughtError=i,this.onCaughtError=r,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=z,this.incompleteTransitions=new Map}function fp(e,t,a,n,i,r,o,p,z,P,Z,J){return e=new Zg(e,t,a,o,z,P,Z,J,p),t=1,r===!0&&(t|=24),r=ht(3,null,null,t),e.current=r,r.stateNode=e,t=Lc(),t.refCount++,e.pooledCache=t,t.refCount++,r.memoizedState={element:n,isDehydrated:a,cache:t},kc(r),e}function pp(e){return e?(e=gn,e):gn}function hp(e,t,a,n,i,r){i=pp(i),n.context===null?n.context=i:n.pendingContext=i,n=ma(t),n.payload={element:a},r=r===void 0?null:r,r!==null&&(n.callback=r),a=ga(e,n,t),a!==null&&(ot(a,e,t),fi(a,e,t))}function mp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function el(e,t){mp(e,t),(e=e.alternate)&&mp(e,t)}function gp(e){if(e.tag===13||e.tag===31){var t=Ba(e,67108864);t!==null&&ot(t,e,67108864),el(e,67108864)}}function vp(e){if(e.tag===13||e.tag===31){var t=_t();t=Is(t);var a=Ba(e,t);a!==null&&ot(a,e,t),el(e,t)}}var Cs=!0;function Ig(e,t,a,n){var i=D.T;D.T=null;var r=G.p;try{G.p=2,tl(e,t,a,n)}finally{G.p=r,D.T=i}}function Fg(e,t,a,n){var i=D.T;D.T=null;var r=G.p;try{G.p=8,tl(e,t,a,n)}finally{G.p=r,D.T=i}}function tl(e,t,a,n){if(Cs){var i=al(n);if(i===null)Go(e,t,n,Ts,a),_p(e,n);else if(Jg(i,e,t,a,n))n.stopPropagation();else if(_p(e,n),t&4&&-1<Kg.indexOf(e)){for(;i!==null;){var r=rn(i);if(r!==null)switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var o=ka(r.pendingLanes);if(o!==0){var p=r;for(p.pendingLanes|=2,p.entangledLanes|=2;o;){var z=1<<31-ft(o);p.entanglements[1]|=z,o&=~z}Bt(r),(we&6)===0&&(ss=ut()+500,Mi(0))}}break;case 31:case 13:p=Ba(r,2),p!==null&&ot(p,r,2),os(),el(r,2)}if(r=al(n),r===null&&Go(e,t,n,Ts,a),r===i)break;i=r}i!==null&&n.stopPropagation()}else Go(e,t,n,null,a)}}function al(e){return e=nc(e),nl(e)}var Ts=null;function nl(e){if(Ts=null,e=nn(e),e!==null){var t=N(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=R(t),e!==null)return e;e=null}else if(a===31){if(e=m(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Ts=e,null}function yp(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(kh()){case El:return 2;case Rl:return 8;case pr:case jh:return 32;case Dl:return 268435456;default:return 32}default:return 32}}var il=!1,Da=null,Ma=null,xa=null,ki=new Map,ji=new Map,Oa=[],Kg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function _p(e,t){switch(e){case"focusin":case"focusout":Da=null;break;case"dragenter":case"dragleave":Ma=null;break;case"mouseover":case"mouseout":xa=null;break;case"pointerover":case"pointerout":ki.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ji.delete(t.pointerId)}}function Ui(e,t,a,n,i,r){return e===null||e.nativeEvent!==r?(e={blockedOn:t,domEventName:a,eventSystemFlags:n,nativeEvent:r,targetContainers:[i]},t!==null&&(t=rn(t),t!==null&&gp(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Jg(e,t,a,n,i){switch(t){case"focusin":return Da=Ui(Da,e,t,a,n,i),!0;case"dragenter":return Ma=Ui(Ma,e,t,a,n,i),!0;case"mouseover":return xa=Ui(xa,e,t,a,n,i),!0;case"pointerover":var r=i.pointerId;return ki.set(r,Ui(ki.get(r)||null,e,t,a,n,i)),!0;case"gotpointercapture":return r=i.pointerId,ji.set(r,Ui(ji.get(r)||null,e,t,a,n,i)),!0}return!1}function Sp(e){var t=nn(e.target);if(t!==null){var a=N(t);if(a!==null){if(t=a.tag,t===13){if(t=R(a),t!==null){e.blockedOn=t,zl(e.priority,function(){vp(a)});return}}else if(t===31){if(t=m(a),t!==null){e.blockedOn=t,zl(e.priority,function(){vp(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Es(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=al(e.nativeEvent);if(a===null){a=e.nativeEvent;var n=new a.constructor(a.type,a);ac=n,a.target.dispatchEvent(n),ac=null}else return t=rn(a),t!==null&&gp(t),e.blockedOn=a,!1;t.shift()}return!0}function bp(e,t,a){Es(e)&&a.delete(t)}function $g(){il=!1,Da!==null&&Es(Da)&&(Da=null),Ma!==null&&Es(Ma)&&(Ma=null),xa!==null&&Es(xa)&&(xa=null),ki.forEach(bp),ji.forEach(bp)}function Rs(e,t){e.blockedOn===t&&(e.blockedOn=null,il||(il=!0,y.unstable_scheduleCallback(y.unstable_NormalPriority,$g)))}var Ds=null;function wp(e){Ds!==e&&(Ds=e,y.unstable_scheduleCallback(y.unstable_NormalPriority,function(){Ds===e&&(Ds=null);for(var t=0;t<e.length;t+=3){var a=e[t],n=e[t+1],i=e[t+2];if(typeof n!="function"){if(nl(n||a)===null)continue;break}var r=rn(a);r!==null&&(e.splice(t,3),t-=3,to(r,{pending:!0,data:i,method:a.method,action:n},n,i))}}))}function Bn(e){function t(z){return Rs(z,e)}Da!==null&&Rs(Da,e),Ma!==null&&Rs(Ma,e),xa!==null&&Rs(xa,e),ki.forEach(t),ji.forEach(t);for(var a=0;a<Oa.length;a++){var n=Oa[a];n.blockedOn===e&&(n.blockedOn=null)}for(;0<Oa.length&&(a=Oa[0],a.blockedOn===null);)Sp(a),a.blockedOn===null&&Oa.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(n=0;n<a.length;n+=3){var i=a[n],r=a[n+1],o=i[at]||null;if(typeof r=="function")o||wp(a);else if(o){var p=null;if(r&&r.hasAttribute("formAction")){if(i=r,o=r[at]||null)p=o.formAction;else if(nl(i)!==null)continue}else p=o.action;typeof p=="function"?a[n+1]=p:(a.splice(n,3),n-=3),wp(a)}}}function Cp(){function e(r){r.canIntercept&&r.info==="react-transition"&&r.intercept({handler:function(){return new Promise(function(o){return i=o})},focusReset:"manual",scroll:"manual"})}function t(){i!==null&&(i(),i=null),n||setTimeout(a,20)}function a(){if(!n&&!navigation.transition){var r=navigation.currentEntry;r&&r.url!=null&&navigation.navigate(r.url,{state:r.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var n=!1,i=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(a,100),function(){n=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),i!==null&&(i(),i=null)}}}function rl(e){this._internalRoot=e}Ms.prototype.render=rl.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(s(409));var a=t.current,n=_t();hp(a,n,e,t,null,null)},Ms.prototype.unmount=rl.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;hp(e.current,2,null,e,null,null),os(),t[an]=null}};function Ms(e){this._internalRoot=e}Ms.prototype.unstable_scheduleHydration=function(e){if(e){var t=Al();e={blockedOn:null,target:e,priority:t};for(var a=0;a<Oa.length&&t!==0&&t<Oa[a].priority;a++);Oa.splice(a,0,e),a===0&&Sp(e)}};var Tp=w.version;if(Tp!=="19.2.3")throw Error(s(527,Tp,"19.2.3"));G.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=T(t),e=e!==null?u(e):null,e=e===null?null:e.stateNode,e};var Wg={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xs.isDisabled&&xs.supportsFiber)try{Xn=xs.inject(Wg),dt=xs}catch{}}return Hi.createRoot=function(e,t){if(!A(e))throw Error(s(299));var a=!1,n="",i=Od,r=Ld,o=Ad;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onUncaughtError!==void 0&&(i=t.onUncaughtError),t.onCaughtError!==void 0&&(r=t.onCaughtError),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=fp(e,1,!1,null,null,a,n,null,i,r,o,Cp),e[an]=t.current,Bo(e),new rl(t)},Hi.hydrateRoot=function(e,t,a){if(!A(e))throw Error(s(299));var n=!1,i="",r=Od,o=Ld,p=Ad,z=null;return a!=null&&(a.unstable_strictMode===!0&&(n=!0),a.identifierPrefix!==void 0&&(i=a.identifierPrefix),a.onUncaughtError!==void 0&&(r=a.onUncaughtError),a.onCaughtError!==void 0&&(o=a.onCaughtError),a.onRecoverableError!==void 0&&(p=a.onRecoverableError),a.formState!==void 0&&(z=a.formState)),t=fp(e,1,!0,t,a??null,n,i,z,r,o,p,Cp),t.context=pp(null),a=t.current,n=_t(),n=Is(n),i=ma(n),i.callback=null,ga(a,i,n),a=n,t.current.lanes=a,In(t,a),Bt(t),e[an]=t.current,Bo(e),new Ms(t)},Hi.version="19.2.3",Hi}var Np;function uv(){if(Np)return ol.exports;Np=1;function y(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(y)}catch(w){console.error(w)}}return y(),ol.exports=lv(),ol.exports}var dv=uv();const fv=xh(dv);var fl={},Os={exports:{}},pl,kp;function pv(){if(kp)return pl;kp=1;var y=1e3,w=y*60,_=w*60,s=_*24,A=s*7,N=s*365.25;pl=function(u,S){S=S||{};var C=typeof u;if(C==="string"&&u.length>0)return R(u);if(C==="number"&&isFinite(u))return S.long?L(u):m(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))};function R(u){if(u=String(u),!(u.length>100)){var S=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(u);if(S){var C=parseFloat(S[1]),H=(S[2]||"ms").toLowerCase();switch(H){case"years":case"year":case"yrs":case"yr":case"y":return C*N;case"weeks":case"week":case"w":return C*A;case"days":case"day":case"d":return C*s;case"hours":case"hour":case"hrs":case"hr":case"h":return C*_;case"minutes":case"minute":case"mins":case"min":case"m":return C*w;case"seconds":case"second":case"secs":case"sec":case"s":return C*y;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return C;default:return}}}}function m(u){var S=Math.abs(u);return S>=s?Math.round(u/s)+"d":S>=_?Math.round(u/_)+"h":S>=w?Math.round(u/w)+"m":S>=y?Math.round(u/y)+"s":u+"ms"}function L(u){var S=Math.abs(u);return S>=s?T(u,S,s,"day"):S>=_?T(u,S,_,"hour"):S>=w?T(u,S,w,"minute"):S>=y?T(u,S,y,"second"):u+" ms"}function T(u,S,C,H){var k=S>=C*1.5;return Math.round(u/C)+" "+H+(k?"s":"")}return pl}var hl,jp;function hv(){if(jp)return hl;jp=1;function y(w){s.debug=s,s.default=s,s.coerce=T,s.disable=m,s.enable=N,s.enabled=L,s.humanize=pv(),s.destroy=u,Object.keys(w).forEach(S=>{s[S]=w[S]}),s.names=[],s.skips=[],s.formatters={};function _(S){let C=0;for(let H=0;H<S.length;H++)C=(C<<5)-C+S.charCodeAt(H),C|=0;return s.colors[Math.abs(C)%s.colors.length]}s.selectColor=_;function s(S){let C,H=null,k,c;function l(...d){if(!l.enabled)return;const g=l,x=Number(new Date),E=x-(C||x);g.diff=E,g.prev=C,g.curr=x,C=x,d[0]=s.coerce(d[0]),typeof d[0]!="string"&&d.unshift("%O");let M=0;d[0]=d[0].replace(/%([a-zA-Z%])/g,(f,v)=>{if(f==="%%")return"%";M++;const O=s.formatters[v];if(typeof O=="function"){const q=d[M];f=O.call(g,q),d.splice(M,1),M--}return f}),s.formatArgs.call(g,d),(g.log||s.log).apply(g,d)}return l.namespace=S,l.useColors=s.useColors(),l.color=s.selectColor(S),l.extend=A,l.destroy=s.destroy,Object.defineProperty(l,"enabled",{enumerable:!0,configurable:!1,get:()=>H!==null?H:(k!==s.namespaces&&(k=s.namespaces,c=s.enabled(S)),c),set:d=>{H=d}}),typeof s.init=="function"&&s.init(l),l}function A(S,C){const H=s(this.namespace+(typeof C>"u"?":":C)+S);return H.log=this.log,H}function N(S){s.save(S),s.namespaces=S,s.names=[],s.skips=[];const C=(typeof S=="string"?S:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const H of C)H[0]==="-"?s.skips.push(H.slice(1)):s.names.push(H)}function R(S,C){let H=0,k=0,c=-1,l=0;for(;H<S.length;)if(k<C.length&&(C[k]===S[H]||C[k]==="*"))C[k]==="*"?(c=k,l=H,k++):(H++,k++);else if(c!==-1)k=c+1,l++,H=l;else return!1;for(;k<C.length&&C[k]==="*";)k++;return k===C.length}function m(){const S=[...s.names,...s.skips.map(C=>"-"+C)].join(",");return s.enable(""),S}function L(S){for(const C of s.skips)if(R(S,C))return!1;for(const C of s.names)if(R(S,C))return!0;return!1}function T(S){return S instanceof Error?S.stack||S.message:S}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return s.enable(s.load()),s}return hl=y,hl}var Up;function Bs(){return Up||(Up=1,(function(y,w){var _={};w.formatArgs=A,w.save=N,w.load=R,w.useColors=s,w.storage=m(),w.destroy=(()=>{let T=!1;return()=>{T||(T=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),w.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function s(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let T;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(T=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(T[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function A(T){if(T[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+T[0]+(this.useColors?"%c ":" ")+"+"+y.exports.humanize(this.diff),!this.useColors)return;const u="color: "+this.color;T.splice(1,0,u,"color: inherit");let S=0,C=0;T[0].replace(/%[a-zA-Z%]/g,H=>{H!=="%%"&&(S++,H==="%c"&&(C=S))}),T.splice(C,0,u)}w.log=console.debug||console.log||(()=>{});function N(T){try{T?w.storage.setItem("debug",T):w.storage.removeItem("debug")}catch{}}function R(){let T;try{T=w.storage.getItem("debug")||w.storage.getItem("DEBUG")}catch{}return!T&&typeof process<"u"&&"env"in process&&(T=_.DEBUG),T}function m(){try{return localStorage}catch{}}y.exports=hv()(w);const{formatters:L}=y.exports;L.j=function(T){try{return JSON.stringify(T)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}}})(Os,Os.exports)),Os.exports}var ml={},qp;function mv(){return qp||(qp=1,Object.defineProperty(ml,"__esModule",{value:!0})),ml}var Wa={},Bi={},Hp;function lt(){if(Hp)return Bi;Hp=1,Object.defineProperty(Bi,"__esModule",{value:!0}),Bi.Logger=void 0;const y=Bs(),w="mediasoup-client";class _{_debug;_warn;_error;constructor(A){A?(this._debug=(0,y.default)(`${w}:${A}`),this._warn=(0,y.default)(`${w}:WARN:${A}`),this._error=(0,y.default)(`${w}:ERROR:${A}`)):(this._debug=(0,y.default)(w),this._warn=(0,y.default)(`${w}:WARN`),this._error=(0,y.default)(`${w}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}return Bi.Logger=_,Bi}var Gi={},Ls={exports:{}},Bp;function gv(){if(Bp)return Ls.exports;Bp=1;var y=typeof Reflect=="object"?Reflect:null,w=y&&typeof y.apply=="function"?y.apply:function(M,b,f){return Function.prototype.apply.call(M,b,f)},_;y&&typeof y.ownKeys=="function"?_=y.ownKeys:Object.getOwnPropertySymbols?_=function(M){return Object.getOwnPropertyNames(M).concat(Object.getOwnPropertySymbols(M))}:_=function(M){return Object.getOwnPropertyNames(M)};function s(E){console&&console.warn&&console.warn(E)}var A=Number.isNaN||function(M){return M!==M};function N(){N.init.call(this)}Ls.exports=N,Ls.exports.once=d,N.EventEmitter=N,N.prototype._events=void 0,N.prototype._eventsCount=0,N.prototype._maxListeners=void 0;var R=10;function m(E){if(typeof E!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof E)}Object.defineProperty(N,"defaultMaxListeners",{enumerable:!0,get:function(){return R},set:function(E){if(typeof E!="number"||E<0||A(E))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+E+".");R=E}}),N.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},N.prototype.setMaxListeners=function(M){if(typeof M!="number"||M<0||A(M))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+M+".");return this._maxListeners=M,this};function L(E){return E._maxListeners===void 0?N.defaultMaxListeners:E._maxListeners}N.prototype.getMaxListeners=function(){return L(this)},N.prototype.emit=function(M){for(var b=[],f=1;f<arguments.length;f++)b.push(arguments[f]);var v=M==="error",O=this._events;if(O!==void 0)v=v&&O.error===void 0;else if(!v)return!1;if(v){var q;if(b.length>0&&(q=b[0]),q instanceof Error)throw q;var W=new Error("Unhandled error."+(q?" ("+q.message+")":""));throw W.context=q,W}var ee=O[M];if(ee===void 0)return!1;if(typeof ee=="function")w(ee,this,b);else for(var h=ee.length,Q=k(ee,h),f=0;f<h;++f)w(Q[f],this,b);return!0};function T(E,M,b,f){var v,O,q;if(m(b),O=E._events,O===void 0?(O=E._events=Object.create(null),E._eventsCount=0):(O.newListener!==void 0&&(E.emit("newListener",M,b.listener?b.listener:b),O=E._events),q=O[M]),q===void 0)q=O[M]=b,++E._eventsCount;else if(typeof q=="function"?q=O[M]=f?[b,q]:[q,b]:f?q.unshift(b):q.push(b),v=L(E),v>0&&q.length>v&&!q.warned){q.warned=!0;var W=new Error("Possible EventEmitter memory leak detected. "+q.length+" "+String(M)+" listeners added. Use emitter.setMaxListeners() to increase limit");W.name="MaxListenersExceededWarning",W.emitter=E,W.type=M,W.count=q.length,s(W)}return E}N.prototype.addListener=function(M,b){return T(this,M,b,!1)},N.prototype.on=N.prototype.addListener,N.prototype.prependListener=function(M,b){return T(this,M,b,!0)};function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function S(E,M,b){var f={fired:!1,wrapFn:void 0,target:E,type:M,listener:b},v=u.bind(f);return v.listener=b,f.wrapFn=v,v}N.prototype.once=function(M,b){return m(b),this.on(M,S(this,M,b)),this},N.prototype.prependOnceListener=function(M,b){return m(b),this.prependListener(M,S(this,M,b)),this},N.prototype.removeListener=function(M,b){var f,v,O,q,W;if(m(b),v=this._events,v===void 0)return this;if(f=v[M],f===void 0)return this;if(f===b||f.listener===b)--this._eventsCount===0?this._events=Object.create(null):(delete v[M],v.removeListener&&this.emit("removeListener",M,f.listener||b));else if(typeof f!="function"){for(O=-1,q=f.length-1;q>=0;q--)if(f[q]===b||f[q].listener===b){W=f[q].listener,O=q;break}if(O<0)return this;O===0?f.shift():c(f,O),f.length===1&&(v[M]=f[0]),v.removeListener!==void 0&&this.emit("removeListener",M,W||b)}return this},N.prototype.off=N.prototype.removeListener,N.prototype.removeAllListeners=function(M){var b,f,v;if(f=this._events,f===void 0)return this;if(f.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):f[M]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete f[M]),this;if(arguments.length===0){var O=Object.keys(f),q;for(v=0;v<O.length;++v)q=O[v],q!=="removeListener"&&this.removeAllListeners(q);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(b=f[M],typeof b=="function")this.removeListener(M,b);else if(b!==void 0)for(v=b.length-1;v>=0;v--)this.removeListener(M,b[v]);return this};function C(E,M,b){var f=E._events;if(f===void 0)return[];var v=f[M];return v===void 0?[]:typeof v=="function"?b?[v.listener||v]:[v]:b?l(v):k(v,v.length)}N.prototype.listeners=function(M){return C(this,M,!0)},N.prototype.rawListeners=function(M){return C(this,M,!1)},N.listenerCount=function(E,M){return typeof E.listenerCount=="function"?E.listenerCount(M):H.call(E,M)},N.prototype.listenerCount=H;function H(E){var M=this._events;if(M!==void 0){var b=M[E];if(typeof b=="function")return 1;if(b!==void 0)return b.length}return 0}N.prototype.eventNames=function(){return this._eventsCount>0?_(this._events):[]};function k(E,M){for(var b=new Array(M),f=0;f<M;++f)b[f]=E[f];return b}function c(E,M){for(;M+1<E.length;M++)E[M]=E[M+1];E.pop()}function l(E){for(var M=new Array(E.length),b=0;b<M.length;++b)M[b]=E[b].listener||E[b];return M}function d(E,M){return new Promise(function(b,f){function v(q){E.removeListener(M,O),f(q)}function O(){typeof E.removeListener=="function"&&E.removeListener("error",v),b([].slice.call(arguments))}x(E,M,O,{once:!0}),M!=="error"&&g(E,v,{once:!0})})}function g(E,M,b){typeof E.on=="function"&&x(E,"error",M,b)}function x(E,M,b,f){if(typeof E.on=="function")f.once?E.once(M,b):E.on(M,b);else if(typeof E.addEventListener=="function")E.addEventListener(M,function v(O){f.once&&E.removeEventListener(M,v),b(O)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof E)}return Ls.exports}var Gp;function St(){if(Gp)return Gi;Gp=1,Object.defineProperty(Gi,"__esModule",{value:!0}),Gi.EnhancedEventEmitter=void 0;const y=gv(),w=lt(),_=new w.Logger("EnhancedEventEmitter");class s extends y.EventEmitter{constructor(){super(),this.setMaxListeners(1/0)}close(){super.removeAllListeners()}emit(N,...R){return super.emit(N,...R)}safeEmit(N,...R){try{return super.emit(N,...R)}catch(m){_.error("safeEmit() | event listener threw an error [eventName:%s]:%o",N,m);try{super.emit("listenererror",N,m)}catch{}return!!super.listenerCount(N)}}on(N,R){return super.on(N,R),this}off(N,R){return super.off(N,R),this}addListener(N,R){return super.on(N,R),this}prependListener(N,R){return super.prependListener(N,R),this}once(N,R){return super.once(N,R),this}prependOnceListener(N,R){return super.prependOnceListener(N,R),this}removeListener(N,R){return super.off(N,R),this}removeAllListeners(N){return super.removeAllListeners(N),this}listenerCount(N){return super.listenerCount(N)}listeners(N){return super.listeners(N)}rawListeners(N){return super.rawListeners(N)}}return Gi.EnhancedEventEmitter=s,Gi}var en={},Qp;function jt(){if(Qp)return en;Qp=1,Object.defineProperty(en,"__esModule",{value:!0}),en.InvalidStateError=en.UnsupportedError=void 0;class y extends Error{constructor(s){super(s),this.name="UnsupportedError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,y):this.stack=new Error(s).stack}}en.UnsupportedError=y;class w extends Error{constructor(s){super(s),this.name="InvalidStateError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,w):this.stack=new Error(s).stack}}return en.InvalidStateError=w,en}var Gn={},Yp;function Yn(){if(Yp)return Gn;Yp=1,Object.defineProperty(Gn,"__esModule",{value:!0}),Gn.clone=y,Gn.generateRandomNumber=w,Gn.deepFreeze=_;function y(s){if(s!==void 0)return Number.isNaN(s)?NaN:typeof structuredClone=="function"?structuredClone(s):JSON.parse(JSON.stringify(s))}function w(){return Math.round(Math.random()*1e7)}function _(s){const A=Reflect.ownKeys(s);for(const N of A){const R=s[N];(R&&typeof R=="object"||typeof R=="function")&&_(R)}return Object.freeze(s)}return Gn}var tt={},Xe={},Qi={},Pp;function vv(){if(Pp)return Qi;Pp=1,Object.defineProperty(Qi,"__esModule",{value:!0}),Qi.Logger=void 0;const y=Bs(),w="h264-profile-level-id";class _{_debug;_warn;_error;constructor(A){A?(this._debug=(0,y.default)(`${w}:${A}`),this._warn=(0,y.default)(`${w}:WARN:${A}`),this._error=(0,y.default)(`${w}:ERROR:${A}`)):(this._debug=(0,y.default)(w),this._warn=(0,y.default)(`${w}:WARN`),this._error=(0,y.default)(`${w}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}return Qi.Logger=_,Qi}var Vp;function yv(){if(Vp)return Xe;Vp=1,Object.defineProperty(Xe,"__esModule",{value:!0}),Xe.ProfileLevelId=Xe.Level=Xe.Profile=void 0,Xe.parseProfileLevelId=u,Xe.profileLevelIdToString=S,Xe.profileToString=C,Xe.levelToString=H,Xe.parseSdpProfileLevelId=k,Xe.isSameProfile=c,Xe.isSameProfileAndLevel=l,Xe.generateProfileLevelIdStringForAnswer=d,Xe.supportedLevel=g;const y=vv(),w=new y.Logger;var _;(function(f){f[f.ConstrainedBaseline=1]="ConstrainedBaseline",f[f.Baseline=2]="Baseline",f[f.Main=3]="Main",f[f.ConstrainedHigh=4]="ConstrainedHigh",f[f.High=5]="High",f[f.PredictiveHigh444=6]="PredictiveHigh444"})(_||(Xe.Profile=_={}));var s;(function(f){f[f.L1_b=0]="L1_b",f[f.L1=10]="L1",f[f.L1_1=11]="L1_1",f[f.L1_2=12]="L1_2",f[f.L1_3=13]="L1_3",f[f.L2=20]="L2",f[f.L2_1=21]="L2_1",f[f.L2_2=22]="L2_2",f[f.L3=30]="L3",f[f.L3_1=31]="L3_1",f[f.L3_2=32]="L3_2",f[f.L4=40]="L4",f[f.L4_1=41]="L4_1",f[f.L4_2=42]="L4_2",f[f.L5=50]="L5",f[f.L5_1=51]="L5_1",f[f.L5_2=52]="L5_2"})(s||(Xe.Level=s={}));class A{profile;level;constructor(v,O){this.profile=v,this.level=O}}Xe.ProfileLevelId=A;const N=new A(_.ConstrainedBaseline,s.L3_1);class R{mask;masked_value;constructor(v){this.mask=~x("x",v),this.masked_value=x("1",v)}isMatch(v){return this.masked_value===(v&this.mask)}}class m{profile_idc;profile_iop;profile;constructor(v,O,q){this.profile_idc=v,this.profile_iop=O,this.profile=q}}const L=[new m(66,new R("x1xx0000"),_.ConstrainedBaseline),new m(77,new R("1xxx0000"),_.ConstrainedBaseline),new m(88,new R("11xx0000"),_.ConstrainedBaseline),new m(66,new R("x0xx0000"),_.Baseline),new m(88,new R("10xx0000"),_.Baseline),new m(77,new R("0x0x0000"),_.Main),new m(100,new R("00000000"),_.High),new m(100,new R("00001100"),_.ConstrainedHigh),new m(244,new R("00000000"),_.PredictiveHigh444)],T=[{max_macroblocks_per_second:1485,max_macroblock_frame_size:99,level:s.L1},{max_macroblocks_per_second:1485,max_macroblock_frame_size:99,level:s.L1_b},{max_macroblocks_per_second:3e3,max_macroblock_frame_size:396,level:s.L1_1},{max_macroblocks_per_second:6e3,max_macroblock_frame_size:396,level:s.L1_2},{max_macroblocks_per_second:11880,max_macroblock_frame_size:396,level:s.L1_3},{max_macroblocks_per_second:11880,max_macroblock_frame_size:396,level:s.L2},{max_macroblocks_per_second:19800,max_macroblock_frame_size:792,level:s.L2_1},{max_macroblocks_per_second:20250,max_macroblock_frame_size:1620,level:s.L2_2},{max_macroblocks_per_second:40500,max_macroblock_frame_size:1620,level:s.L3},{max_macroblocks_per_second:108e3,max_macroblock_frame_size:3600,level:s.L3_1},{max_macroblocks_per_second:216e3,max_macroblock_frame_size:5120,level:s.L3_2},{max_macroblocks_per_second:245760,max_macroblock_frame_size:8192,level:s.L4},{max_macroblocks_per_second:245760,max_macroblock_frame_size:8192,level:s.L4_1},{max_macroblocks_per_second:522240,max_macroblock_frame_size:8704,level:s.L4_2},{max_macroblocks_per_second:589824,max_macroblock_frame_size:22080,level:s.L5},{max_macroblocks_per_second:983040,max_macroblock_frame_size:36864,level:s.L5_1},{max_macroblocks_per_second:2073600,max_macroblock_frame_size:36864,level:s.L5_2}];function u(f){if(typeof f!="string"||f.length!==6)return;const O=parseInt(f,16);if(O===0)return;const q=O&255,W=O>>8&255,ee=O>>16&255;let h;switch(q){case s.L1_1:{h=(W&16)!==0?s.L1_b:s.L1_1;break}case s.L1:case s.L1_2:case s.L1_3:case s.L2:case s.L2_1:case s.L2_2:case s.L3:case s.L3_1:case s.L3_2:case s.L4:case s.L4_1:case s.L4_2:case s.L5:case s.L5_1:case s.L5_2:{h=q;break}default:{w.warn(`parseProfileLevelId() | unrecognized level_idc [str:${f}, level_idc:${q}]`);return}}for(const Q of L)if(ee===Q.profile_idc&&Q.profile_iop.isMatch(W))return w.debug(`parseProfileLevelId() | result [str:${f}, profile:${Q.profile}, level:${h}]`),new A(Q.profile,h);w.warn(`parseProfileLevelId() | unrecognized profile_idc/profile_iop combination [str:${f}, profile_idc:${ee}, profile_iop:${W}]`)}function S(f){if(f.level==s.L1_b)switch(f.profile){case _.ConstrainedBaseline:return"42f00b";case _.Baseline:return"42100b";case _.Main:return"4d100b";default:{w.warn(`profileLevelIdToString() | Level 1_b not is allowed for profile ${f.profile}`);return}}let v;switch(f.profile){case _.ConstrainedBaseline:{v="42e0";break}case _.Baseline:{v="4200";break}case _.Main:{v="4d00";break}case _.ConstrainedHigh:{v="640c";break}case _.High:{v="6400";break}case _.PredictiveHigh444:{v="f400";break}default:{w.warn(`profileLevelIdToString() | unrecognized profile ${f.profile}`);return}}let O=f.level.toString(16);return O.length===1&&(O=`0${O}`),`${v}${O}`}function C(f){switch(f){case _.ConstrainedBaseline:return"ConstrainedBaseline";case _.Baseline:return"Baseline";case _.Main:return"Main";case _.ConstrainedHigh:return"ConstrainedHigh";case _.High:return"High";case _.PredictiveHigh444:return"PredictiveHigh444";default:{w.warn(`profileToString() | unrecognized profile ${f}`);return}}}function H(f){switch(f){case s.L1_b:return"1b";case s.L1:return"1";case s.L1_1:return"1.1";case s.L1_2:return"1.2";case s.L1_3:return"1.3";case s.L2:return"2";case s.L2_1:return"2.1";case s.L2_2:return"2.2";case s.L3:return"3";case s.L3_1:return"3.1";case s.L3_2:return"3.2";case s.L4:return"4";case s.L4_1:return"4.1";case s.L4_2:return"4.2";case s.L5:return"5";case s.L5_1:return"5.1";case s.L5_2:return"5.2";default:{w.warn(`levelToString() | unrecognized level ${f}`);return}}}function k(f={}){const v=f["profile-level-id"];return v?u(v):N}function c(f={},v={}){const O=k(f),q=k(v);return!!(O&&q&&O.profile===q.profile)}function l(f={},v={}){const O=k(f),q=k(v);return!!(O&&q&&O.profile===q.profile&&O.level==q.level)}function d(f={},v={}){if(!f["profile-level-id"]&&!v["profile-level-id"]){w.warn("generateProfileLevelIdStringForAnswer() | profile-level-id missing in local and remote params");return}const O=k(f),q=k(v);if(!O)throw new TypeError("invalid local_profile_level_id");if(!q)throw new TypeError("invalid remote_profile_level_id");if(O.profile!==q.profile)throw new TypeError("H264 Profile mismatch");const W=b(f)&&b(v),ee=O.level,h=q.level,Q=M(ee,h),I=W?ee:Q;return w.debug(`generateProfileLevelIdStringForAnswer() | result [profile:${O.profile}, level:${I}]`),S(new A(O.profile,I))}function g(f,v){for(let q=T.length-1;q>=0;--q){const W=T[q];if(W.max_macroblock_frame_size*256<=f&&W.max_macroblocks_per_second<=v*W.max_macroblock_frame_size)return w.debug(`supportedLevel() | result [max_frame_pixel_count:${f}, max_fps:${v}, level:${W.level}]`),W.level}w.warn(`supportedLevel() | no level supported [max_frame_pixel_count:${f}, max_fps:${v}]`)}function x(f,v){return+(v[0]===f)<<7|+(v[1]===f)<<6|+(v[2]===f)<<5|+(v[3]===f)<<4|+(v[4]===f)<<3|+(v[5]===f)<<2|+(v[6]===f)<<1|+(v[7]===f)<<0}function E(f,v){return f===s.L1_b?v!==s.L1&&v!==s.L1_b:v===s.L1_b?f!==s.L1:f<v}function M(f,v){return E(f,v)?f:v}function b(f={}){const v=f["level-asymmetry-allowed"];return v===!0||v===1||v==="1"}return Xe}var Xp;function sa(){if(Xp)return tt;Xp=1,Object.defineProperty(tt,"__esModule",{value:!0}),tt.validateAndNormalizeRtpCapabilities=N,tt.validateAndNormalizeRtpParameters=R,tt.validateAndNormalizeSctpStreamParameters=m,tt.validateSctpCapabilities=L,tt.getExtendedRtpCapabilities=T,tt.getRecvRtpCapabilities=u,tt.getSendingRtpParameters=S,tt.getSendingRemoteRtpParameters=C,tt.reduceCodecs=H,tt.generateProbatorRtpParameters=k,tt.canSend=c,tt.canReceive=l;const y=yv(),w=Yn(),_="probator",s=1234,A=127;function N(h){if(typeof h!="object")throw new TypeError("caps is not an object");if(h.codecs&&!Array.isArray(h.codecs))throw new TypeError("caps.codecs is not an array");h.codecs||(h.codecs=[]);for(const Q of h.codecs)d(Q);if(h.headerExtensions&&!Array.isArray(h.headerExtensions))throw new TypeError("caps.headerExtensions is not an array");h.headerExtensions||(h.headerExtensions=[]);for(const Q of h.headerExtensions)x(Q)}function R(h){if(typeof h!="object")throw new TypeError("params is not an object");if(h.mid&&typeof h.mid!="string")throw new TypeError("params.mid is not a string");if(!Array.isArray(h.codecs))throw new TypeError("missing params.codecs");for(const Q of h.codecs)E(Q);if(h.headerExtensions&&!Array.isArray(h.headerExtensions))throw new TypeError("params.headerExtensions is not an array");h.headerExtensions||(h.headerExtensions=[]);for(const Q of h.headerExtensions)M(Q);if(h.encodings&&!Array.isArray(h.encodings))throw new TypeError("params.encodings is not an array");h.encodings||(h.encodings=[]);for(const Q of h.encodings)b(Q);if(h.rtcp&&typeof h.rtcp!="object")throw new TypeError("params.rtcp is not an object");h.rtcp||(h.rtcp={}),f(h.rtcp)}function m(h){if(typeof h!="object")throw new TypeError("params is not an object");if(typeof h.streamId!="number")throw new TypeError("missing params.streamId");let Q=!1;if(typeof h.ordered=="boolean"?Q=!0:h.ordered=!0,h.maxPacketLifeTime&&typeof h.maxPacketLifeTime!="number")throw new TypeError("invalid params.maxPacketLifeTime");if(h.maxRetransmits&&typeof h.maxRetransmits!="number")throw new TypeError("invalid params.maxRetransmits");if(h.maxPacketLifeTime&&h.maxRetransmits)throw new TypeError("cannot provide both maxPacketLifeTime and maxRetransmits");if(Q&&h.ordered&&(h.maxPacketLifeTime||h.maxRetransmits))throw new TypeError("cannot be ordered with maxPacketLifeTime or maxRetransmits");if(!Q&&(h.maxPacketLifeTime||h.maxRetransmits)&&(h.ordered=!1),h.label&&typeof h.label!="string")throw new TypeError("invalid params.label");if(h.protocol&&typeof h.protocol!="string")throw new TypeError("invalid params.protocol")}function L(h){if(typeof h!="object")throw new TypeError("caps is not an object");if(!h.numStreams||typeof h.numStreams!="object")throw new TypeError("missing caps.numStreams");v(h.numStreams)}function T(h,Q,I){const D={codecs:[],headerExtensions:[]};if(I)for(const G of h.codecs??[]){if(O(G))continue;const K=(Q.codecs??[]).find(ne=>q(ne,G,{strict:!0,modify:!0}));if(!K)continue;const te={kind:G.kind,mimeType:G.mimeType,clockRate:G.clockRate,channels:G.channels,localPayloadType:G.preferredPayloadType,localRtxPayloadType:void 0,remotePayloadType:K.preferredPayloadType,remoteRtxPayloadType:void 0,localParameters:G.parameters??{},remoteParameters:K.parameters??{},rtcpFeedback:ee(G,K)};D.codecs.push(te)}else for(const G of Q.codecs??[]){if(O(G))continue;const K=(h.codecs??[]).find(ne=>q(ne,G,{strict:!0,modify:!0}));if(!K)continue;const te={kind:K.kind,mimeType:K.mimeType,clockRate:K.clockRate,channels:K.channels,localPayloadType:K.preferredPayloadType,localRtxPayloadType:void 0,remotePayloadType:G.preferredPayloadType,remoteRtxPayloadType:void 0,localParameters:K.parameters??{},remoteParameters:G.parameters??{},rtcpFeedback:ee(K,G)};D.codecs.push(te)}for(const G of D.codecs){const K=h.codecs.find(ne=>O(ne)&&ne.parameters?.apt===G.localPayloadType),te=Q.codecs.find(ne=>O(ne)&&ne.parameters?.apt===G.remotePayloadType);K&&te&&(G.localRtxPayloadType=K.preferredPayloadType,G.remoteRtxPayloadType=te.preferredPayloadType)}for(const G of Q.headerExtensions){const K=h.headerExtensions.find(ne=>W(ne,G));if(!K)continue;const te={kind:G.kind,uri:G.uri,sendId:K.preferredId,recvId:G.preferredId,encrypt:K.preferredEncrypt??!1,direction:"sendrecv"};switch(G.direction){case"sendrecv":{te.direction="sendrecv";break}case"recvonly":{te.direction="sendonly";break}case"sendonly":{te.direction="recvonly";break}case"inactive":{te.direction="inactive";break}}D.headerExtensions.push(te)}return D}function u(h){const Q={codecs:[],headerExtensions:[]};for(const I of h.codecs){const D={kind:I.kind,mimeType:I.mimeType,preferredPayloadType:I.remotePayloadType,clockRate:I.clockRate,channels:I.channels,parameters:I.localParameters,rtcpFeedback:I.rtcpFeedback};if(Q.codecs.push(D),!I.remoteRtxPayloadType)continue;const G={kind:I.kind,mimeType:`${I.kind}/rtx`,preferredPayloadType:I.remoteRtxPayloadType,clockRate:I.clockRate,parameters:{apt:I.remotePayloadType},rtcpFeedback:[]};Q.codecs.push(G)}for(const I of h.headerExtensions){if(I.direction!=="sendrecv"&&I.direction!=="recvonly")continue;const D={kind:I.kind,uri:I.uri,preferredId:I.recvId,preferredEncrypt:I.encrypt??!1,direction:I.direction};Q.headerExtensions.push(D)}return Q}function S(h,Q){const I={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}};for(const D of Q.codecs){if(D.kind!==h)continue;const G={mimeType:D.mimeType,payloadType:D.localPayloadType,clockRate:D.clockRate,channels:D.channels,parameters:D.localParameters,rtcpFeedback:D.rtcpFeedback};if(I.codecs.push(G),D.localRtxPayloadType){const K={mimeType:`${D.kind}/rtx`,payloadType:D.localRtxPayloadType,clockRate:D.clockRate,parameters:{apt:D.localPayloadType},rtcpFeedback:[]};I.codecs.push(K)}}for(const D of Q.headerExtensions){if(D.kind&&D.kind!==h||D.direction!=="sendrecv"&&D.direction!=="sendonly")continue;const G={uri:D.uri,id:D.sendId,encrypt:D.encrypt,parameters:{}};I.headerExtensions.push(G)}return I}function C(h,Q){const I={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}};for(const D of Q.codecs){if(D.kind!==h)continue;const G={mimeType:D.mimeType,payloadType:D.localPayloadType,clockRate:D.clockRate,channels:D.channels,parameters:D.remoteParameters,rtcpFeedback:D.rtcpFeedback};if(I.codecs.push(G),D.localRtxPayloadType){const K={mimeType:`${D.kind}/rtx`,payloadType:D.localRtxPayloadType,clockRate:D.clockRate,parameters:{apt:D.localPayloadType},rtcpFeedback:[]};I.codecs.push(K)}}for(const D of Q.headerExtensions){if(D.kind&&D.kind!==h||D.direction!=="sendrecv"&&D.direction!=="sendonly")continue;const G={uri:D.uri,id:D.sendId,encrypt:D.encrypt,parameters:{}};I.headerExtensions.push(G)}if(I.headerExtensions.some(D=>D.uri==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"))for(const D of I.codecs)D.rtcpFeedback=(D.rtcpFeedback??[]).filter(G=>G.type!=="goog-remb");else if(I.headerExtensions.some(D=>D.uri==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"))for(const D of I.codecs)D.rtcpFeedback=(D.rtcpFeedback??[]).filter(G=>G.type!=="transport-cc");else for(const D of I.codecs)D.rtcpFeedback=(D.rtcpFeedback??[]).filter(G=>G.type!=="transport-cc"&&G.type!=="goog-remb");return I}function H(h,Q){const I=[];if(!Q)I.push(h[0]),O(h[1])&&I.push(h[1]);else{for(let D=0;D<h.length;++D)if(q(h[D],Q,{strict:!0})){I.push(h[D]),O(h[D+1])&&I.push(h[D+1]);break}if(I.length===0)throw new TypeError("no matching codec found")}return I}function k(h){h=w.clone(h),R(h);const Q={mid:_,codecs:[],headerExtensions:[],encodings:[{ssrc:s}],rtcp:{cname:"probator"}};return Q.codecs.push(h.codecs[0]),Q.codecs[0].payloadType=A,Q.headerExtensions=h.headerExtensions,Q}function c(h,Q){return(Q.codecs??[]).some(I=>I.kind===h)}function l(h,Q){if(R(h),h.codecs.length===0)return!1;const I=h.codecs[0];return(Q.codecs??[]).some(D=>D.preferredPayloadType===I.payloadType)}function d(h){const Q=new RegExp("^(audio|video)/(.+)","i");if(typeof h!="object")throw new TypeError("codec is not an object");if(!h.mimeType||typeof h.mimeType!="string")throw new TypeError("missing codec.mimeType");const I=Q.exec(h.mimeType);if(!I)throw new TypeError("invalid codec.mimeType");if(h.kind=I[1].toLowerCase(),typeof h.preferredPayloadType!="number")throw new TypeError("missing codec.preferredPayloadType");if(typeof h.clockRate!="number")throw new TypeError("missing codec.clockRate");h.kind==="audio"?typeof h.channels!="number"&&(h.channels=1):delete h.channels,(!h.parameters||typeof h.parameters!="object")&&(h.parameters={});for(const D of Object.keys(h.parameters)){let G=h.parameters[D];if(G===void 0&&(h.parameters[D]="",G=""),typeof G!="string"&&typeof G!="number")throw new TypeError(`invalid codec parameter [key:${D}s, value:${G}]`);if(D==="apt"&&typeof G!="number")throw new TypeError("invalid codec apt parameter")}(!h.rtcpFeedback||!Array.isArray(h.rtcpFeedback))&&(h.rtcpFeedback=[]);for(const D of h.rtcpFeedback)g(D)}function g(h){if(typeof h!="object")throw new TypeError("fb is not an object");if(!h.type||typeof h.type!="string")throw new TypeError("missing fb.type");(!h.parameter||typeof h.parameter!="string")&&(h.parameter="")}function x(h){if(typeof h!="object")throw new TypeError("ext is not an object");if(h.kind!=="audio"&&h.kind!=="video")throw new TypeError("invalid ext.kind");if(!h.uri||typeof h.uri!="string")throw new TypeError("missing ext.uri");if(typeof h.preferredId!="number")throw new TypeError("missing ext.preferredId");if(h.preferredEncrypt&&typeof h.preferredEncrypt!="boolean")throw new TypeError("invalid ext.preferredEncrypt");if(h.preferredEncrypt||(h.preferredEncrypt=!1),h.direction&&typeof h.direction!="string")throw new TypeError("invalid ext.direction");h.direction||(h.direction="sendrecv")}function E(h){const Q=new RegExp("^(audio|video)/(.+)","i");if(typeof h!="object")throw new TypeError("codec is not an object");if(!h.mimeType||typeof h.mimeType!="string")throw new TypeError("missing codec.mimeType");const I=Q.exec(h.mimeType);if(!I)throw new TypeError("invalid codec.mimeType");if(typeof h.payloadType!="number")throw new TypeError("missing codec.payloadType");if(typeof h.clockRate!="number")throw new TypeError("missing codec.clockRate");I[1].toLowerCase()==="audio"?typeof h.channels!="number"&&(h.channels=1):delete h.channels,(!h.parameters||typeof h.parameters!="object")&&(h.parameters={});for(const G of Object.keys(h.parameters)){let K=h.parameters[G];if(K===void 0&&(h.parameters[G]="",K=""),typeof K!="string"&&typeof K!="number")throw new TypeError(`invalid codec parameter [key:${G}s, value:${K}]`);if(G==="apt"&&typeof K!="number")throw new TypeError("invalid codec apt parameter")}(!h.rtcpFeedback||!Array.isArray(h.rtcpFeedback))&&(h.rtcpFeedback=[]);for(const G of h.rtcpFeedback)g(G)}function M(h){if(typeof h!="object")throw new TypeError("ext is not an object");if(!h.uri||typeof h.uri!="string")throw new TypeError("missing ext.uri");if(typeof h.id!="number")throw new TypeError("missing ext.id");if(h.encrypt&&typeof h.encrypt!="boolean")throw new TypeError("invalid ext.encrypt");h.encrypt||(h.encrypt=!1),(!h.parameters||typeof h.parameters!="object")&&(h.parameters={});for(const Q of Object.keys(h.parameters)){let I=h.parameters[Q];if(I===void 0&&(h.parameters[Q]="",I=""),typeof I!="string"&&typeof I!="number")throw new TypeError("invalid header extension parameter")}}function b(h){if(typeof h!="object")throw new TypeError("encoding is not an object");if(h.ssrc&&typeof h.ssrc!="number")throw new TypeError("invalid encoding.ssrc");if(h.rid&&typeof h.rid!="string")throw new TypeError("invalid encoding.rid");if(h.rtx&&typeof h.rtx!="object")throw new TypeError("invalid encoding.rtx");if(h.rtx&&typeof h.rtx.ssrc!="number")throw new TypeError("missing encoding.rtx.ssrc");if((!h.dtx||typeof h.dtx!="boolean")&&(h.dtx=!1),h.scalabilityMode&&typeof h.scalabilityMode!="string")throw new TypeError("invalid encoding.scalabilityMode")}function f(h){if(typeof h!="object")throw new TypeError("rtcp is not an object");if(h.cname&&typeof h.cname!="string")throw new TypeError("invalid rtcp.cname");(!h.reducedSize||typeof h.reducedSize!="boolean")&&(h.reducedSize=!0)}function v(h){if(typeof h!="object")throw new TypeError("numStreams is not an object");if(typeof h.OS!="number")throw new TypeError("missing numStreams.OS");if(typeof h.MIS!="number")throw new TypeError("missing numStreams.MIS")}function O(h){return h?/.+\/rtx$/i.test(h.mimeType):!1}function q(h,Q,{strict:I=!1,modify:D=!1}={}){const G=h.mimeType.toLowerCase(),K=Q.mimeType.toLowerCase();if(G!==K||h.clockRate!==Q.clockRate||h.channels!==Q.channels)return!1;switch(G){case"video/h264":{if(I){const te=h.parameters["packetization-mode"]??0,ne=Q.parameters["packetization-mode"]??0;if(te!==ne||!y.isSameProfile(h.parameters,Q.parameters))return!1;let U;try{U=y.generateProfileLevelIdStringForAnswer(h.parameters,Q.parameters)}catch{return!1}D&&(U?(h.parameters["profile-level-id"]=U,Q.parameters["profile-level-id"]=U):(delete h.parameters["profile-level-id"],delete Q.parameters["profile-level-id"]))}break}case"video/vp9":{if(I){const te=h.parameters["profile-id"]??0,ne=Q.parameters["profile-id"]??0;if(te!==ne)return!1}break}}return!0}function W(h,Q){return!(h.kind&&Q.kind&&h.kind!==Q.kind||h.uri!==Q.uri)}function ee(h,Q){const I=[];for(const D of h.rtcpFeedback??[]){const G=(Q.rtcpFeedback??[]).find(K=>K.type===D.type&&(K.parameter===D.parameter||!K.parameter&&!D.parameter));G&&I.push(G)}return I}return tt}var Yi={},gl={},Pi={},Vi={},Zp;function _v(){if(Zp)return Vi;Zp=1,Object.defineProperty(Vi,"__esModule",{value:!0}),Vi.Logger=void 0;const y=Bs(),w="awaitqueue";let _=class{_debug;_warn;_error;constructor(A){A?(this._debug=y(`${w}:${A}`),this._warn=y(`${w}:WARN:${A}`),this._error=y(`${w}:ERROR:${A}`)):(this._debug=y(w),this._warn=y(`${w}:WARN`),this._error=y(`${w}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}};return Vi.Logger=_,Vi}var tn={},Ip;function Oh(){if(Ip)return tn;Ip=1,Object.defineProperty(tn,"__esModule",{value:!0}),tn.AwaitQueueRemovedTaskError=tn.AwaitQueueStoppedError=void 0;class y extends Error{constructor(s){super(s??"queue stopped"),this.name="AwaitQueueStoppedError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,y)}}tn.AwaitQueueStoppedError=y;class w extends Error{constructor(s){super(s??"queue task removed"),this.name="AwaitQueueRemovedTaskError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,w)}}return tn.AwaitQueueRemovedTaskError=w,tn}var Fp;function Sv(){if(Fp)return Pi;Fp=1,Object.defineProperty(Pi,"__esModule",{value:!0}),Pi.AwaitQueue=void 0;const y=_v(),w=Oh(),_=new y.Logger("AwaitQueue");let s=class{pendingTasks=new Map;nextTaskId=0;constructor(){_.debug("constructor()")}get size(){return this.pendingTasks.size}async push(N,R,m){if(R=R??N.name,_.debug(`push() [name:${R}, options:%o]`,m),typeof N!="function")throw new TypeError("given task is not a function");if(R)try{Object.defineProperty(N,"name",{value:R})}catch{}return new Promise((L,T)=>{if(R&&m?.removeOngoingTasksWithSameName)for(const S of this.pendingTasks.values())S.name===R&&S.reject(new w.AwaitQueueRemovedTaskError,{canExecuteNextTask:!1});const u={id:this.nextTaskId++,task:N,name:R,enqueuedAt:Date.now(),executedAt:void 0,completed:!1,resolve:S=>{if(u.completed)return;u.completed=!0,this.pendingTasks.delete(u.id),_.debug(`resolving task [name:${u.name}]`),L(S);const[C]=this.pendingTasks.values();C&&!C.executedAt&&this.execute(C)},reject:(S,{canExecuteNextTask:C})=>{if(!u.completed&&(u.completed=!0,this.pendingTasks.delete(u.id),_.debug(`rejecting task [name:${u.name}]: %s`,String(S)),T(S),C)){const[H]=this.pendingTasks.values();H&&!H.executedAt&&this.execute(H)}}};this.pendingTasks.set(u.id,u),this.pendingTasks.size===1&&this.execute(u)})}stop(){_.debug("stop()");for(const N of this.pendingTasks.values())_.debug(`stop() | stopping task [name:${N.name}]`),N.reject(new w.AwaitQueueStoppedError,{canExecuteNextTask:!1})}remove(N){_.debug(`remove() [taskIdx:${N}]`);const R=Array.from(this.pendingTasks.values())[N];if(!R){_.debug(`stop() | no task with given idx [taskIdx:${N}]`);return}R.reject(new w.AwaitQueueRemovedTaskError,{canExecuteNextTask:!0})}dump(){const N=Date.now();let R=0;return Array.from(this.pendingTasks.values()).map(m=>({idx:R++,task:m.task,name:m.name,enqueuedTime:m.executedAt?m.executedAt-m.enqueuedAt:N-m.enqueuedAt,executionTime:m.executedAt?N-m.executedAt:0}))}async execute(N){if(_.debug(`execute() [name:${N.name}]`),N.executedAt)throw new Error("task already being executed");N.executedAt=Date.now();try{const R=await N.task();N.resolve(R)}catch(R){N.reject(R,{canExecuteNextTask:!0})}}};return Pi.AwaitQueue=s,Pi}var Kp;function bv(){return Kp||(Kp=1,(function(y){Object.defineProperty(y,"__esModule",{value:!0}),y.AwaitQueueRemovedTaskError=y.AwaitQueueStoppedError=y.AwaitQueue=void 0;var w=Sv();Object.defineProperty(y,"AwaitQueue",{enumerable:!0,get:function(){return w.AwaitQueue}});var _=Oh();Object.defineProperty(y,"AwaitQueueStoppedError",{enumerable:!0,get:function(){return _.AwaitQueueStoppedError}}),Object.defineProperty(y,"AwaitQueueRemovedTaskError",{enumerable:!0,get:function(){return _.AwaitQueueRemovedTaskError}})})(gl)),gl}var Xi={},Jp;function wv(){if(Jp)return Xi;Jp=1,Object.defineProperty(Xi,"__esModule",{value:!0}),Xi.Producer=void 0;const y=lt(),w=St(),_=jt(),s=new y.Logger("Producer");let A=class extends w.EnhancedEventEmitter{_id;_localId;_closed=!1;_rtpSender;_track;_kind;_rtpParameters;_paused;_maxSpatialLayer;_stopTracks;_disableTrackOnPause;_zeroRtpOnPause;_appData;_observer=new w.EnhancedEventEmitter;constructor({id:R,localId:m,rtpSender:L,track:T,rtpParameters:u,stopTracks:S,disableTrackOnPause:C,zeroRtpOnPause:H,appData:k}){super(),s.debug("constructor()"),this._id=R,this._localId=m,this._rtpSender=L,this._track=T,this._kind=T.kind,this._rtpParameters=u,this._paused=C?!T.enabled:!1,this._maxSpatialLayer=void 0,this._stopTracks=S,this._disableTrackOnPause=C,this._zeroRtpOnPause=H,this._appData=k??{},this.onTrackEnded=this.onTrackEnded.bind(this),this.handleTrack()}get id(){return this._id}get localId(){return this._localId}get closed(){return this._closed}get kind(){return this._kind}get rtpSender(){return this._rtpSender}get track(){return this._track}get rtpParameters(){return this._rtpParameters}get paused(){return this._paused}get maxSpatialLayer(){return this._maxSpatialLayer}get appData(){return this._appData}set appData(R){this._appData=R}get observer(){return this._observer}close(){this._closed||(s.debug("close()"),this._closed=!0,this.destroyTrack(),this.emit("@close"),this._observer.safeEmit("close"),super.close(),this._observer.close())}transportClosed(){this._closed||(s.debug("transportClosed()"),this._closed=!0,this.destroyTrack(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}async getStats(){if(this._closed)throw new _.InvalidStateError("closed");return new Promise((R,m)=>{this.safeEmit("@getstats",R,m)})}pause(){if(s.debug("pause()"),this._closed){s.error("pause() | Producer closed");return}this._paused=!0,this._track&&this._disableTrackOnPause&&(this._track.enabled=!1),this._zeroRtpOnPause&&new Promise((R,m)=>{this.safeEmit("@pause",R,m)}).catch(()=>{}),this._observer.safeEmit("pause")}resume(){if(s.debug("resume()"),this._closed){s.error("resume() | Producer closed");return}this._paused=!1,this._track&&this._disableTrackOnPause&&(this._track.enabled=!0),this._zeroRtpOnPause&&new Promise((R,m)=>{this.safeEmit("@resume",R,m)}).catch(()=>{}),this._observer.safeEmit("resume")}async replaceTrack({track:R}){if(s.debug("replaceTrack() [track:%o]",R),this._closed){if(R&&this._stopTracks)try{R.stop()}catch{}throw new _.InvalidStateError("closed")}else if(R?.readyState==="ended")throw new _.InvalidStateError("track ended");if(R===this._track){s.debug("replaceTrack() | same track, ignored");return}await new Promise((m,L)=>{this.safeEmit("@replacetrack",R,m,L)}),this.destroyTrack(),this._track=R,this._track&&this._disableTrackOnPause&&(this._paused?this._paused&&(this._track.enabled=!1):this._track.enabled=!0),this.handleTrack()}async setMaxSpatialLayer(R){if(this._closed)throw new _.InvalidStateError("closed");if(this._kind!=="video")throw new _.UnsupportedError("not a video Producer");if(typeof R!="number")throw new TypeError("invalid spatialLayer");R!==this._maxSpatialLayer&&(await new Promise((m,L)=>{this.safeEmit("@setmaxspatiallayer",R,m,L)}).catch(()=>{}),this._maxSpatialLayer=R)}async setRtpEncodingParameters(R){if(this._closed)throw new _.InvalidStateError("closed");if(typeof R!="object")throw new TypeError("invalid params");await new Promise((m,L)=>{this.safeEmit("@setrtpencodingparameters",R,m,L)})}onTrackEnded(){s.debug('track "ended" event'),this.safeEmit("trackended"),this._observer.safeEmit("trackended")}handleTrack(){this._track&&this._track.addEventListener("ended",this.onTrackEnded)}destroyTrack(){if(this._track)try{this._track.removeEventListener("ended",this.onTrackEnded),this._stopTracks&&this._track.stop()}catch{}}};return Xi.Producer=A,Xi}var Zi={},$p;function Cv(){if($p)return Zi;$p=1,Object.defineProperty(Zi,"__esModule",{value:!0}),Zi.Consumer=void 0;const y=lt(),w=St(),_=jt(),s=new y.Logger("Consumer");let A=class extends w.EnhancedEventEmitter{_id;_localId;_producerId;_closed=!1;_rtpReceiver;_track;_rtpParameters;_paused;_appData;_observer=new w.EnhancedEventEmitter;constructor({id:R,localId:m,producerId:L,rtpReceiver:T,track:u,rtpParameters:S,appData:C}){super(),s.debug("constructor()"),this._id=R,this._localId=m,this._producerId=L,this._rtpReceiver=T,this._track=u,this._rtpParameters=S,this._paused=!u.enabled,this._appData=C??{},this.onTrackEnded=this.onTrackEnded.bind(this),this.handleTrack()}get id(){return this._id}get localId(){return this._localId}get producerId(){return this._producerId}get closed(){return this._closed}get kind(){return this._track.kind}get rtpReceiver(){return this._rtpReceiver}get track(){return this._track}get rtpParameters(){return this._rtpParameters}get paused(){return this._paused}get appData(){return this._appData}set appData(R){this._appData=R}get observer(){return this._observer}close(){this._closed||(s.debug("close()"),this._closed=!0,this.destroyTrack(),this.emit("@close"),this._observer.safeEmit("close"),super.close(),this._observer.close())}transportClosed(){this._closed||(s.debug("transportClosed()"),this._closed=!0,this.destroyTrack(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}async getStats(){if(this._closed)throw new _.InvalidStateError("closed");return new Promise((R,m)=>{this.safeEmit("@getstats",R,m)})}pause(){if(s.debug("pause()"),this._closed){s.error("pause() | Consumer closed");return}if(this._paused){s.debug("pause() | Consumer is already paused");return}this._paused=!0,this._track.enabled=!1,this.emit("@pause"),this._observer.safeEmit("pause")}resume(){if(s.debug("resume()"),this._closed){s.error("resume() | Consumer closed");return}if(!this._paused){s.debug("resume() | Consumer is already resumed");return}this._paused=!1,this._track.enabled=!0,this.emit("@resume"),this._observer.safeEmit("resume")}onTrackEnded(){s.debug('track "ended" event'),this.safeEmit("trackended"),this._observer.safeEmit("trackended")}handleTrack(){this._track.addEventListener("ended",this.onTrackEnded)}destroyTrack(){try{this._track.removeEventListener("ended",this.onTrackEnded),this._track.stop()}catch{}}};return Zi.Consumer=A,Zi}var Ii={},Wp;function Tv(){if(Wp)return Ii;Wp=1,Object.defineProperty(Ii,"__esModule",{value:!0}),Ii.DataProducer=void 0;const y=lt(),w=St(),_=jt(),s=new y.Logger("DataProducer");let A=class extends w.EnhancedEventEmitter{_id;_dataChannel;_closed=!1;_sctpStreamParameters;_appData;_observer=new w.EnhancedEventEmitter;constructor({id:R,dataChannel:m,sctpStreamParameters:L,appData:T}){super(),s.debug("constructor()"),this._id=R,this._dataChannel=m,this._sctpStreamParameters=L,this._appData=T??{},this.handleDataChannel()}get id(){return this._id}get closed(){return this._closed}get sctpStreamParameters(){return this._sctpStreamParameters}get readyState(){return this._dataChannel.readyState}get label(){return this._dataChannel.label}get protocol(){return this._dataChannel.protocol}get bufferedAmount(){return this._dataChannel.bufferedAmount}get bufferedAmountLowThreshold(){return this._dataChannel.bufferedAmountLowThreshold}set bufferedAmountLowThreshold(R){this._dataChannel.bufferedAmountLowThreshold=R}get appData(){return this._appData}set appData(R){this._appData=R}get observer(){return this._observer}close(){this._closed||(s.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"),this._observer.safeEmit("close"),super.close(),this._observer.close())}transportClosed(){this._closed||(s.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}send(R){if(s.debug("send()"),this._closed)throw new _.InvalidStateError("closed");this._dataChannel.send(R)}handleDataChannel(){this._dataChannel.addEventListener("open",()=>{this._closed||(s.debug('DataChannel "open" event'),this.safeEmit("open"))}),this._dataChannel.addEventListener("error",R=>{if(this._closed)return;const m=R.error??new Error("unknown DataChannel error");R.error?.errorDetail==="sctp-failure"?s.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",R.error?.sctpCauseCode,R.error.message):s.error('DataChannel "error" event: %o',m),this.safeEmit("error",m)}),this._dataChannel.addEventListener("close",()=>{this._closed||(s.warn('DataChannel "close" event'),this._closed=!0,this.emit("@close"),this.safeEmit("close"),this._observer.safeEmit("close"))}),this._dataChannel.addEventListener("message",()=>{this._closed||s.warn('DataChannel "message" event in a DataProducer, message discarded')}),this._dataChannel.addEventListener("bufferedamountlow",()=>{this._closed||this.safeEmit("bufferedamountlow")})}};return Ii.DataProducer=A,Ii}var Fi={},eh;function Ev(){if(eh)return Fi;eh=1,Object.defineProperty(Fi,"__esModule",{value:!0}),Fi.DataConsumer=void 0;const y=lt(),w=St(),_=new y.Logger("DataConsumer");let s=class extends w.EnhancedEventEmitter{_id;_dataProducerId;_dataChannel;_closed=!1;_sctpStreamParameters;_appData;_observer=new w.EnhancedEventEmitter;constructor({id:N,dataProducerId:R,dataChannel:m,sctpStreamParameters:L,appData:T}){super(),_.debug("constructor()"),this._id=N,this._dataProducerId=R,this._dataChannel=m,this._sctpStreamParameters=L,this._appData=T??{},this.handleDataChannel()}get id(){return this._id}get dataProducerId(){return this._dataProducerId}get closed(){return this._closed}get sctpStreamParameters(){return this._sctpStreamParameters}get readyState(){return this._dataChannel.readyState}get label(){return this._dataChannel.label}get protocol(){return this._dataChannel.protocol}get binaryType(){return this._dataChannel.binaryType}set binaryType(N){this._dataChannel.binaryType=N}get appData(){return this._appData}set appData(N){this._appData=N}get observer(){return this._observer}close(){this._closed||(_.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"),this._observer.safeEmit("close"),super.close(),this._observer.close())}transportClosed(){this._closed||(_.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}handleDataChannel(){this._dataChannel.addEventListener("open",()=>{this._closed||(_.debug('DataChannel "open" event'),this.safeEmit("open"))}),this._dataChannel.addEventListener("error",N=>{if(this._closed)return;const R=N.error??new Error("unknown DataChannel error");N.error?.errorDetail==="sctp-failure"?_.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",N.error?.sctpCauseCode,N.error.message):_.error('DataChannel "error" event: %o',R),this.safeEmit("error",R)}),this._dataChannel.addEventListener("close",()=>{this._closed||(_.warn('DataChannel "close" event'),this._closed=!0,this.emit("@close"),this.safeEmit("close"),this._observer.safeEmit("close"))}),this._dataChannel.addEventListener("message",N=>{this._closed||this.safeEmit("message",N.data)})}};return Fi.DataConsumer=s,Fi}var th;function Rv(){if(th)return Yi;th=1,Object.defineProperty(Yi,"__esModule",{value:!0}),Yi.Transport=void 0;const y=bv(),w=lt(),_=St(),s=jt(),A=Yn(),N=sa(),R=wv(),m=Cv(),L=Tv(),T=Ev(),u=new w.Logger("Transport");class S{consumerOptions;promise;resolve;reject;constructor(k){this.consumerOptions=k,this.promise=new Promise((c,l)=>{this.resolve=c,this.reject=l})}}let C=class extends _.EnhancedEventEmitter{_id;_closed=!1;_direction;_getSendExtendedRtpCapabilities;_recvRtpCapabilities;_canProduceByKind;_maxSctpMessageSize;_handler;_iceGatheringState="new";_connectionState="new";_appData;_producers=new Map;_consumers=new Map;_dataProducers=new Map;_dataConsumers=new Map;_probatorConsumerCreated=!1;_awaitQueue=new y.AwaitQueue;_pendingConsumerTasks=[];_consumerCreationInProgress=!1;_pendingPauseConsumers=new Map;_consumerPauseInProgress=!1;_pendingResumeConsumers=new Map;_consumerResumeInProgress=!1;_pendingCloseConsumers=new Map;_consumerCloseInProgress=!1;_observer=new _.EnhancedEventEmitter;constructor({direction:k,id:c,iceParameters:l,iceCandidates:d,dtlsParameters:g,sctpParameters:x,iceServers:E,iceTransportPolicy:M,additionalSettings:b,appData:f,handlerFactory:v,getSendExtendedRtpCapabilities:O,recvRtpCapabilities:q,canProduceByKind:W}){super(),u.debug("constructor() [id:%s, direction:%s]",c,k),this._id=c,this._direction=k,this._getSendExtendedRtpCapabilities=O,this._recvRtpCapabilities=q,this._canProduceByKind=W,this._maxSctpMessageSize=x?x.maxMessageSize:null;const ee=A.clone(b)??{};delete ee.iceServers,delete ee.iceTransportPolicy,delete ee.bundlePolicy,delete ee.rtcpMuxPolicy,this._handler=v.factory({direction:k,iceParameters:l,iceCandidates:d,dtlsParameters:g,sctpParameters:x,iceServers:E,iceTransportPolicy:M,additionalSettings:ee,getSendExtendedRtpCapabilities:this._getSendExtendedRtpCapabilities}),this._appData=f??{},this.handleHandler()}get id(){return this._id}get closed(){return this._closed}get direction(){return this._direction}get handler(){return this._handler}get iceGatheringState(){return this._iceGatheringState}get connectionState(){return this._connectionState}get appData(){return this._appData}set appData(k){this._appData=k}get observer(){return this._observer}close(){if(!this._closed){u.debug("close()"),this._closed=!0,this._awaitQueue.stop(),this._handler.close(),this._connectionState="closed";for(const k of this._producers.values())k.transportClosed();this._producers.clear();for(const k of this._consumers.values())k.transportClosed();this._consumers.clear();for(const k of this._dataProducers.values())k.transportClosed();this._dataProducers.clear();for(const k of this._dataConsumers.values())k.transportClosed();this._dataConsumers.clear(),this._observer.safeEmit("close"),super.close(),this._observer.close()}}async getStats(){if(this._closed)throw new s.InvalidStateError("closed");return this._handler.getTransportStats()}async restartIce({iceParameters:k}){if(u.debug("restartIce()"),this._closed)throw new s.InvalidStateError("closed");if(!k)throw new TypeError("missing iceParameters");return this._awaitQueue.push(async()=>await this._handler.restartIce(k),"transport.restartIce()")}async updateIceServers({iceServers:k}={}){if(u.debug("updateIceServers()"),this._closed)throw new s.InvalidStateError("closed");if(!Array.isArray(k))throw new TypeError("missing iceServers");return this._awaitQueue.push(async()=>this._handler.updateIceServers(k),"transport.updateIceServers()")}async produce({track:k,streamId:c,encodings:l,codecOptions:d,headerExtensionOptions:g,codec:x,stopTracks:E=!0,disableTrackOnPause:M=!0,zeroRtpOnPause:b=!1,onRtpSender:f,appData:v={}}={}){if(u.debug("produce() [track:%o]",k),this._closed)throw new s.InvalidStateError("closed");if(k){if(this._direction!=="send")throw new s.UnsupportedError("not a sending Transport");if(this._canProduceByKind[k.kind]){if(k.readyState==="ended")throw new s.InvalidStateError("track ended");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(this.listenerCount("produce")===0)throw new TypeError('no "produce" listener set into this transport');if(v&&typeof v!="object")throw new TypeError("if given, appData must be an object")}else throw new s.UnsupportedError(`cannot produce ${k.kind}`)}else throw new TypeError("missing track");return this._awaitQueue.push(async()=>{let O;if(l&&!Array.isArray(l))throw TypeError("encodings must be an array");l?.length===0?O=void 0:l&&(O=l.map(h=>{const Q={active:!0};return h.active===!1&&(Q.active=!1),typeof h.dtx=="boolean"&&(Q.dtx=h.dtx),typeof h.scalabilityMode=="string"&&(Q.scalabilityMode=h.scalabilityMode),typeof h.scaleResolutionDownBy=="number"&&(Q.scaleResolutionDownBy=h.scaleResolutionDownBy),typeof h.maxBitrate=="number"&&(Q.maxBitrate=h.maxBitrate),typeof h.maxFramerate=="number"&&(Q.maxFramerate=h.maxFramerate),typeof h.adaptivePtime=="boolean"&&(Q.adaptivePtime=h.adaptivePtime),typeof h.priority=="string"&&(Q.priority=h.priority),typeof h.networkPriority=="string"&&(Q.networkPriority=h.networkPriority),Q}));const{localId:q,rtpParameters:W,rtpSender:ee}=await this._handler.send({track:k,streamId:c,encodings:O,codecOptions:d,headerExtensionOptions:g,codec:x,onRtpSender:f});try{N.validateAndNormalizeRtpParameters(W);const{id:h}=await new Promise((I,D)=>{this.safeEmit("produce",{kind:k.kind,rtpParameters:W,appData:v},I,D)}),Q=new R.Producer({id:h,localId:q,rtpSender:ee,track:k,rtpParameters:W,stopTracks:E,disableTrackOnPause:M,zeroRtpOnPause:b,appData:v});return this._producers.set(Q.id,Q),this.handleProducer(Q),this._observer.safeEmit("newproducer",Q),Q}catch(h){throw this._handler.stopSending(q).catch(()=>{}),h}},"transport.produce()").catch(O=>{if(E)try{k.stop()}catch{}throw O})}async consume({id:k,producerId:c,kind:l,rtpParameters:d,streamId:g,onRtpReceiver:x,appData:E={}}){if(u.debug("consume()"),this._closed)throw new s.InvalidStateError("closed");if(this._direction!=="recv")throw new s.UnsupportedError("not a receiving Transport");if(typeof k!="string")throw new TypeError("missing id");if(typeof c!="string")throw new TypeError("missing producerId");if(l!=="audio"&&l!=="video")throw new TypeError(`invalid kind '${l}'`);if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(E&&typeof E!="object")throw new TypeError("if given, appData must be an object");const M=A.clone(d);if(!N.canReceive(M,this._recvRtpCapabilities))throw new s.UnsupportedError("cannot consume this Producer");const f=new S({id:k,producerId:c,kind:l,rtpParameters:M,streamId:g,onRtpReceiver:x,appData:E});return this._pendingConsumerTasks.push(f),queueMicrotask(()=>{this._closed||this._consumerCreationInProgress===!1&&this.createPendingConsumers()}),f.promise}async produceData({ordered:k=!0,maxPacketLifeTime:c,maxRetransmits:l,label:d="",protocol:g="",appData:x={}}={}){if(u.debug("produceData()"),this._closed)throw new s.InvalidStateError("closed");if(this._direction!=="send")throw new s.UnsupportedError("not a sending Transport");if(this._maxSctpMessageSize){if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(this.listenerCount("producedata")===0)throw new TypeError('no "producedata" listener set into this transport');if(x&&typeof x!="object")throw new TypeError("if given, appData must be an object")}else throw new s.UnsupportedError("SCTP not enabled by remote Transport");return(c||l)&&(k=!1),this._awaitQueue.push(async()=>{const{dataChannel:E,sctpStreamParameters:M}=await this._handler.sendDataChannel({ordered:k,maxPacketLifeTime:c,maxRetransmits:l,label:d,protocol:g});N.validateAndNormalizeSctpStreamParameters(M);const{id:b}=await new Promise((v,O)=>{this.safeEmit("producedata",{sctpStreamParameters:M,label:d,protocol:g,appData:x},v,O)}),f=new L.DataProducer({id:b,dataChannel:E,sctpStreamParameters:M,appData:x});return this._dataProducers.set(f.id,f),this.handleDataProducer(f),this._observer.safeEmit("newdataproducer",f),f},"transport.produceData()")}async consumeData({id:k,dataProducerId:c,sctpStreamParameters:l,label:d="",protocol:g="",appData:x={}}){if(u.debug("consumeData()"),this._closed)throw new s.InvalidStateError("closed");if(this._direction!=="recv")throw new s.UnsupportedError("not a receiving Transport");if(this._maxSctpMessageSize){if(typeof k!="string")throw new TypeError("missing id");if(typeof c!="string")throw new TypeError("missing dataProducerId");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(x&&typeof x!="object")throw new TypeError("if given, appData must be an object")}else throw new s.UnsupportedError("SCTP not enabled by remote Transport");const E=A.clone(l);return N.validateAndNormalizeSctpStreamParameters(E),this._awaitQueue.push(async()=>{const{dataChannel:M}=await this._handler.receiveDataChannel({sctpStreamParameters:E,label:d,protocol:g}),b=new T.DataConsumer({id:k,dataProducerId:c,dataChannel:M,sctpStreamParameters:E,appData:x});return this._dataConsumers.set(b.id,b),this.handleDataConsumer(b),this._observer.safeEmit("newdataconsumer",b),b},"transport.consumeData()")}createPendingConsumers(){this._consumerCreationInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingConsumerTasks.length===0){u.debug("createPendingConsumers() | there is no Consumer to be created");return}const k=[...this._pendingConsumerTasks];this._pendingConsumerTasks=[];let c;const l=[];for(const d of k){const{id:g,kind:x,rtpParameters:E,streamId:M,onRtpReceiver:b}=d.consumerOptions;l.push({trackId:g,kind:x,rtpParameters:E,streamId:M,onRtpReceiver:b})}try{const d=await this._handler.receive(l);for(let g=0;g<d.length;++g){const x=k[g],E=d[g],{id:M,producerId:b,kind:f,rtpParameters:v,appData:O}=x.consumerOptions,{localId:q,rtpReceiver:W,track:ee}=E,h=new m.Consumer({id:M,localId:q,producerId:b,rtpReceiver:W,track:ee,rtpParameters:v,appData:O});this._consumers.set(h.id,h),this.handleConsumer(h),!this._probatorConsumerCreated&&!c&&f==="video"&&(c=h),this._observer.safeEmit("newconsumer",h),x.resolve(h)}}catch(d){for(const g of k)g.reject(d)}if(c)try{const d=N.generateProbatorRtpParameters(c.rtpParameters);await this._handler.receive([{trackId:"probator",kind:"video",rtpParameters:d}]),u.debug("createPendingConsumers() | Consumer for RTP probation created"),this._probatorConsumerCreated=!0}catch(d){u.error("createPendingConsumers() | failed to create Consumer for RTP probation:%o",d)}},"transport.createPendingConsumers()").then(()=>{this._consumerCreationInProgress=!1,this._pendingConsumerTasks.length>0&&this.createPendingConsumers()}).catch(()=>{})}pausePendingConsumers(){this._consumerPauseInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingPauseConsumers.size===0){u.debug("pausePendingConsumers() | there is no Consumer to be paused");return}const k=Array.from(this._pendingPauseConsumers.values());this._pendingPauseConsumers.clear();try{const c=k.map(l=>l.localId);await this._handler.pauseReceiving(c)}catch(c){u.error("pausePendingConsumers() | failed to pause Consumers:",c)}},"transport.pausePendingConsumers()").then(()=>{this._consumerPauseInProgress=!1,this._pendingPauseConsumers.size>0&&this.pausePendingConsumers()}).catch(()=>{})}resumePendingConsumers(){this._consumerResumeInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingResumeConsumers.size===0){u.debug("resumePendingConsumers() | there is no Consumer to be resumed");return}const k=Array.from(this._pendingResumeConsumers.values());this._pendingResumeConsumers.clear();try{const c=k.map(l=>l.localId);await this._handler.resumeReceiving(c)}catch(c){u.error("resumePendingConsumers() | failed to resume Consumers:",c)}},"transport.resumePendingConsumers()").then(()=>{this._consumerResumeInProgress=!1,this._pendingResumeConsumers.size>0&&this.resumePendingConsumers()}).catch(()=>{})}closePendingConsumers(){this._consumerCloseInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingCloseConsumers.size===0){u.debug("closePendingConsumers() | there is no Consumer to be closed");return}const k=Array.from(this._pendingCloseConsumers.values());this._pendingCloseConsumers.clear();try{await this._handler.stopReceiving(k.map(c=>c.localId))}catch(c){u.error("closePendingConsumers() | failed to close Consumers:",c)}},"transport.closePendingConsumers()").then(()=>{this._consumerCloseInProgress=!1,this._pendingCloseConsumers.size>0&&this.closePendingConsumers()}).catch(()=>{})}handleHandler(){const k=this._handler;k.on("@connect",({dtlsParameters:c},l,d)=>{if(this._closed){d(new s.InvalidStateError("closed"));return}this.safeEmit("connect",{dtlsParameters:c},l,d)}),k.on("@icegatheringstatechange",c=>{c!==this._iceGatheringState&&(u.debug("ICE gathering state changed to %s",c),this._iceGatheringState=c,this._closed||this.safeEmit("icegatheringstatechange",c))}),k.on("@icecandidateerror",c=>{u.warn(`ICE candidate error [url:${c.url}, localAddress:${c.address}, localPort:${c.port}]: ${c.errorCode} "${c.errorText}"`),this.safeEmit("icecandidateerror",c)}),k.on("@connectionstatechange",c=>{c!==this._connectionState&&(u.debug("connection state changed to %s",c),this._connectionState=c,this._closed||this.safeEmit("connectionstatechange",c))})}handleProducer(k){k.on("@close",()=>{this._producers.delete(k.id),!this._closed&&this._awaitQueue.push(async()=>await this._handler.stopSending(k.localId),"producer @close event").catch(c=>u.warn("producer.close() failed:%o",c))}),k.on("@pause",(c,l)=>{this._awaitQueue.push(async()=>await this._handler.pauseSending(k.localId),"producer @pause event").then(c).catch(l)}),k.on("@resume",(c,l)=>{this._awaitQueue.push(async()=>await this._handler.resumeSending(k.localId),"producer @resume event").then(c).catch(l)}),k.on("@replacetrack",(c,l,d)=>{this._awaitQueue.push(async()=>await this._handler.replaceTrack(k.localId,c),"producer @replacetrack event").then(l).catch(d)}),k.on("@setmaxspatiallayer",(c,l,d)=>{this._awaitQueue.push(async()=>await this._handler.setMaxSpatialLayer(k.localId,c),"producer @setmaxspatiallayer event").then(l).catch(d)}),k.on("@setrtpencodingparameters",(c,l,d)=>{this._awaitQueue.push(async()=>await this._handler.setRtpEncodingParameters(k.localId,c),"producer @setrtpencodingparameters event").then(l).catch(d)}),k.on("@getstats",(c,l)=>{if(this._closed)return l(new s.InvalidStateError("closed"));this._handler.getSenderStats(k.localId).then(c).catch(l)})}handleConsumer(k){k.on("@close",()=>{this._consumers.delete(k.id),this._pendingPauseConsumers.delete(k.id),this._pendingResumeConsumers.delete(k.id),!this._closed&&(this._pendingCloseConsumers.set(k.id,k),this._consumerCloseInProgress===!1&&this.closePendingConsumers())}),k.on("@pause",()=>{this._pendingResumeConsumers.has(k.id)&&this._pendingResumeConsumers.delete(k.id),this._pendingPauseConsumers.set(k.id,k),queueMicrotask(()=>{this._closed||this._consumerPauseInProgress===!1&&this.pausePendingConsumers()})}),k.on("@resume",()=>{this._pendingPauseConsumers.has(k.id)&&this._pendingPauseConsumers.delete(k.id),this._pendingResumeConsumers.set(k.id,k),queueMicrotask(()=>{this._closed||this._consumerResumeInProgress===!1&&this.resumePendingConsumers()})}),k.on("@getstats",(c,l)=>{if(this._closed)return l(new s.InvalidStateError("closed"));this._handler.getReceiverStats(k.localId).then(c).catch(l)})}handleDataProducer(k){k.on("@close",()=>{this._dataProducers.delete(k.id)})}handleDataConsumer(k){k.on("@close",()=>{this._dataConsumers.delete(k.id)})}};return Yi.Transport=C,Yi}var Ki={},kt={},vl={},yl={exports:{}},ah;function wl(){if(ah)return yl.exports;ah=1;var y=yl.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(w){return w.encoding?"rtpmap:%d %s/%s/%s":w.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(w){return w.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(w){return w.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(w){return"extmap:%d"+(w.direction?"/%s":"%v")+(w["encrypt-uri"]?" %s":"%v")+" %s"+(w.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(w){return w.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{push:"msid",reg:/^msid:([\w-]+)(?: ([\w-]+))?/,names:["id","appdata"],format:"msid:%s %s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(w){var _="candidate:%s %d %s %d %s %d typ %s";return _+=w.raddr!=null?" raddr %s rport %d":"%v%v",_+=w.tcptype!=null?" tcptype %s":"%v",w.generation!=null&&(_+=" generation %d"),_+=w["network-id"]!=null?" network-id %d":"%v",_+=w["network-cost"]!=null?" network-cost %d":"%v",_}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(w){var _="ssrc:%d";return w.attribute!=null&&(_+=" %s",w.value!=null&&(_+=":%s")),_}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(w){return w.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(w){return w.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(w){return"imageattr:%s %s %s"+(w.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(w){return"simulcast:%s %s"+(w.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(w){return"ts-refclk:%s"+(w.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(w){var _="mediaclk:";return _+=w.id!=null?"id=%s %s":"%v%s",_+=w.mediaClockValue!=null?"=%s":"",_+=w.rateNumerator!=null?" rate=%s":"",_+=w.rateDenominator!=null?"/%s":"",_}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};return Object.keys(y).forEach(function(w){var _=y[w];_.forEach(function(s){s.reg||(s.reg=/(.*)/),s.format||(s.format="%s")})}),yl.exports}var nh;function Dv(){return nh||(nh=1,(function(y){var w=function(m){return String(Number(m))===m?Number(m):m},_=function(m,L,T,u){if(u&&!T)L[u]=w(m[1]);else for(var S=0;S<T.length;S+=1)m[S+1]!=null&&(L[T[S]]=w(m[S+1]))},s=function(m,L,T){var u=m.name&&m.names;m.push&&!L[m.push]?L[m.push]=[]:u&&!L[m.name]&&(L[m.name]={});var S=m.push?{}:u?L[m.name]:L;_(T.match(m.reg),S,m.names,m.name),m.push&&L[m.push].push(S)},A=wl(),N=RegExp.prototype.test.bind(/^([a-z])=(.*)/);y.parse=function(m){var L={},T=[],u=L;return m.split(/(\r\n|\r|\n)/).filter(N).forEach(function(S){var C=S[0],H=S.slice(2);C==="m"&&(T.push({rtp:[],fmtp:[]}),u=T[T.length-1]);for(var k=0;k<(A[C]||[]).length;k+=1){var c=A[C][k];if(c.reg.test(H))return s(c,u,H)}}),L.media=T,L};var R=function(m,L){var T=L.split(/=(.+)/,2);return T.length===2?m[T[0]]=w(T[1]):T.length===1&&L.length>1&&(m[T[0]]=void 0),m};y.parseParams=function(m){return m.split(/;\s?/).reduce(R,{})},y.parseFmtpConfig=y.parseParams,y.parsePayloads=function(m){return m.toString().split(" ").map(Number)},y.parseRemoteCandidates=function(m){for(var L=[],T=m.split(" ").map(w),u=0;u<T.length;u+=3)L.push({component:T[u],ip:T[u+1],port:T[u+2]});return L},y.parseImageAttributes=function(m){return m.split(" ").map(function(L){return L.substring(1,L.length-1).split(",").reduce(R,{})})},y.parseSimulcastStreamList=function(m){return m.split(";").map(function(L){return L.split(",").map(function(T){var u,S=!1;return T[0]!=="~"?u=w(T):(u=w(T.substring(1,T.length)),S=!0),{scid:u,paused:S}})})}})(vl)),vl}var _l,ih;function Mv(){if(ih)return _l;ih=1;var y=wl(),w=/%[sdv%]/g,_=function(R){var m=1,L=arguments,T=L.length;return R.replace(w,function(u){if(m>=T)return u;var S=L[m];switch(m+=1,u){case"%%":return"%";case"%s":return String(S);case"%d":return Number(S);case"%v":return""}})},s=function(R,m,L){var T=m.format instanceof Function?m.format(m.push?L:L[m.name]):m.format,u=[R+"="+T];if(m.names)for(var S=0;S<m.names.length;S+=1){var C=m.names[S];m.name?u.push(L[m.name][C]):u.push(L[m.names[S]])}else u.push(L[m.name]);return _.apply(null,u)},A=["v","o","s","i","u","e","p","c","b","t","r","z","a"],N=["i","c","b","a"];return _l=function(R,m){m=m||{},R.version==null&&(R.version=0),R.name==null&&(R.name=" "),R.media.forEach(function(S){S.payloads==null&&(S.payloads="")});var L=m.outerOrder||A,T=m.innerOrder||N,u=[];return L.forEach(function(S){y[S].forEach(function(C){C.name in R&&R[C.name]!=null?u.push(s(S,C,R)):C.push in R&&R[C.push]!=null&&R[C.push].forEach(function(H){u.push(s(S,C,H))})})}),R.media.forEach(function(S){u.push(s("m",y.m[0],S)),T.forEach(function(C){y[C].forEach(function(H){H.name in S&&S[H.name]!=null?u.push(s(C,H,S)):H.push in S&&S[H.push]!=null&&S[H.push].forEach(function(k){u.push(s(C,H,k))})})})}),u.join(`\r
`)+`\r
`},_l}var rh;function za(){if(rh)return kt;rh=1;var y=Dv(),w=Mv(),_=wl();return kt.grammar=_,kt.write=w,kt.parse=y.parse,kt.parseParams=y.parseParams,kt.parseFmtpConfig=y.parseFmtpConfig,kt.parsePayloads=y.parsePayloads,kt.parseRemoteCandidates=y.parseRemoteCandidates,kt.parseImageAttributes=y.parseImageAttributes,kt.parseSimulcastStreamList=y.parseSimulcastStreamList,kt}var As={},sh;function Pn(){if(sh)return As;sh=1,Object.defineProperty(As,"__esModule",{value:!0}),As.parse=w;const y=new RegExp("^[LS]([1-9]\\d{0,1})T([1-9]\\d{0,1})");function w(_){const s=y.exec(_??"");return s?{spatialLayers:Number(s[1]),temporalLayers:Number(s[2])}:{spatialLayers:1,temporalLayers:1}}return As}var Ji={},ra={},ch;function xv(){if(ch)return ra;ch=1,Object.defineProperty(ra,"__esModule",{value:!0}),ra.OfferMediaSection=ra.AnswerMediaSection=ra.MediaSection=void 0;const y=za(),w=Yn();let _=class{_mediaObject;constructor({iceParameters:m,iceCandidates:L,dtlsParameters:T}){if(this._mediaObject={type:"",port:0,protocol:"",payloads:"",rtp:[],fmtp:[]},m&&this.setIceParameters(m),L){this._mediaObject.candidates=[];for(const u of L){const S={foundation:u.foundation,component:1,ip:u.address??u.ip,port:u.port,priority:u.priority,transport:u.protocol,type:u.type};u.tcpType&&(S.tcptype=u.tcpType),this._mediaObject.candidates.push(S)}this._mediaObject.endOfCandidates="end-of-candidates",this._mediaObject.iceOptions="renomination"}T&&this.setDtlsRole(T.role)}get mid(){return String(this._mediaObject.mid)}get closed(){return this._mediaObject.port===0}getObject(){return this._mediaObject}setIceParameters(m){this._mediaObject.iceUfrag=m.usernameFragment,this._mediaObject.icePwd=m.password}pause(){this._mediaObject.direction="inactive"}disable(){this.pause()}close(){this.disable(),this._mediaObject.port=0,delete this._mediaObject.candidates,delete this._mediaObject.endOfCandidates,delete this._mediaObject.iceUfrag,delete this._mediaObject.icePwd,delete this._mediaObject.iceOptions,this._mediaObject.rtp=[],this._mediaObject.fmtp=[],delete this._mediaObject.rtcp,delete this._mediaObject.rtcpFb,delete this._mediaObject.ssrcs,delete this._mediaObject.ssrcGroups,delete this._mediaObject.simulcast,delete this._mediaObject.simulcast_03,delete this._mediaObject.rids,delete this._mediaObject.extmapAllowMixed}};ra.MediaSection=_;class s extends _{constructor({iceParameters:m,iceCandidates:L,dtlsParameters:T,sctpParameters:u,plainRtpParameters:S,offerMediaObject:C,offerRtpParameters:H,answerRtpParameters:k,codecOptions:c}){switch(super({iceParameters:m,iceCandidates:L,dtlsParameters:T}),this._mediaObject.mid=String(C.mid),this._mediaObject.type=C.type,this._mediaObject.protocol=C.protocol,S?(this._mediaObject.connection={ip:S.ip,version:S.ipVersion},this._mediaObject.port=S.port):(this._mediaObject.connection={ip:"127.0.0.1",version:4},this._mediaObject.port=7),C.type){case"audio":case"video":{this._mediaObject.direction="recvonly",this._mediaObject.rtp=[],this._mediaObject.rtcpFb=[],this._mediaObject.fmtp=[];for(const l of k.codecs){const d={payload:l.payloadType,codec:N(l),rate:l.clockRate};l.channels>1&&(d.encoding=l.channels),this._mediaObject.rtp.push(d);const g=w.clone(l.parameters)??{};let x=w.clone(l.rtcpFeedback)??[];if(c){const{opusStereo:M,opusFec:b,opusDtx:f,opusMaxPlaybackRate:v,opusMaxAverageBitrate:O,opusPtime:q,opusNack:W,videoGoogleStartBitrate:ee,videoGoogleMaxBitrate:h,videoGoogleMinBitrate:Q}=c,I=H.codecs.find(D=>D.payloadType===l.payloadType);switch(l.mimeType.toLowerCase()){case"audio/opus":case"audio/multiopus":{M!==void 0&&(I.parameters["sprop-stereo"]=M?1:0,g.stereo=M?1:0),b!==void 0&&(I.parameters.useinbandfec=b?1:0,g.useinbandfec=b?1:0),f!==void 0&&(I.parameters.usedtx=f?1:0,g.usedtx=f?1:0),v!==void 0&&(g.maxplaybackrate=v),O!==void 0&&(g.maxaveragebitrate=O),q!==void 0&&(I.parameters.ptime=q,g.ptime=q),W||(I.rtcpFeedback=I.rtcpFeedback.filter(D=>D.type!=="nack"||D.parameter),x=x.filter(D=>D.type!=="nack"||D.parameter));break}case"video/vp8":case"video/vp9":case"video/h264":case"video/h265":case"video/av1":{ee!==void 0&&(g["x-google-start-bitrate"]=ee),h!==void 0&&(g["x-google-max-bitrate"]=h),Q!==void 0&&(g["x-google-min-bitrate"]=Q);break}}}const E={payload:l.payloadType,config:""};for(const M of Object.keys(g))E.config&&(E.config+=";"),E.config+=`${M}=${g[M]}`;E.config&&this._mediaObject.fmtp.push(E);for(const M of x)this._mediaObject.rtcpFb.push({payload:l.payloadType,type:M.type,subtype:M.parameter})}this._mediaObject.payloads=k.codecs.map(l=>l.payloadType).join(" "),this._mediaObject.ext=[];for(const l of k.headerExtensions)(C.ext??[]).some(g=>g.uri===l.uri)&&this._mediaObject.ext.push({uri:l.uri,value:l.id});if(C.extmapAllowMixed==="extmap-allow-mixed"&&(this._mediaObject.extmapAllowMixed="extmap-allow-mixed"),C.simulcast){this._mediaObject.simulcast={dir1:"recv",list1:C.simulcast.list1},this._mediaObject.rids=[];for(const l of C.rids??[])l.direction==="send"&&this._mediaObject.rids.push({id:l.id,direction:"recv"})}else if(C.simulcast_03){this._mediaObject.simulcast_03={value:C.simulcast_03.value.replace(/send/g,"recv")},this._mediaObject.rids=[];for(const l of C.rids??[])l.direction==="send"&&this._mediaObject.rids.push({id:l.id,direction:"recv"})}this._mediaObject.rtcpMux="rtcp-mux",this._mediaObject.rtcpRsize="rtcp-rsize";break}case"application":{typeof C.sctpPort=="number"?(this._mediaObject.payloads="webrtc-datachannel",this._mediaObject.sctpPort=u.port,this._mediaObject.maxMessageSize=u.maxMessageSize):C.sctpmap&&(this._mediaObject.payloads=String(u.port),this._mediaObject.sctpmap={app:"webrtc-datachannel",sctpmapNumber:u.port,maxMessageSize:u.maxMessageSize});break}}}setDtlsRole(m){switch(m){case"client":{this._mediaObject.setup="active";break}case"server":{this._mediaObject.setup="passive";break}case"auto":{this._mediaObject.setup="actpass";break}}}resume(){this._mediaObject.direction="recvonly"}muxSimulcastStreams(m){if(!this._mediaObject.simulcast?.list1)return;const L={};for(const S of m)S.rid&&(L[S.rid]=S);const T=this._mediaObject.simulcast.list1,u=y.parseSimulcastStreamList(T);for(const S of u)for(const C of S)C.paused=!L[C.scid]?.active;this._mediaObject.simulcast.list1=u.map(S=>S.map(C=>`${C.paused?"~":""}${C.scid}`).join(",")).join(";")}}ra.AnswerMediaSection=s;class A extends _{constructor({iceParameters:m,iceCandidates:L,dtlsParameters:T,sctpParameters:u,plainRtpParameters:S,mid:C,kind:H,offerRtpParameters:k,streamId:c,trackId:l}){switch(super({iceParameters:m,iceCandidates:L,dtlsParameters:T}),this._mediaObject.mid=String(C),this._mediaObject.type=H,S?(this._mediaObject.connection={ip:S.ip,version:S.ipVersion},this._mediaObject.protocol="RTP/AVP",this._mediaObject.port=S.port):(this._mediaObject.connection={ip:"127.0.0.1",version:4},u?this._mediaObject.protocol="UDP/DTLS/SCTP":this._mediaObject.protocol="UDP/TLS/RTP/SAVPF",this._mediaObject.port=7),this._mediaObject.extmapAllowMixed="extmap-allow-mixed",H){case"audio":case"video":{this._mediaObject.direction="sendonly",this._mediaObject.rtp=[],this._mediaObject.rtcpFb=[],this._mediaObject.fmtp=[],this._mediaObject.msid=[{id:c,appdata:l}];for(const E of k.codecs){const M={payload:E.payloadType,codec:N(E),rate:E.clockRate};E.channels>1&&(M.encoding=E.channels),this._mediaObject.rtp.push(M);const b={payload:E.payloadType,config:""};for(const f of Object.keys(E.parameters??{}))b.config&&(b.config+=";"),b.config+=`${f}=${E.parameters[f]}`;b.config&&this._mediaObject.fmtp.push(b);for(const f of E.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:E.payloadType,type:f.type,subtype:f.parameter})}this._mediaObject.payloads=k.codecs.map(E=>E.payloadType).join(" "),this._mediaObject.ext=[];for(const E of k.headerExtensions)this._mediaObject.ext.push({uri:E.uri,value:E.id});this._mediaObject.rtcpMux="rtcp-mux",this._mediaObject.rtcpRsize="rtcp-rsize";const d=k.encodings[0],g=d.ssrc,x=d.rtx?.ssrc;this._mediaObject.ssrcs=[],this._mediaObject.ssrcGroups=[],g&&k.rtcp.cname&&this._mediaObject.ssrcs.push({id:g,attribute:"cname",value:k.rtcp.cname}),x&&(k.rtcp.cname&&this._mediaObject.ssrcs.push({id:x,attribute:"cname",value:k.rtcp.cname}),g&&this._mediaObject.ssrcGroups.push({semantics:"FID",ssrcs:`${g} ${x}`}));break}case"application":{this._mediaObject.payloads="webrtc-datachannel",this._mediaObject.sctpPort=u.port,this._mediaObject.maxMessageSize=u.maxMessageSize;break}}}setDtlsRole(m){this._mediaObject.setup="actpass"}resume(){this._mediaObject.direction="sendonly"}}ra.OfferMediaSection=A;function N(R){const L=new RegExp("^(audio|video)/(.+)","i").exec(R.mimeType);if(!L)throw new TypeError("invalid codec.mimeType");return L[2]}return ra}var oh;function or(){if(oh)return Ji;oh=1,Object.defineProperty(Ji,"__esModule",{value:!0}),Ji.RemoteSdp=void 0;const y=za(),w=lt(),_=xv(),s=["av1","h264"],A=new w.Logger("RemoteSdp");let N=class{_iceParameters;_iceCandidates;_dtlsParameters;_sctpParameters;_plainRtpParameters;_mediaSections=[];_midToIndex=new Map;_firstMid;_sdpObject;constructor({iceParameters:m,iceCandidates:L,dtlsParameters:T,sctpParameters:u,plainRtpParameters:S}){if(this._iceParameters=m,this._iceCandidates=L,this._dtlsParameters=T,this._sctpParameters=u,this._plainRtpParameters=S,this._sdpObject={version:0,origin:{address:"0.0.0.0",ipVer:4,netType:"IN",sessionId:"10000",sessionVersion:0,username:"mediasoup-client"},name:"-",timing:{start:0,stop:0},media:[]},this._sdpObject.iceOptions="ice2",m?.iceLite&&(this._sdpObject.icelite="ice-lite"),T){this._sdpObject.msidSemantic={semantic:"WMS",token:"*"};const C=this._dtlsParameters.fingerprints.length;this._sdpObject.fingerprint={type:T.fingerprints[C-1].algorithm,hash:T.fingerprints[C-1].value},this._sdpObject.groups=[{type:"BUNDLE",mids:""}]}S&&(this._sdpObject.origin.address=S.ip,this._sdpObject.origin.ipVer=S.ipVersion)}updateIceParameters(m){A.debug("updateIceParameters() [iceParameters:%o]",m),this._iceParameters=m,this._sdpObject.icelite=m.iceLite?"ice-lite":void 0;for(const L of this._mediaSections)L.setIceParameters(m)}updateDtlsRole(m){A.debug("updateDtlsRole() [role:%s]",m),this._dtlsParameters.role=m;for(const L of this._mediaSections)L.setDtlsRole(m)}setSessionExtmapAllowMixed(){A.debug("setSessionExtmapAllowMixed()"),this._sdpObject.extmapAllowMixed="extmap-allow-mixed"}getNextMediaSectionIdx(){for(let m=0;m<this._mediaSections.length;++m){const L=this._mediaSections[m];if(L.closed)return{idx:m,reuseMid:L.mid}}return{idx:this._mediaSections.length}}send({offerMediaObject:m,reuseMid:L,offerRtpParameters:T,answerRtpParameters:u,codecOptions:S}){const C=new _.AnswerMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,offerMediaObject:m,offerRtpParameters:T,answerRtpParameters:u,codecOptions:S}),H=C.getObject();H.rtp.find(c=>s.includes(c.codec.toLowerCase()))||(H.ext=H.ext?.filter(c=>c.uri!=="https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension")),L?this.replaceMediaSection(C,L):this._midToIndex.has(C.mid)?this.replaceMediaSection(C):this.addMediaSection(C)}receive({mid:m,kind:L,offerRtpParameters:T,streamId:u,trackId:S}){this.setSessionExtmapAllowMixed();const C=new _.OfferMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,mid:m,kind:L,offerRtpParameters:T,streamId:u,trackId:S}),H=this._mediaSections.find(k=>k.closed);H?this.replaceMediaSection(C,H.mid):this.addMediaSection(C)}pauseMediaSection(m){this.findMediaSection(m).pause()}resumeSendingMediaSection(m){this.findMediaSection(m).resume()}resumeReceivingMediaSection(m){this.findMediaSection(m).resume()}disableMediaSection(m){this.findMediaSection(m).disable()}closeMediaSection(m){const L=this.findMediaSection(m);return m===this._firstMid?(A.debug("closeMediaSection() | cannot close first media section, disabling it instead [mid:%s]",m),this.disableMediaSection(m),!1):(L.close(),this.regenerateBundleMids(),!0)}muxMediaSectionSimulcast(m,L){const T=this.findMediaSection(m);T.muxSimulcastStreams(L),this.replaceMediaSection(T)}sendSctpAssociation({offerMediaObject:m}){const L=new _.AnswerMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,offerMediaObject:m});this.addMediaSection(L)}receiveSctpAssociation(){const m=new _.OfferMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,mid:"datachannel",kind:"application"});this.addMediaSection(m)}getSdp(){return this._sdpObject.origin.sessionVersion++,y.write(this._sdpObject)}addMediaSection(m){this._firstMid||(this._firstMid=m.mid),this._mediaSections.push(m),this._midToIndex.set(m.mid,this._mediaSections.length-1),this._sdpObject.media.push(m.getObject()),this.regenerateBundleMids()}replaceMediaSection(m,L){if(typeof L=="string"){const T=this._midToIndex.get(L);if(T===void 0)throw new Error(`no media section found for reuseMid '${L}'`);const u=this._mediaSections[T];this._mediaSections[T]=m,this._midToIndex.delete(u.mid),this._midToIndex.set(m.mid,T),this._sdpObject.media[T]=m.getObject(),this.regenerateBundleMids()}else{const T=this._midToIndex.get(m.mid);if(T===void 0)throw new Error(`no media section found with mid '${m.mid}'`);this._mediaSections[T]=m,this._sdpObject.media[T]=m.getObject()}}findMediaSection(m){const L=this._midToIndex.get(m);if(L===void 0)throw new Error(`no media section found with mid '${m}'`);return this._mediaSections[L]}regenerateBundleMids(){this._dtlsParameters&&(this._sdpObject.groups[0].mids=this._mediaSections.filter(m=>!m.closed).map(m=>m.mid).join(" "))}};return Ji.RemoteSdp=N,Ji}var Aa={},lh;function lr(){if(lh)return Aa;lh=1,Object.defineProperty(Aa,"__esModule",{value:!0}),Aa.extractRtpCapabilities=w,Aa.extractDtlsParameters=_,Aa.getCname=s,Aa.applyCodecParameters=A,Aa.addHeaderExtension=N;const y=za();function w({sdpObject:R}){const m=new Map,L=new Map;for(const u of R.media){const S=u.type;switch(S){case"audio":case"video":break;default:continue}for(const C of u.rtp){const H={kind:S,mimeType:`${S}/${C.codec}`,preferredPayloadType:C.payload,clockRate:C.rate,channels:C.encoding,parameters:{},rtcpFeedback:[]};m.set(H.preferredPayloadType,H)}for(const C of u.fmtp??[]){const H=y.parseParams(C.config),k=m.get(C.payload);k&&(H?.hasOwnProperty("profile-level-id")&&(H["profile-level-id"]=String(H["profile-level-id"])),k.parameters=H)}for(const C of u.rtcpFb??[]){const H={type:C.type,parameter:C.subtype};if(H.parameter||delete H.parameter,C.payload!=="*"){const k=m.get(Number(C.payload));if(!k)continue;k.rtcpFeedback.push(H)}else for(const k of m.values())k.kind===S&&!/.+\/rtx$/i.test(k.mimeType)&&k.rtcpFeedback.push(H)}for(const C of u.ext??[]){if(C["encrypt-uri"])continue;const H={kind:S,uri:C.uri,preferredId:C.value};L.set(H.preferredId,H)}}return{codecs:Array.from(m.values()),headerExtensions:Array.from(L.values())}}function _({sdpObject:R}){let m=R.setup,L=R.fingerprint;if(!m||!L){const S=(R.media??[]).find(C=>C.port!==0);S&&(m=m??S.setup,L=L??S.fingerprint)}if(m){if(!L)throw new Error("no a=fingerprint found at SDP session or media level")}else throw new Error("no a=setup found at SDP session or media level");let T;switch(m){case"active":{T="client";break}case"passive":{T="server";break}case"actpass":{T="auto";break}}return{role:T,fingerprints:[{algorithm:L.type,value:L.hash}]}}function s({offerMediaObject:R}){const m=(R.ssrcs??[]).find(L=>L.attribute==="cname");return m?m.value:""}function A({offerRtpParameters:R,answerMediaObject:m}){for(const L of R.codecs){const T=L.mimeType.toLowerCase();if(T!=="audio/opus"||!(m.rtp??[]).find(H=>H.payload===L.payloadType))continue;m.fmtp=m.fmtp??[];let S=m.fmtp.find(H=>H.payload===L.payloadType);S||(S={payload:L.payloadType,config:""},m.fmtp.push(S));const C=y.parseParams(S.config);if(T==="audio/opus"){const H=L.parameters?.["sprop-stereo"];H!==void 0&&(C.stereo=Number(H)?1:0)}S.config="";for(const H of Object.keys(C))S.config&&(S.config+=";"),S.config+=`${H}=${C[H]}`}}function N({offerMediaObject:R,headerExtensionUri:m,headerExtensionId:L}){R.ext||(R.ext=[]),R.ext.push({uri:m,value:L})}return Aa}var $i={},uh;function ur(){if(uh)return $i;uh=1,Object.defineProperty($i,"__esModule",{value:!0}),$i.getRtpEncodings=y,$i.addLegacySimulcast=w;function y({offerMediaObject:_}){const s=new Set;for(const R of _.ssrcs??[]){const m=R.id;m&&s.add(m)}if(s.size===0)throw new Error("no a=ssrc lines found");const A=new Map;for(const R of _.ssrcGroups??[]){if(R.semantics!=="FID")continue;const m=R.ssrcs.split(/\s+/),L=Number(m[0]),T=Number(m[1]);s.has(L)&&(s.delete(L),s.delete(T),A.set(L,T))}for(const R of s)A.set(R,void 0);const N=[];for(const[R,m]of A){const L={ssrc:R};m&&(L.rtx={ssrc:m}),N.push(L)}return N}function w({offerMediaObject:_,numStreams:s}){if(s<=1)throw new TypeError("numStreams must be greater than 1");const A=(_.ssrcs??[]).find(H=>H.attribute==="msid");if(!A)throw new Error("a=ssrc line with msid information not found");const[N,R]=A.value.split(" "),m=Number(A.id);let L;(_.ssrcGroups??[]).some(H=>{if(H.semantics!=="FID")return!1;const k=H.ssrcs.split(/\s+/);return Number(k[0])===m?(L=Number(k[1]),!0):!1});const T=(_.ssrcs??[]).find(H=>H.attribute==="cname");if(!T)throw new Error("a=ssrc line with cname information not found");const u=T.value,S=[],C=[];for(let H=0;H<s;++H)S.push(m+H),L&&C.push(L+H);_.ssrcGroups=[],_.ssrcs=[],_.ssrcGroups.push({semantics:"SIM",ssrcs:S.join(" ")});for(const H of S)_.ssrcs.push({id:H,attribute:"cname",value:u}),_.ssrcs.push({id:H,attribute:"msid",value:`${N} ${R}`});for(let H=0;H<C.length;++H){const k=S[H],c=C[H];_.ssrcs.push({id:c,attribute:"cname",value:u}),_.ssrcs.push({id:c,attribute:"msid",value:`${N} ${R}`}),_.ssrcGroups.push({semantics:"FID",ssrcs:`${k} ${c}`})}}return $i}var Qn={},dh;function dr(){if(dh)return Qn;dh=1,Object.defineProperty(Qn,"__esModule",{value:!0}),Qn.addNackSupportForOpus=y,Qn.addHeaderExtensionSupport=w,Qn.getMsidStreamIdAndTrackId=_;function y(s){for(const A of s.codecs??[])(A.mimeType.toLowerCase()==="audio/opus"||A.mimeType.toLowerCase()==="audio/multiopus")&&!A.rtcpFeedback?.some(N=>N.type==="nack"&&!N.parameter)&&(A.rtcpFeedback||(A.rtcpFeedback=[]),A.rtcpFeedback.push({type:"nack"}))}function w(s,A){let N;const R=s.headerExtensions?.find(L=>L.uri===A.uri);if(R){if(R.kind===A.kind)return;N=R.preferredId}if(s.headerExtensions||(s.headerExtensions=[]),N===void 0){N=1;const L=new Set(s.headerExtensions.map(T=>T.preferredId));for(;L.has(N);)++N}const m={kind:A.kind,uri:A.uri,preferredId:N,preferredEncrypt:!1,direction:A.direction};s.headerExtensions.push(m)}function _(s){if(!s||typeof s!="string")return{msidStreamId:void 0,msidTrackId:void 0};const[A,N]=s.trim().split(/\s+/);return A?{msidStreamId:A,msidTrackId:N}:{msidStreamId:void 0,msidTrackId:void 0}}return Qn}var fh;function Ov(){if(fh)return Ki;fh=1,Object.defineProperty(Ki,"__esModule",{value:!0}),Ki.Chrome111=void 0;const y=za(),w=St(),_=lt(),s=sa(),A=jt(),N=Pn(),R=or(),m=lr(),L=ur(),T=dr(),u=new _.Logger("Chrome111"),S="Chrome111",C={OS:1024,MIS:1024};let H=class Ns extends w.EnhancedEventEmitter{_closed=!1;_direction;_remoteSdp;_getSendExtendedRtpCapabilities;_forcedLocalDtlsRole;_pc;_mapMidTransceiver=new Map;_sendStream=new MediaStream;_hasDataChannelMediaSection=!1;_nextSendSctpStreamId=0;_transportReady=!1;static createFactory(){return{name:S,factory:c=>new Ns(c),getNativeRtpCapabilities:async()=>{u.debug("getNativeRtpCapabilities()");let c=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"});try{c.addTransceiver("audio"),c.addTransceiver("video",{sendEncodings:[{scalabilityMode:"L3T3"}]});const l=await c.createOffer();try{c.close()}catch{}c=void 0;const d=y.parse(l.sdp);return Ns.getLocalRtpCapabilities(d)}catch(l){try{c?.close()}catch{}throw c=void 0,l}},getNativeSctpCapabilities:async()=>(u.debug("getNativeSctpCapabilities()"),{numStreams:C})}}static getLocalRtpCapabilities(c,l=[]){const d=m.extractRtpCapabilities({sdpObject:c});s.validateAndNormalizeRtpCapabilities(d),T.addNackSupportForOpus(d);for(const g of l)T.addHeaderExtensionSupport(d,g);return d}constructor({direction:c,iceParameters:l,iceCandidates:d,dtlsParameters:g,sctpParameters:x,iceServers:E,iceTransportPolicy:M,additionalSettings:b,getSendExtendedRtpCapabilities:f}){super(),u.debug("constructor()"),this._direction=c,this._remoteSdp=new R.RemoteSdp({iceParameters:l,iceCandidates:d,dtlsParameters:g,sctpParameters:x}),this._getSendExtendedRtpCapabilities=f,g.role&&g.role!=="auto"&&(this._forcedLocalDtlsRole=g.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:E??[],iceTransportPolicy:M??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...b}),this._pc.addEventListener("icegatheringstatechange",this.onIceGatheringStateChange),this._pc.addEventListener("icecandidateerror",this.onIceCandidateError),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",this.onConnectionStateChange):(u.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.addEventListener("iceconnectionstatechange",this.onIceConnectionStateChange))}get name(){return S}close(){if(u.debug("close()"),!this._closed){this._closed=!0;try{this._pc.close()}catch{}this._pc.removeEventListener("icegatheringstatechange",this.onIceGatheringStateChange),this._pc.removeEventListener("icecandidateerror",this.onIceCandidateError),this._pc.removeEventListener("connectionstatechange",this.onConnectionStateChange),this._pc.removeEventListener("iceconnectionstatechange",this.onIceConnectionStateChange),this.emit("@close"),super.close()}}async updateIceServers(c){this.assertNotClosed(),u.debug("updateIceServers()");const l=this._pc.getConfiguration();l.iceServers=c,this._pc.setConfiguration(l)}async restartIce(c){if(this.assertNotClosed(),u.debug("restartIce()"),this._remoteSdp.updateIceParameters(c),!!this._transportReady)if(this._direction==="send"){const l=await this._pc.createOffer({iceRestart:!0});u.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);const d={type:"answer",sdp:this._remoteSdp.getSdp()};u.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",d),await this._pc.setRemoteDescription(d)}else{const l={type:"offer",sdp:this._remoteSdp.getSdp()};u.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",l),await this._pc.setRemoteDescription(l);const d=await this._pc.createAnswer();u.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",d),await this._pc.setLocalDescription(d)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:c,streamId:l,encodings:d,codecOptions:g,headerExtensionOptions:x,codec:E,onRtpSender:M}){if(this.assertNotClosed(),this.assertSendDirection(),u.debug("send() [kind:%s, track.id:%s, streamId:%s]",c.kind,c.id,l),d&&d.length>1){let K=1;for(const te of d){const ne=te.scalabilityMode?(0,N.parse)(te.scalabilityMode).temporalLayers:3;ne>K&&(K=ne)}d.forEach((te,ne)=>{te.rid=`r${ne}`,te.scalabilityMode=`L1T${K}`})}const b=this._remoteSdp.getNextMediaSectionIdx(),f=this._pc.addTransceiver(c,{direction:"sendonly",streams:[this._sendStream],sendEncodings:d});M&&M(f.sender);let v=await this._pc.createOffer(),O=y.parse(v.sdp);O.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed();const q=[];q.push({uri:"http://www.webrtc.org/experiments/rtp-hdrext/abs-capture-time",kind:c.kind,direction:"sendonly"});const W=Ns.getLocalRtpCapabilities(O,q),ee=this._getSendExtendedRtpCapabilities(W),h=s.getSendingRtpParameters(c.kind,ee);h.codecs=s.reduceCodecs(h.codecs,E);const Q=s.getSendingRemoteRtpParameters(c.kind,ee);if(Q.codecs=s.reduceCodecs(Q.codecs,E),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:O}),x?.absCaptureTime){const K=O.media[b.idx];m.addHeaderExtension({offerMediaObject:K,headerExtensionUri:"http://www.webrtc.org/experiments/rtp-hdrext/abs-capture-time",headerExtensionId:Q.headerExtensions.find(te=>te.uri==="http://www.webrtc.org/experiments/rtp-hdrext/abs-capture-time").id}),v={type:"offer",sdp:y.write(O)}}u.debug("send() | calling pc.setLocalDescription() [offer:%o]",v),await this._pc.setLocalDescription(v);const I=f.mid;h.mid=I,O=y.parse(this._pc.localDescription.sdp);const D=O.media[b.idx];if(h.rtcp.cname=m.getCname({offerMediaObject:D}),h.msid=`${l??this._sendStream.id} ${c.id}`,!d)h.encodings=L.getRtpEncodings({offerMediaObject:D});else if(d.length===1){const K=L.getRtpEncodings({offerMediaObject:D});Object.assign(K[0],d[0]),h.encodings=K}else h.encodings=d;this._remoteSdp.send({offerMediaObject:D,reuseMid:b.reuseMid,offerRtpParameters:h,answerRtpParameters:Q,codecOptions:g});const G={type:"answer",sdp:this._remoteSdp.getSdp()};return u.debug("send() | calling pc.setRemoteDescription() [answer:%o]",G),await this._pc.setRemoteDescription(G),this._mapMidTransceiver.set(I,f),{localId:I,rtpParameters:h,rtpSender:f.sender}}async stopSending(c){if(this.assertSendDirection(),u.debug("stopSending() [localId:%s]",c),this._closed)return;const l=this._mapMidTransceiver.get(c);if(!l)throw new Error("associated RTCRtpTransceiver not found");if(l.sender.replaceTrack(null),this._pc.removeTrack(l.sender),this._remoteSdp.closeMediaSection(l.mid))try{l.stop()}catch{}const g=await this._pc.createOffer();u.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",g),await this._pc.setLocalDescription(g);const x={type:"answer",sdp:this._remoteSdp.getSdp()};u.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",x),await this._pc.setRemoteDescription(x),this._mapMidTransceiver.delete(c)}async pauseSending(c){this.assertNotClosed(),this.assertSendDirection(),u.debug("pauseSending() [localId:%s]",c);const l=this._mapMidTransceiver.get(c);if(!l)throw new Error("associated RTCRtpTransceiver not found");l.direction="inactive",this._remoteSdp.pauseMediaSection(c);const d=await this._pc.createOffer();u.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",d),await this._pc.setLocalDescription(d);const g={type:"answer",sdp:this._remoteSdp.getSdp()};u.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",g),await this._pc.setRemoteDescription(g)}async resumeSending(c){this.assertNotClosed(),this.assertSendDirection(),u.debug("resumeSending() [localId:%s]",c);const l=this._mapMidTransceiver.get(c);if(this._remoteSdp.resumeSendingMediaSection(c),!l)throw new Error("associated RTCRtpTransceiver not found");l.direction="sendonly";const d=await this._pc.createOffer();u.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",d),await this._pc.setLocalDescription(d);const g={type:"answer",sdp:this._remoteSdp.getSdp()};u.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",g),await this._pc.setRemoteDescription(g)}async replaceTrack(c,l){this.assertNotClosed(),this.assertSendDirection(),l?u.debug("replaceTrack() [localId:%s, track.id:%s]",c,l.id):u.debug("replaceTrack() [localId:%s, no track]",c);const d=this._mapMidTransceiver.get(c);if(!d)throw new Error("associated RTCRtpTransceiver not found");await d.sender.replaceTrack(l)}async setMaxSpatialLayer(c,l){this.assertNotClosed(),this.assertSendDirection(),u.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",c,l);const d=this._mapMidTransceiver.get(c);if(!d)throw new Error("associated RTCRtpTransceiver not found");const g=d.sender.getParameters();g.encodings.forEach((M,b)=>{b<=l?M.active=!0:M.active=!1}),await d.sender.setParameters(g),this._remoteSdp.muxMediaSectionSimulcast(c,g.encodings);const x=await this._pc.createOffer();u.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",x),await this._pc.setLocalDescription(x);const E={type:"answer",sdp:this._remoteSdp.getSdp()};u.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",E),await this._pc.setRemoteDescription(E)}async setRtpEncodingParameters(c,l){this.assertNotClosed(),this.assertSendDirection(),u.debug("setRtpEncodingParameters() [localId:%s, params:%o]",c,l);const d=this._mapMidTransceiver.get(c);if(!d)throw new Error("associated RTCRtpTransceiver not found");const g=d.sender.getParameters();g.encodings.forEach((M,b)=>{g.encodings[b]={...M,...l}}),await d.sender.setParameters(g),this._remoteSdp.muxMediaSectionSimulcast(c,g.encodings);const x=await this._pc.createOffer();u.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",x),await this._pc.setLocalDescription(x);const E={type:"answer",sdp:this._remoteSdp.getSdp()};u.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",E),await this._pc.setRemoteDescription(E)}async getSenderStats(c){this.assertNotClosed(),this.assertSendDirection();const l=this._mapMidTransceiver.get(c);if(!l)throw new Error("associated RTCRtpTransceiver not found");return l.sender.getStats()}async sendDataChannel({ordered:c,maxPacketLifeTime:l,maxRetransmits:d,label:g,protocol:x}){this.assertNotClosed(),this.assertSendDirection();const E={negotiated:!0,id:this._nextSendSctpStreamId,ordered:c,maxPacketLifeTime:l,maxRetransmits:d,protocol:x};u.debug("sendDataChannel() [options:%o]",E);const M=this._pc.createDataChannel(g,E);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%C.MIS,!this._hasDataChannelMediaSection){const f=await this._pc.createOffer(),v=y.parse(f.sdp),O=v.media.find(W=>W.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:v}),u.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",f),await this._pc.setLocalDescription(f),this._remoteSdp.sendSctpAssociation({offerMediaObject:O});const q={type:"answer",sdp:this._remoteSdp.getSdp()};u.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",q),await this._pc.setRemoteDescription(q),this._hasDataChannelMediaSection=!0}const b={streamId:E.id,ordered:E.ordered,maxPacketLifeTime:E.maxPacketLifeTime,maxRetransmits:E.maxRetransmits};return{dataChannel:M,sctpStreamParameters:b}}async receive(c){this.assertNotClosed(),this.assertRecvDirection();const l=[],d=new Map;for(const M of c){const{trackId:b,kind:f,rtpParameters:v,streamId:O}=M;u.debug("receive() [trackId:%s, kind:%s]",b,f);const q=v.mid??String(this._mapMidTransceiver.size);d.set(b,q);const{msidStreamId:W}=T.getMsidStreamIdAndTrackId(v.msid);this._remoteSdp.receive({mid:q,kind:f,offerRtpParameters:v,streamId:O??W??v.rtcp?.cname??"-",trackId:b})}const g={type:"offer",sdp:this._remoteSdp.getSdp()};u.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",g),await this._pc.setRemoteDescription(g);for(const M of c){const{trackId:b,onRtpReceiver:f}=M;if(f){const v=d.get(b),O=this._pc.getTransceivers().find(q=>q.mid===v);if(!O)throw new Error("transceiver not found");f(O.receiver)}}let x=await this._pc.createAnswer();const E=y.parse(x.sdp);for(const M of c){const{trackId:b,rtpParameters:f}=M,v=d.get(b),O=E.media.find(q=>String(q.mid)===v);m.applyCodecParameters({offerRtpParameters:f,answerMediaObject:O})}x={type:"answer",sdp:y.write(E)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:E}),u.debug("receive() | calling pc.setLocalDescription() [answer:%o]",x),await this._pc.setLocalDescription(x);for(const M of c){const{trackId:b}=M,f=d.get(b),v=this._pc.getTransceivers().find(O=>O.mid===f);if(v)this._mapMidTransceiver.set(f,v),l.push({localId:f,track:v.receiver.track,rtpReceiver:v.receiver});else throw new Error("new RTCRtpTransceiver not found")}return l}async stopReceiving(c){if(this.assertRecvDirection(),this._closed)return;for(const g of c){u.debug("stopReceiving() [localId:%s]",g);const x=this._mapMidTransceiver.get(g);if(!x)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(x.mid)}const l={type:"offer",sdp:this._remoteSdp.getSdp()};u.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",l),await this._pc.setRemoteDescription(l);const d=await this._pc.createAnswer();u.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",d),await this._pc.setLocalDescription(d);for(const g of c)this._mapMidTransceiver.delete(g)}async pauseReceiving(c){this.assertNotClosed(),this.assertRecvDirection();for(const g of c){u.debug("pauseReceiving() [localId:%s]",g);const x=this._mapMidTransceiver.get(g);if(!x)throw new Error("associated RTCRtpTransceiver not found");x.direction="inactive",this._remoteSdp.pauseMediaSection(g)}const l={type:"offer",sdp:this._remoteSdp.getSdp()};u.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",l),await this._pc.setRemoteDescription(l);const d=await this._pc.createAnswer();u.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",d),await this._pc.setLocalDescription(d)}async resumeReceiving(c){this.assertNotClosed(),this.assertRecvDirection();for(const g of c){u.debug("resumeReceiving() [localId:%s]",g);const x=this._mapMidTransceiver.get(g);if(!x)throw new Error("associated RTCRtpTransceiver not found");x.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(g)}const l={type:"offer",sdp:this._remoteSdp.getSdp()};u.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",l),await this._pc.setRemoteDescription(l);const d=await this._pc.createAnswer();u.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",d),await this._pc.setLocalDescription(d)}async getReceiverStats(c){this.assertNotClosed(),this.assertRecvDirection();const l=this._mapMidTransceiver.get(c);if(!l)throw new Error("associated RTCRtpTransceiver not found");return l.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:c,label:l,protocol:d}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:g,ordered:x,maxPacketLifeTime:E,maxRetransmits:M}=c,b={negotiated:!0,id:g,ordered:x,maxPacketLifeTime:E,maxRetransmits:M,protocol:d};u.debug("receiveDataChannel() [options:%o]",b);const f=this._pc.createDataChannel(l,b);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const v={type:"offer",sdp:this._remoteSdp.getSdp()};u.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",v),await this._pc.setRemoteDescription(v);const O=await this._pc.createAnswer();if(!this._transportReady){const q=y.parse(O.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:q})}u.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",O),await this._pc.setLocalDescription(O),this._hasDataChannelMediaSection=!0}return{dataChannel:f}}async setupTransport({localDtlsRole:c,localSdpObject:l}){l||(l=y.parse(this._pc.localDescription.sdp));const d=m.extractDtlsParameters({sdpObject:l});d.role=c,this._remoteSdp.updateDtlsRole(c==="client"?"server":"client"),await new Promise((g,x)=>{this.safeEmit("@connect",{dtlsParameters:d},g,x)}),this._transportReady=!0}onIceGatheringStateChange=()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)};onIceCandidateError=c=>{this.emit("@icecandidateerror",c)};onConnectionStateChange=()=>{this.emit("@connectionstatechange",this._pc.connectionState)};onIceConnectionStateChange=()=>{switch(this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}};assertNotClosed(){if(this._closed)throw new A.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}};return Ki.Chrome111=H,Ki}var Wi={},ph;function Lv(){if(ph)return Wi;ph=1,Object.defineProperty(Wi,"__esModule",{value:!0}),Wi.Chrome74=void 0;const y=za(),w=lt(),_=St(),s=sa(),A=jt(),N=Pn(),R=or(),m=lr(),L=ur(),T=dr(),u=new w.Logger("Chrome74"),S="Chrome74",C={OS:1024,MIS:1024};let H=class ks extends _.EnhancedEventEmitter{_closed=!1;_direction;_remoteSdp;_getSendExtendedRtpCapabilities;_forcedLocalDtlsRole;_pc;_mapMidTransceiver=new Map;_sendStream=new MediaStream;_hasDataChannelMediaSection=!1;_nextSendSctpStreamId=0;_transportReady=!1;static createFactory(){return{name:S,factory:c=>new ks(c),getNativeRtpCapabilities:async()=>{u.debug("getNativeRtpCapabilities()");let c=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"});try{c.addTransceiver("audio"),c.addTransceiver("video");const l=await c.createOffer();try{c.close()}catch{}c=void 0;const d=y.parse(l.sdp);return ks.getLocalRtpCapabilities(d)}catch(l){try{c?.close()}catch{}throw c=void 0,l}},getNativeSctpCapabilities:async()=>(u.debug("getNativeSctpCapabilities()"),{numStreams:C})}}static getLocalRtpCapabilities(c,l=[]){const d=m.extractRtpCapabilities({sdpObject:c});s.validateAndNormalizeRtpCapabilities(d),T.addNackSupportForOpus(d);for(const g of l)T.addHeaderExtensionSupport(d,g);return d}constructor({direction:c,iceParameters:l,iceCandidates:d,dtlsParameters:g,sctpParameters:x,iceServers:E,iceTransportPolicy:M,additionalSettings:b,getSendExtendedRtpCapabilities:f}){super(),u.debug("constructor()"),this._direction=c,this._remoteSdp=new R.RemoteSdp({iceParameters:l,iceCandidates:d,dtlsParameters:g,sctpParameters:x}),this._getSendExtendedRtpCapabilities=f,g.role&&g.role!=="auto"&&(this._forcedLocalDtlsRole=g.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:E??[],iceTransportPolicy:M??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...b}),this._pc.addEventListener("icegatheringstatechange",this.onIceGatheringStateChange),this._pc.addEventListener("icecandidateerror",this.onIceCandidateError),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",this.onConnectionStateChange):(u.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.addEventListener("iceconnectionstatechange",this.onIceConnectionStateChange))}get name(){return S}close(){if(u.debug("close()"),!this._closed){this._closed=!0;try{this._pc.close()}catch{}this._pc.removeEventListener("icegatheringstatechange",this.onIceGatheringStateChange),this._pc.removeEventListener("icecandidateerror",this.onIceCandidateError),this._pc.removeEventListener("connectionstatechange",this.onConnectionStateChange),this._pc.removeEventListener("iceconnectionstatechange",this.onIceConnectionStateChange),this.emit("@close"),super.close()}}async updateIceServers(c){this.assertNotClosed(),u.debug("updateIceServers()");const l=this._pc.getConfiguration();l.iceServers=c,this._pc.setConfiguration(l)}async restartIce(c){if(this.assertNotClosed(),u.debug("restartIce()"),this._remoteSdp.updateIceParameters(c),!!this._transportReady)if(this._direction==="send"){const l=await this._pc.createOffer({iceRestart:!0});u.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);const d={type:"answer",sdp:this._remoteSdp.getSdp()};u.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",d),await this._pc.setRemoteDescription(d)}else{const l={type:"offer",sdp:this._remoteSdp.getSdp()};u.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",l),await this._pc.setRemoteDescription(l);const d=await this._pc.createAnswer();u.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",d),await this._pc.setLocalDescription(d)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:c,streamId:l,encodings:d,codecOptions:g,headerExtensionOptions:x,codec:E}){this.assertNotClosed(),this.assertSendDirection(),u.debug("send() [kind:%s, track.id:%s, streamId:%s]",c.kind,c.id,l),d&&d.length>1&&d.forEach((te,ne)=>{te.rid=`r${ne}`});const M=this._remoteSdp.getNextMediaSectionIdx(),b=this._pc.addTransceiver(c,{direction:"sendonly",streams:[this._sendStream],sendEncodings:d});let f=await this._pc.createOffer(),v=y.parse(f.sdp);v.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed();const O=[];O.push({uri:"http://www.webrtc.org/experiments/rtp-hdrext/abs-capture-time",kind:c.kind,direction:"sendonly"});const q=ks.getLocalRtpCapabilities(v,O),W=this._getSendExtendedRtpCapabilities(q),ee=s.getSendingRtpParameters(c.kind,W);ee.codecs=s.reduceCodecs(ee.codecs,E);const h=s.getSendingRemoteRtpParameters(c.kind,W);h.codecs=s.reduceCodecs(h.codecs,E),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:v});let Q=!1;const I=(0,N.parse)((d??[{}])[0].scalabilityMode);let D;d?.length===1&&I.spatialLayers>1&&ee.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(u.debug("send() | enabling legacy simulcast for VP9 SVC"),Q=!0,v=y.parse(f.sdp),D=v.media[M.idx],L.addLegacySimulcast({offerMediaObject:D,numStreams:I.spatialLayers}),f={type:"offer",sdp:y.write(v)}),u.debug("send() | calling pc.setLocalDescription() [offer:%o]",f),x?.absCaptureTime&&(D=v.media[M.idx],m.addHeaderExtension({offerMediaObject:D,headerExtensionUri:"http://www.webrtc.org/experiments/rtp-hdrext/abs-capture-time",headerExtensionId:h.headerExtensions.find(te=>te.uri==="http://www.webrtc.org/experiments/rtp-hdrext/abs-capture-time").id}),f={type:"offer",sdp:y.write(v)}),await this._pc.setLocalDescription(f);const G=b.mid;if(ee.mid=G,v=y.parse(this._pc.localDescription.sdp),D=v.media[M.idx],ee.rtcp.cname=m.getCname({offerMediaObject:D}),ee.msid=`${l??this._sendStream.id} ${c.id}`,!d)ee.encodings=L.getRtpEncodings({offerMediaObject:D});else if(d.length===1){let te=L.getRtpEncodings({offerMediaObject:D});Object.assign(te[0],d[0]),Q&&(te=[te[0]]),ee.encodings=te}else ee.encodings=d;if(ee.encodings.length>1&&(ee.codecs[0].mimeType.toLowerCase()==="video/vp8"||ee.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const te of ee.encodings)te.scalabilityMode?te.scalabilityMode=`L1T${I.temporalLayers}`:te.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:D,reuseMid:M.reuseMid,offerRtpParameters:ee,answerRtpParameters:h,codecOptions:g});const K={type:"answer",sdp:this._remoteSdp.getSdp()};return u.debug("send() | calling pc.setRemoteDescription() [answer:%o]",K),await this._pc.setRemoteDescription(K),this._mapMidTransceiver.set(G,b),{localId:G,rtpParameters:ee,rtpSender:b.sender}}async stopSending(c){if(this.assertSendDirection(),u.debug("stopSending() [localId:%s]",c),this._closed)return;const l=this._mapMidTransceiver.get(c);if(!l)throw new Error("associated RTCRtpTransceiver not found");if(l.sender.replaceTrack(null),this._pc.removeTrack(l.sender),this._remoteSdp.closeMediaSection(l.mid))try{l.stop()}catch{}const g=await this._pc.createOffer();u.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",g),await this._pc.setLocalDescription(g);const x={type:"answer",sdp:this._remoteSdp.getSdp()};u.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",x),await this._pc.setRemoteDescription(x),this._mapMidTransceiver.delete(c)}async pauseSending(c){this.assertNotClosed(),this.assertSendDirection(),u.debug("pauseSending() [localId:%s]",c);const l=this._mapMidTransceiver.get(c);if(!l)throw new Error("associated RTCRtpTransceiver not found");l.direction="inactive",this._remoteSdp.pauseMediaSection(c);const d=await this._pc.createOffer();u.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",d),await this._pc.setLocalDescription(d);const g={type:"answer",sdp:this._remoteSdp.getSdp()};u.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",g),await this._pc.setRemoteDescription(g)}async resumeSending(c){this.assertNotClosed(),this.assertSendDirection(),u.debug("resumeSending() [localId:%s]",c);const l=this._mapMidTransceiver.get(c);if(this._remoteSdp.resumeSendingMediaSection(c),!l)throw new Error("associated RTCRtpTransceiver not found");l.direction="sendonly";const d=await this._pc.createOffer();u.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",d),await this._pc.setLocalDescription(d);const g={type:"answer",sdp:this._remoteSdp.getSdp()};u.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",g),await this._pc.setRemoteDescription(g)}async replaceTrack(c,l){this.assertNotClosed(),this.assertSendDirection(),l?u.debug("replaceTrack() [localId:%s, track.id:%s]",c,l.id):u.debug("replaceTrack() [localId:%s, no track]",c);const d=this._mapMidTransceiver.get(c);if(!d)throw new Error("associated RTCRtpTransceiver not found");await d.sender.replaceTrack(l)}async setMaxSpatialLayer(c,l){this.assertNotClosed(),this.assertSendDirection(),u.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",c,l);const d=this._mapMidTransceiver.get(c);if(!d)throw new Error("associated RTCRtpTransceiver not found");const g=d.sender.getParameters();g.encodings.forEach((M,b)=>{b<=l?M.active=!0:M.active=!1}),await d.sender.setParameters(g),this._remoteSdp.muxMediaSectionSimulcast(c,g.encodings);const x=await this._pc.createOffer();u.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",x),await this._pc.setLocalDescription(x);const E={type:"answer",sdp:this._remoteSdp.getSdp()};u.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",E),await this._pc.setRemoteDescription(E)}async setRtpEncodingParameters(c,l){this.assertNotClosed(),this.assertSendDirection(),u.debug("setRtpEncodingParameters() [localId:%s, params:%o]",c,l);const d=this._mapMidTransceiver.get(c);if(!d)throw new Error("associated RTCRtpTransceiver not found");const g=d.sender.getParameters();g.encodings.forEach((M,b)=>{g.encodings[b]={...M,...l}}),await d.sender.setParameters(g),this._remoteSdp.muxMediaSectionSimulcast(c,g.encodings);const x=await this._pc.createOffer();u.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",x),await this._pc.setLocalDescription(x);const E={type:"answer",sdp:this._remoteSdp.getSdp()};u.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",E),await this._pc.setRemoteDescription(E)}async getSenderStats(c){this.assertNotClosed(),this.assertSendDirection();const l=this._mapMidTransceiver.get(c);if(!l)throw new Error("associated RTCRtpTransceiver not found");return l.sender.getStats()}async sendDataChannel({ordered:c,maxPacketLifeTime:l,maxRetransmits:d,label:g,protocol:x}){this.assertNotClosed(),this.assertSendDirection();const E={negotiated:!0,id:this._nextSendSctpStreamId,ordered:c,maxPacketLifeTime:l,maxRetransmits:d,protocol:x};u.debug("sendDataChannel() [options:%o]",E);const M=this._pc.createDataChannel(g,E);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%C.MIS,!this._hasDataChannelMediaSection){const f=await this._pc.createOffer(),v=y.parse(f.sdp),O=v.media.find(W=>W.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:v}),u.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",f),await this._pc.setLocalDescription(f),this._remoteSdp.sendSctpAssociation({offerMediaObject:O});const q={type:"answer",sdp:this._remoteSdp.getSdp()};u.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",q),await this._pc.setRemoteDescription(q),this._hasDataChannelMediaSection=!0}const b={streamId:E.id,ordered:E.ordered,maxPacketLifeTime:E.maxPacketLifeTime,maxRetransmits:E.maxRetransmits};return{dataChannel:M,sctpStreamParameters:b}}async receive(c){this.assertNotClosed(),this.assertRecvDirection();const l=[],d=new Map;for(const M of c){const{trackId:b,kind:f,rtpParameters:v,streamId:O}=M;u.debug("receive() [trackId:%s, kind:%s]",b,f);const q=v.mid??String(this._mapMidTransceiver.size);d.set(b,q);const{msidStreamId:W}=T.getMsidStreamIdAndTrackId(v.msid);this._remoteSdp.receive({mid:q,kind:f,offerRtpParameters:v,streamId:O??W??v.rtcp?.cname??"-",trackId:b})}const g={type:"offer",sdp:this._remoteSdp.getSdp()};u.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",g),await this._pc.setRemoteDescription(g);let x=await this._pc.createAnswer();const E=y.parse(x.sdp);for(const M of c){const{trackId:b,rtpParameters:f}=M,v=d.get(b),O=E.media.find(q=>String(q.mid)===v);m.applyCodecParameters({offerRtpParameters:f,answerMediaObject:O})}x={type:"answer",sdp:y.write(E)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:E}),u.debug("receive() | calling pc.setLocalDescription() [answer:%o]",x),await this._pc.setLocalDescription(x);for(const M of c){const{trackId:b}=M,f=d.get(b),v=this._pc.getTransceivers().find(O=>O.mid===f);if(v)this._mapMidTransceiver.set(f,v),l.push({localId:f,track:v.receiver.track,rtpReceiver:v.receiver});else throw new Error("new RTCRtpTransceiver not found")}return l}async stopReceiving(c){if(this.assertRecvDirection(),this._closed)return;for(const g of c){u.debug("stopReceiving() [localId:%s]",g);const x=this._mapMidTransceiver.get(g);if(!x)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(x.mid)}const l={type:"offer",sdp:this._remoteSdp.getSdp()};u.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",l),await this._pc.setRemoteDescription(l);const d=await this._pc.createAnswer();u.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",d),await this._pc.setLocalDescription(d);for(const g of c)this._mapMidTransceiver.delete(g)}async pauseReceiving(c){this.assertNotClosed(),this.assertRecvDirection();for(const g of c){u.debug("pauseReceiving() [localId:%s]",g);const x=this._mapMidTransceiver.get(g);if(!x)throw new Error("associated RTCRtpTransceiver not found");x.direction="inactive",this._remoteSdp.pauseMediaSection(g)}const l={type:"offer",sdp:this._remoteSdp.getSdp()};u.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",l),await this._pc.setRemoteDescription(l);const d=await this._pc.createAnswer();u.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",d),await this._pc.setLocalDescription(d)}async resumeReceiving(c){this.assertNotClosed(),this.assertRecvDirection();for(const g of c){u.debug("resumeReceiving() [localId:%s]",g);const x=this._mapMidTransceiver.get(g);if(!x)throw new Error("associated RTCRtpTransceiver not found");x.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(g)}const l={type:"offer",sdp:this._remoteSdp.getSdp()};u.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",l),await this._pc.setRemoteDescription(l);const d=await this._pc.createAnswer();u.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",d),await this._pc.setLocalDescription(d)}async getReceiverStats(c){this.assertNotClosed(),this.assertRecvDirection();const l=this._mapMidTransceiver.get(c);if(!l)throw new Error("associated RTCRtpTransceiver not found");return l.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:c,label:l,protocol:d}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:g,ordered:x,maxPacketLifeTime:E,maxRetransmits:M}=c,b={negotiated:!0,id:g,ordered:x,maxPacketLifeTime:E,maxRetransmits:M,protocol:d};u.debug("receiveDataChannel() [options:%o]",b);const f=this._pc.createDataChannel(l,b);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const v={type:"offer",sdp:this._remoteSdp.getSdp()};u.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",v),await this._pc.setRemoteDescription(v);const O=await this._pc.createAnswer();if(!this._transportReady){const q=y.parse(O.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:q})}u.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",O),await this._pc.setLocalDescription(O),this._hasDataChannelMediaSection=!0}return{dataChannel:f}}async setupTransport({localDtlsRole:c,localSdpObject:l}){l||(l=y.parse(this._pc.localDescription.sdp));const d=m.extractDtlsParameters({sdpObject:l});d.role=c,this._remoteSdp.updateDtlsRole(c==="client"?"server":"client"),await new Promise((g,x)=>{this.safeEmit("@connect",{dtlsParameters:d},g,x)}),this._transportReady=!0}onIceGatheringStateChange=()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)};onIceCandidateError=c=>{this.emit("@icecandidateerror",c)};onConnectionStateChange=()=>{this.emit("@connectionstatechange",this._pc.connectionState)};onIceConnectionStateChange=()=>{switch(this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}};assertNotClosed(){if(this._closed)throw new A.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}};return Wi.Chrome74=H,Wi}var er={},hh;function Av(){if(hh)return er;hh=1,Object.defineProperty(er,"__esModule",{value:!0}),er.Firefox120=void 0;const y=za(),w=St(),_=lt(),s=jt(),A=sa(),N=Pn(),R=or(),m=lr(),L=ur(),T=dr(),u=new _.Logger("Firefox120"),S="Firefox120",C={OS:16,MIS:2048};let H=class js extends w.EnhancedEventEmitter{_closed=!1;_direction;_remoteSdp;_getSendExtendedRtpCapabilities;_pc;_mapMidTransceiver=new Map;_sendStream=new MediaStream;_hasDataChannelMediaSection=!1;_nextSendSctpStreamId=0;_transportReady=!1;static createFactory(){return{name:S,factory:c=>new js(c),getNativeRtpCapabilities:async()=>{u.debug("getNativeRtpCapabilities()");let c=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"});const l=document.createElement("canvas");l.getContext("2d");const g=l.captureStream().getVideoTracks()[0];try{c.addTransceiver("audio",{direction:"sendrecv"}),c.addTransceiver(g,{direction:"sendrecv",sendEncodings:[{rid:"r0",maxBitrate:1e5},{rid:"r1",maxBitrate:5e5}]});const x=await c.createOffer();try{l.remove()}catch{}try{g.stop()}catch{}try{c.close()}catch{}c=void 0;const E=y.parse(x.sdp);return js.getLocalRtpCapabilities(E)}catch(x){try{l.remove()}catch{}try{g.stop()}catch{}try{c?.close()}catch{}throw c=void 0,x}},getNativeSctpCapabilities:async()=>(u.debug("getNativeSctpCapabilities()"),{numStreams:C})}}static getLocalRtpCapabilities(c){const l=m.extractRtpCapabilities({sdpObject:c});return A.validateAndNormalizeRtpCapabilities(l),l}constructor({direction:c,iceParameters:l,iceCandidates:d,dtlsParameters:g,sctpParameters:x,iceServers:E,iceTransportPolicy:M,additionalSettings:b,getSendExtendedRtpCapabilities:f}){super(),u.debug("constructor()"),this._direction=c,this._remoteSdp=new R.RemoteSdp({iceParameters:l,iceCandidates:d,dtlsParameters:g,sctpParameters:x}),this._getSendExtendedRtpCapabilities=f,this._pc=new RTCPeerConnection({iceServers:E??[],iceTransportPolicy:M??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...b}),this._pc.addEventListener("icegatheringstatechange",this.onIceGatheringStateChange),this._pc.addEventListener("icecandidateerror",this.onIceCandidateError),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",this.onConnectionStateChange):(u.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.addEventListener("iceconnectionstatechange",this.onIceConnectionStateChange))}get name(){return S}close(){if(u.debug("close()"),!this._closed){this._closed=!0;try{this._pc.close()}catch{}this._pc.removeEventListener("icegatheringstatechange",this.onIceGatheringStateChange),this._pc.removeEventListener("icecandidateerror",this.onIceCandidateError),this._pc.removeEventListener("connectionstatechange",this.onConnectionStateChange),this._pc.removeEventListener("iceconnectionstatechange",this.onIceConnectionStateChange),this.emit("@close"),super.close()}}async updateIceServers(c){throw this.assertNotClosed(),new s.UnsupportedError("not supported")}async restartIce(c){if(this.assertNotClosed(),u.debug("restartIce()"),this._remoteSdp.updateIceParameters(c),!!this._transportReady)if(this._direction==="send"){const l=await this._pc.createOffer({iceRestart:!0});u.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);const d={type:"answer",sdp:this._remoteSdp.getSdp()};u.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",d),await this._pc.setRemoteDescription(d)}else{const l={type:"offer",sdp:this._remoteSdp.getSdp()};u.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",l),await this._pc.setRemoteDescription(l);const d=await this._pc.createAnswer();u.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",d),await this._pc.setLocalDescription(d)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:c,streamId:l,encodings:d,codecOptions:g,codec:x,onRtpSender:E}){this.assertNotClosed(),this.assertSendDirection(),u.debug("send() [kind:%s, track.id:%s, streamId:%s]",c.kind,c.id,l),d&&d.length>1&&d.forEach((D,G)=>{D.rid=`r${G}`});const M=this._pc.addTransceiver(c,{direction:"sendonly",streams:[this._sendStream],sendEncodings:d});E&&E(M.sender);const b=await this._pc.createOffer();let f=y.parse(b.sdp);f.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed();const v=js.getLocalRtpCapabilities(f),O=this._getSendExtendedRtpCapabilities(v),q=A.getSendingRtpParameters(c.kind,O);q.codecs=A.reduceCodecs(q.codecs,x);const W=A.getSendingRemoteRtpParameters(c.kind,O);W.codecs=A.reduceCodecs(W.codecs,x),this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:f});const ee=(0,N.parse)((d??[{}])[0].scalabilityMode);u.debug("send() | calling pc.setLocalDescription() [offer:%o]",b),await this._pc.setLocalDescription(b);const h=M.mid;q.mid=h,f=y.parse(this._pc.localDescription.sdp);const Q=f.media[f.media.length-1];if(q.rtcp.cname=m.getCname({offerMediaObject:Q}),q.msid=`${l??this._sendStream.id} ${c.id}`,!d)q.encodings=L.getRtpEncodings({offerMediaObject:Q});else if(d.length===1){const D=L.getRtpEncodings({offerMediaObject:Q});Object.assign(D[0],d[0]),q.encodings=D}else q.encodings=d;if(q.encodings.length>1&&(q.codecs[0].mimeType.toLowerCase()==="video/vp8"||q.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const D of q.encodings)D.scalabilityMode?D.scalabilityMode=`L1T${ee.temporalLayers}`:D.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:Q,offerRtpParameters:q,answerRtpParameters:W,codecOptions:g});const I={type:"answer",sdp:this._remoteSdp.getSdp()};return u.debug("send() | calling pc.setRemoteDescription() [answer:%o]",I),await this._pc.setRemoteDescription(I),this._mapMidTransceiver.set(h,M),{localId:h,rtpParameters:q,rtpSender:M.sender}}async stopSending(c){if(this.assertSendDirection(),u.debug("stopSending() [localId:%s]",c),this._closed)return;const l=this._mapMidTransceiver.get(c);if(!l)throw new Error("associated transceiver not found");l.sender.replaceTrack(null),this._pc.removeTrack(l.sender),this._remoteSdp.disableMediaSection(l.mid);const d=await this._pc.createOffer();u.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",d),await this._pc.setLocalDescription(d);const g={type:"answer",sdp:this._remoteSdp.getSdp()};u.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",g),await this._pc.setRemoteDescription(g),this._mapMidTransceiver.delete(c)}async pauseSending(c){this.assertNotClosed(),this.assertSendDirection(),u.debug("pauseSending() [localId:%s]",c);const l=this._mapMidTransceiver.get(c);if(!l)throw new Error("associated RTCRtpTransceiver not found");l.direction="inactive",this._remoteSdp.pauseMediaSection(c);const d=await this._pc.createOffer();u.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",d),await this._pc.setLocalDescription(d);const g={type:"answer",sdp:this._remoteSdp.getSdp()};u.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",g),await this._pc.setRemoteDescription(g)}async resumeSending(c){this.assertNotClosed(),this.assertSendDirection(),u.debug("resumeSending() [localId:%s]",c);const l=this._mapMidTransceiver.get(c);if(!l)throw new Error("associated RTCRtpTransceiver not found");l.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(c);const d=await this._pc.createOffer();u.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",d),await this._pc.setLocalDescription(d);const g={type:"answer",sdp:this._remoteSdp.getSdp()};u.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",g),await this._pc.setRemoteDescription(g)}async replaceTrack(c,l){this.assertNotClosed(),this.assertSendDirection(),l?u.debug("replaceTrack() [localId:%s, track.id:%s]",c,l.id):u.debug("replaceTrack() [localId:%s, no track]",c);const d=this._mapMidTransceiver.get(c);if(!d)throw new Error("associated RTCRtpTransceiver not found");await d.sender.replaceTrack(l)}async setMaxSpatialLayer(c,l){this.assertNotClosed(),this.assertSendDirection(),u.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",c,l);const d=this._mapMidTransceiver.get(c);if(!d)throw new Error("associated transceiver not found");const g=d.sender.getParameters();g.encodings.forEach((M,b)=>{b<=l?M.active=!0:M.active=!1}),await d.sender.setParameters(g),this._remoteSdp.muxMediaSectionSimulcast(c,g.encodings);const x=await this._pc.createOffer();u.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",x),await this._pc.setLocalDescription(x);const E={type:"answer",sdp:this._remoteSdp.getSdp()};u.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",E),await this._pc.setRemoteDescription(E)}async setRtpEncodingParameters(c,l){this.assertNotClosed(),this.assertSendDirection(),u.debug("setRtpEncodingParameters() [localId:%s, params:%o]",c,l);const d=this._mapMidTransceiver.get(c);if(!d)throw new Error("associated RTCRtpTransceiver not found");const g=d.sender.getParameters();g.encodings.forEach((M,b)=>{g.encodings[b]={...M,...l}}),await d.sender.setParameters(g),this._remoteSdp.muxMediaSectionSimulcast(c,g.encodings);const x=await this._pc.createOffer();u.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",x),await this._pc.setLocalDescription(x);const E={type:"answer",sdp:this._remoteSdp.getSdp()};u.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",E),await this._pc.setRemoteDescription(E)}async getSenderStats(c){this.assertNotClosed(),this.assertSendDirection();const l=this._mapMidTransceiver.get(c);if(!l)throw new Error("associated RTCRtpTransceiver not found");return l.sender.getStats()}async sendDataChannel({ordered:c,maxPacketLifeTime:l,maxRetransmits:d,label:g,protocol:x}){this.assertNotClosed(),this.assertSendDirection();const E={negotiated:!0,id:this._nextSendSctpStreamId,ordered:c,maxPacketLifeTime:l,maxRetransmits:d,protocol:x};u.debug("sendDataChannel() [options:%o]",E);const M=this._pc.createDataChannel(g,E);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%C.MIS,!this._hasDataChannelMediaSection){const f=await this._pc.createOffer(),v=y.parse(f.sdp),O=v.media.find(W=>W.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:v}),u.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",f),await this._pc.setLocalDescription(f),this._remoteSdp.sendSctpAssociation({offerMediaObject:O});const q={type:"answer",sdp:this._remoteSdp.getSdp()};u.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",q),await this._pc.setRemoteDescription(q),this._hasDataChannelMediaSection=!0}const b={streamId:E.id,ordered:E.ordered,maxPacketLifeTime:E.maxPacketLifeTime,maxRetransmits:E.maxRetransmits};return{dataChannel:M,sctpStreamParameters:b}}async receive(c){this.assertNotClosed(),this.assertRecvDirection();const l=[],d=new Map;for(const M of c){const{trackId:b,kind:f,rtpParameters:v,streamId:O}=M;u.debug("receive() [trackId:%s, kind:%s]",b,f);const q=v.mid??String(this._mapMidTransceiver.size);d.set(b,q);const{msidStreamId:W}=T.getMsidStreamIdAndTrackId(v.msid);this._remoteSdp.receive({mid:q,kind:f,offerRtpParameters:v,streamId:O??W??v.rtcp?.cname??"-",trackId:b})}const g={type:"offer",sdp:this._remoteSdp.getSdp()};u.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",g),await this._pc.setRemoteDescription(g);for(const M of c){const{trackId:b,onRtpReceiver:f}=M;if(f){const v=d.get(b),O=this._pc.getTransceivers().find(q=>q.mid===v);if(!O)throw new Error("transceiver not found");f(O.receiver)}}let x=await this._pc.createAnswer();const E=y.parse(x.sdp);for(const M of c){const{trackId:b,rtpParameters:f}=M,v=d.get(b),O=E.media.find(q=>String(q.mid)===v);m.applyCodecParameters({offerRtpParameters:f,answerMediaObject:O}),x={type:"answer",sdp:y.write(E)}}this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:E}),u.debug("receive() | calling pc.setLocalDescription() [answer:%o]",x),await this._pc.setLocalDescription(x);for(const M of c){const{trackId:b}=M,f=d.get(b),v=this._pc.getTransceivers().find(O=>O.mid===f);if(!v)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(f,v),l.push({localId:f,track:v.receiver.track,rtpReceiver:v.receiver})}return l}async stopReceiving(c){if(this.assertRecvDirection(),this._closed)return;for(const g of c){u.debug("stopReceiving() [localId:%s]",g);const x=this._mapMidTransceiver.get(g);if(!x)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(x.mid)}const l={type:"offer",sdp:this._remoteSdp.getSdp()};u.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",l),await this._pc.setRemoteDescription(l);const d=await this._pc.createAnswer();u.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",d),await this._pc.setLocalDescription(d);for(const g of c)this._mapMidTransceiver.delete(g)}async pauseReceiving(c){this.assertNotClosed(),this.assertRecvDirection();for(const g of c){u.debug("pauseReceiving() [localId:%s]",g);const x=this._mapMidTransceiver.get(g);if(!x)throw new Error("associated RTCRtpTransceiver not found");x.direction="inactive",this._remoteSdp.pauseMediaSection(g)}const l={type:"offer",sdp:this._remoteSdp.getSdp()};u.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",l),await this._pc.setRemoteDescription(l);const d=await this._pc.createAnswer();u.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",d),await this._pc.setLocalDescription(d)}async resumeReceiving(c){this.assertNotClosed(),this.assertRecvDirection();for(const g of c){u.debug("resumeReceiving() [localId:%s]",g);const x=this._mapMidTransceiver.get(g);if(!x)throw new Error("associated RTCRtpTransceiver not found");x.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(g)}const l={type:"offer",sdp:this._remoteSdp.getSdp()};u.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",l),await this._pc.setRemoteDescription(l);const d=await this._pc.createAnswer();u.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",d),await this._pc.setLocalDescription(d)}async getReceiverStats(c){this.assertRecvDirection();const l=this._mapMidTransceiver.get(c);if(!l)throw new Error("associated RTCRtpTransceiver not found");return l.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:c,label:l,protocol:d}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:g,ordered:x,maxPacketLifeTime:E,maxRetransmits:M}=c,b={negotiated:!0,id:g,ordered:x,maxPacketLifeTime:E,maxRetransmits:M,protocol:d};u.debug("receiveDataChannel() [options:%o]",b);const f=this._pc.createDataChannel(l,b);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const v={type:"offer",sdp:this._remoteSdp.getSdp()};u.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",v),await this._pc.setRemoteDescription(v);const O=await this._pc.createAnswer();if(!this._transportReady){const q=y.parse(O.sdp);await this.setupTransport({localDtlsRole:"client",localSdpObject:q})}u.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",O),await this._pc.setLocalDescription(O),this._hasDataChannelMediaSection=!0}return{dataChannel:f}}async setupTransport({localDtlsRole:c,localSdpObject:l}){l||(l=y.parse(this._pc.localDescription.sdp));const d=m.extractDtlsParameters({sdpObject:l});d.role=c,this._remoteSdp.updateDtlsRole(c==="client"?"server":"client"),await new Promise((g,x)=>{this.safeEmit("@connect",{dtlsParameters:d},g,x)}),this._transportReady=!0}onIceGatheringStateChange=()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)};onIceCandidateError=c=>{this.emit("@icecandidateerror",c)};onConnectionStateChange=()=>{this.emit("@connectionstatechange",this._pc.connectionState)};onIceConnectionStateChange=()=>{switch(this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}};assertNotClosed(){if(this._closed)throw new s.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}};return er.Firefox120=H,er}var tr={},mh;function zv(){if(mh)return tr;mh=1,Object.defineProperty(tr,"__esModule",{value:!0}),tr.Safari12=void 0;const y=za(),w=St(),_=lt(),s=sa(),A=jt(),N=Pn(),R=or(),m=lr(),L=ur(),T=dr(),u=new _.Logger("Safari12"),S="Safari12",C={OS:1024,MIS:1024};let H=class Us extends w.EnhancedEventEmitter{_closed=!1;_direction;_remoteSdp;_getSendExtendedRtpCapabilities;_forcedLocalDtlsRole;_pc;_mapMidTransceiver=new Map;_sendStream=new MediaStream;_hasDataChannelMediaSection=!1;_nextSendSctpStreamId=0;_transportReady=!1;static createFactory(){return{name:S,factory:c=>new Us(c),getNativeRtpCapabilities:async()=>{u.debug("getNativeRtpCapabilities()");let c=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"});try{c.addTransceiver("audio"),c.addTransceiver("video");const l=await c.createOffer();try{c.close()}catch{}c=void 0;const d=y.parse(l.sdp);return Us.getLocalRtpCapabilities(d)}catch(l){try{c?.close()}catch{}throw c=void 0,l}},getNativeSctpCapabilities:async()=>(u.debug("getNativeSctpCapabilities()"),{numStreams:C})}}static getLocalRtpCapabilities(c,l=[]){const d=m.extractRtpCapabilities({sdpObject:c});s.validateAndNormalizeRtpCapabilities(d),T.addNackSupportForOpus(d);for(const g of l)T.addHeaderExtensionSupport(d,g);return d}constructor({direction:c,iceParameters:l,iceCandidates:d,dtlsParameters:g,sctpParameters:x,iceServers:E,iceTransportPolicy:M,additionalSettings:b,getSendExtendedRtpCapabilities:f}){super(),u.debug("constructor()"),this._direction=c,this._remoteSdp=new R.RemoteSdp({iceParameters:l,iceCandidates:d,dtlsParameters:g,sctpParameters:x}),this._getSendExtendedRtpCapabilities=f,g.role&&g.role!=="auto"&&(this._forcedLocalDtlsRole=g.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:E??[],iceTransportPolicy:M??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...b}),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",v=>{this.emit("@icecandidateerror",v)}),this._pc.addEventListener("icegatheringstatechange",this.onIceGatheringStateChange),this._pc.addEventListener("icecandidateerror",this.onIceCandidateError),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",this.onConnectionStateChange):(u.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.addEventListener("iceconnectionstatechange",this.onIceConnectionStateChange))}get name(){return S}close(){if(u.debug("close()"),!this._closed){this._closed=!0;try{this._pc.close()}catch{}this._pc.removeEventListener("icegatheringstatechange",this.onIceGatheringStateChange),this._pc.removeEventListener("icecandidateerror",this.onIceCandidateError),this._pc.removeEventListener("connectionstatechange",this.onConnectionStateChange),this._pc.removeEventListener("iceconnectionstatechange",this.onIceConnectionStateChange),this.emit("@close"),super.close()}}async updateIceServers(c){this.assertNotClosed(),u.debug("updateIceServers()");const l=this._pc.getConfiguration();l.iceServers=c,this._pc.setConfiguration(l)}async restartIce(c){if(this.assertNotClosed(),u.debug("restartIce()"),this._remoteSdp.updateIceParameters(c),!!this._transportReady)if(this._direction==="send"){const l=await this._pc.createOffer({iceRestart:!0});u.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);const d={type:"answer",sdp:this._remoteSdp.getSdp()};u.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",d),await this._pc.setRemoteDescription(d)}else{const l={type:"offer",sdp:this._remoteSdp.getSdp()};u.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",l),await this._pc.setRemoteDescription(l);const d=await this._pc.createAnswer();u.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",d),await this._pc.setLocalDescription(d)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:c,streamId:l,encodings:d,codecOptions:g,headerExtensionOptions:x,codec:E,onRtpSender:M}){this.assertNotClosed(),this.assertSendDirection(),u.debug("send() [kind:%s, track.id:%s, streamId:%s]",c.kind,c.id,l);const b=this._remoteSdp.getNextMediaSectionIdx(),f=this._pc.addTransceiver(c,{direction:"sendonly",streams:[this._sendStream]});M&&M(f.sender);let v=await this._pc.createOffer(),O=y.parse(v.sdp);O.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed();const q=[];q.push({uri:"http://www.webrtc.org/experiments/rtp-hdrext/abs-capture-time",kind:c.kind,direction:"sendonly"});const W=Us.getLocalRtpCapabilities(O,q),ee=this._getSendExtendedRtpCapabilities(W),h=s.getSendingRtpParameters(c.kind,ee);h.codecs=s.reduceCodecs(h.codecs,E);const Q=s.getSendingRemoteRtpParameters(c.kind,ee);Q.codecs=s.reduceCodecs(Q.codecs,E);let I;this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:O});const D=(0,N.parse)((d??[{}])[0].scalabilityMode);d&&d.length>1&&(u.debug("send() | enabling legacy simulcast"),O=y.parse(v.sdp),I=O.media[b.idx],L.addLegacySimulcast({offerMediaObject:I,numStreams:d.length}),v={type:"offer",sdp:y.write(O)}),x?.absCaptureTime&&(I=O.media[b.idx],m.addHeaderExtension({offerMediaObject:I,headerExtensionUri:"http://www.webrtc.org/experiments/rtp-hdrext/abs-capture-time",headerExtensionId:Q.headerExtensions.find(te=>te.uri==="http://www.webrtc.org/experiments/rtp-hdrext/abs-capture-time").id}),v={type:"offer",sdp:y.write(O)}),u.debug("send() | calling pc.setLocalDescription() [offer:%o]",v),await this._pc.setLocalDescription(v);const G=f.mid;if(h.mid=G,O=y.parse(this._pc.localDescription.sdp),I=O.media[b.idx],h.rtcp.cname=m.getCname({offerMediaObject:I}),h.msid=`${l??this._sendStream.id} ${c.id}`,h.encodings=L.getRtpEncodings({offerMediaObject:I}),d)for(let te=0;te<h.encodings.length;++te)d[te]&&Object.assign(h.encodings[te],d[te]);if(h.encodings.length>1&&(h.codecs[0].mimeType.toLowerCase()==="video/vp8"||h.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const te of h.encodings)te.scalabilityMode?te.scalabilityMode=`L1T${D.temporalLayers}`:te.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:I,reuseMid:b.reuseMid,offerRtpParameters:h,answerRtpParameters:Q,codecOptions:g});const K={type:"answer",sdp:this._remoteSdp.getSdp()};return u.debug("send() | calling pc.setRemoteDescription() [answer:%o]",K),await this._pc.setRemoteDescription(K),this._mapMidTransceiver.set(G,f),{localId:G,rtpParameters:h,rtpSender:f.sender}}async stopSending(c){if(this.assertSendDirection(),this._closed)return;u.debug("stopSending() [localId:%s]",c);const l=this._mapMidTransceiver.get(c);if(!l)throw new Error("associated RTCRtpTransceiver not found");if(l.sender.replaceTrack(null),this._pc.removeTrack(l.sender),this._remoteSdp.closeMediaSection(l.mid))try{l.stop()}catch{}const g=await this._pc.createOffer();u.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",g),await this._pc.setLocalDescription(g);const x={type:"answer",sdp:this._remoteSdp.getSdp()};u.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",x),await this._pc.setRemoteDescription(x),this._mapMidTransceiver.delete(c)}async pauseSending(c){this.assertNotClosed(),this.assertSendDirection(),u.debug("pauseSending() [localId:%s]",c);const l=this._mapMidTransceiver.get(c);if(!l)throw new Error("associated RTCRtpTransceiver not found");l.direction="inactive",this._remoteSdp.pauseMediaSection(c);const d=await this._pc.createOffer();u.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",d),await this._pc.setLocalDescription(d);const g={type:"answer",sdp:this._remoteSdp.getSdp()};u.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",g),await this._pc.setRemoteDescription(g)}async resumeSending(c){this.assertNotClosed(),this.assertSendDirection(),u.debug("resumeSending() [localId:%s]",c);const l=this._mapMidTransceiver.get(c);if(!l)throw new Error("associated RTCRtpTransceiver not found");l.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(c);const d=await this._pc.createOffer();u.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",d),await this._pc.setLocalDescription(d);const g={type:"answer",sdp:this._remoteSdp.getSdp()};u.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",g),await this._pc.setRemoteDescription(g)}async replaceTrack(c,l){this.assertNotClosed(),this.assertSendDirection(),l?u.debug("replaceTrack() [localId:%s, track.id:%s]",c,l.id):u.debug("replaceTrack() [localId:%s, no track]",c);const d=this._mapMidTransceiver.get(c);if(!d)throw new Error("associated RTCRtpTransceiver not found");await d.sender.replaceTrack(l)}async setMaxSpatialLayer(c,l){this.assertNotClosed(),this.assertSendDirection(),u.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",c,l);const d=this._mapMidTransceiver.get(c);if(!d)throw new Error("associated RTCRtpTransceiver not found");const g=d.sender.getParameters();g.encodings.forEach((M,b)=>{b<=l?M.active=!0:M.active=!1}),await d.sender.setParameters(g),this._remoteSdp.muxMediaSectionSimulcast(c,g.encodings);const x=await this._pc.createOffer();u.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",x),await this._pc.setLocalDescription(x);const E={type:"answer",sdp:this._remoteSdp.getSdp()};u.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",E),await this._pc.setRemoteDescription(E)}async setRtpEncodingParameters(c,l){this.assertNotClosed(),this.assertSendDirection(),u.debug("setRtpEncodingParameters() [localId:%s, params:%o]",c,l);const d=this._mapMidTransceiver.get(c);if(!d)throw new Error("associated RTCRtpTransceiver not found");const g=d.sender.getParameters();g.encodings.forEach((M,b)=>{g.encodings[b]={...M,...l}}),await d.sender.setParameters(g),this._remoteSdp.muxMediaSectionSimulcast(c,g.encodings);const x=await this._pc.createOffer();u.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",x),await this._pc.setLocalDescription(x);const E={type:"answer",sdp:this._remoteSdp.getSdp()};u.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",E),await this._pc.setRemoteDescription(E)}async getSenderStats(c){this.assertNotClosed(),this.assertSendDirection();const l=this._mapMidTransceiver.get(c);if(!l)throw new Error("associated RTCRtpTransceiver not found");return l.sender.getStats()}async sendDataChannel({ordered:c,maxPacketLifeTime:l,maxRetransmits:d,label:g,protocol:x}){this.assertNotClosed(),this.assertSendDirection();const E={negotiated:!0,id:this._nextSendSctpStreamId,ordered:c,maxPacketLifeTime:l,maxRetransmits:d,protocol:x};u.debug("sendDataChannel() [options:%o]",E);const M=this._pc.createDataChannel(g,E);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%C.MIS,!this._hasDataChannelMediaSection){const f=await this._pc.createOffer(),v=y.parse(f.sdp),O=v.media.find(W=>W.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:v}),u.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",f),await this._pc.setLocalDescription(f),this._remoteSdp.sendSctpAssociation({offerMediaObject:O});const q={type:"answer",sdp:this._remoteSdp.getSdp()};u.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",q),await this._pc.setRemoteDescription(q),this._hasDataChannelMediaSection=!0}const b={streamId:E.id,ordered:E.ordered,maxPacketLifeTime:E.maxPacketLifeTime,maxRetransmits:E.maxRetransmits};return{dataChannel:M,sctpStreamParameters:b}}async receive(c){this.assertNotClosed(),this.assertRecvDirection();const l=[],d=new Map;for(const M of c){const{trackId:b,kind:f,rtpParameters:v,streamId:O}=M;u.debug("receive() [trackId:%s, kind:%s]",b,f);const q=v.mid??String(this._mapMidTransceiver.size);d.set(b,q);const{msidStreamId:W}=T.getMsidStreamIdAndTrackId(v.msid);this._remoteSdp.receive({mid:q,kind:f,offerRtpParameters:v,streamId:O??W??v.rtcp?.cname??"-",trackId:b})}const g={type:"offer",sdp:this._remoteSdp.getSdp()};u.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",g),await this._pc.setRemoteDescription(g);for(const M of c){const{trackId:b,onRtpReceiver:f}=M;if(f){const v=d.get(b),O=this._pc.getTransceivers().find(q=>q.mid===v);if(!O)throw new Error("transceiver not found");f(O.receiver)}}let x=await this._pc.createAnswer();const E=y.parse(x.sdp);for(const M of c){const{trackId:b,rtpParameters:f}=M,v=d.get(b),O=E.media.find(q=>String(q.mid)===v);m.applyCodecParameters({offerRtpParameters:f,answerMediaObject:O})}x={type:"answer",sdp:y.write(E)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:E}),u.debug("receive() | calling pc.setLocalDescription() [answer:%o]",x),await this._pc.setLocalDescription(x);for(const M of c){const{trackId:b}=M,f=d.get(b),v=this._pc.getTransceivers().find(O=>O.mid===f);if(!v)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(f,v),l.push({localId:f,track:v.receiver.track,rtpReceiver:v.receiver})}return l}async stopReceiving(c){if(this.assertRecvDirection(),this._closed)return;for(const g of c){u.debug("stopReceiving() [localId:%s]",g);const x=this._mapMidTransceiver.get(g);if(!x)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(x.mid)}const l={type:"offer",sdp:this._remoteSdp.getSdp()};u.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",l),await this._pc.setRemoteDescription(l);const d=await this._pc.createAnswer();u.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",d),await this._pc.setLocalDescription(d);for(const g of c)this._mapMidTransceiver.delete(g)}async pauseReceiving(c){this.assertNotClosed(),this.assertRecvDirection();for(const g of c){u.debug("pauseReceiving() [localId:%s]",g);const x=this._mapMidTransceiver.get(g);if(!x)throw new Error("associated RTCRtpTransceiver not found");x.direction="inactive",this._remoteSdp.pauseMediaSection(g)}const l={type:"offer",sdp:this._remoteSdp.getSdp()};u.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",l),await this._pc.setRemoteDescription(l);const d=await this._pc.createAnswer();u.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",d),await this._pc.setLocalDescription(d)}async resumeReceiving(c){this.assertNotClosed(),this.assertRecvDirection();for(const g of c){u.debug("resumeReceiving() [localId:%s]",g);const x=this._mapMidTransceiver.get(g);if(!x)throw new Error("associated RTCRtpTransceiver not found");x.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(g)}const l={type:"offer",sdp:this._remoteSdp.getSdp()};u.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",l),await this._pc.setRemoteDescription(l);const d=await this._pc.createAnswer();u.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",d),await this._pc.setLocalDescription(d)}async getReceiverStats(c){this.assertNotClosed(),this.assertRecvDirection();const l=this._mapMidTransceiver.get(c);if(!l)throw new Error("associated RTCRtpTransceiver not found");return l.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:c,label:l,protocol:d}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:g,ordered:x,maxPacketLifeTime:E,maxRetransmits:M}=c,b={negotiated:!0,id:g,ordered:x,maxPacketLifeTime:E,maxRetransmits:M,protocol:d};u.debug("receiveDataChannel() [options:%o]",b);const f=this._pc.createDataChannel(l,b);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const v={type:"offer",sdp:this._remoteSdp.getSdp()};u.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",v),await this._pc.setRemoteDescription(v);const O=await this._pc.createAnswer();if(!this._transportReady){const q=y.parse(O.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:q})}u.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",O),await this._pc.setLocalDescription(O),this._hasDataChannelMediaSection=!0}return{dataChannel:f}}async setupTransport({localDtlsRole:c,localSdpObject:l}){l||(l=y.parse(this._pc.localDescription.sdp));const d=m.extractDtlsParameters({sdpObject:l});d.role=c,this._remoteSdp.updateDtlsRole(c==="client"?"server":"client"),await new Promise((g,x)=>{this.safeEmit("@connect",{dtlsParameters:d},g,x)}),this._transportReady=!0}onIceGatheringStateChange=()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)};onIceCandidateError=c=>{this.emit("@icecandidateerror",c)};onConnectionStateChange=()=>{this.emit("@connectionstatechange",this._pc.connectionState)};onIceConnectionStateChange=()=>{switch(this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}};assertNotClosed(){if(this._closed)throw new A.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}};return tr.Safari12=H,tr}var ar={},gh;function Nv(){if(gh)return ar;gh=1,Object.defineProperty(ar,"__esModule",{value:!0}),ar.ReactNative106=void 0;const y=za(),w=St(),_=lt(),s=sa(),A=jt(),N=Pn(),R=or(),m=lr(),L=ur(),T=dr(),u=new _.Logger("ReactNative106"),S="ReactNative106",C={OS:1024,MIS:1024};let H=class qs extends w.EnhancedEventEmitter{_closed=!1;_direction;_remoteSdp;_getSendExtendedRtpCapabilities;_forcedLocalDtlsRole;_pc;_mapMidTransceiver=new Map;_sendStream=new MediaStream;_hasDataChannelMediaSection=!1;_nextSendSctpStreamId=0;_transportReady=!1;static createFactory(){return{name:S,factory:c=>new qs(c),getNativeRtpCapabilities:async()=>{u.debug("getNativeRtpCapabilities()");let c=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"});try{c.addTransceiver("audio"),c.addTransceiver("video");const l=await c.createOffer();try{c.close()}catch{}c=void 0;const d=y.parse(l.sdp);return qs.getLocalRtpCapabilities(d)}catch(l){try{c?.close()}catch{}throw c=void 0,l}},getNativeSctpCapabilities:async()=>(u.debug("getNativeSctpCapabilities()"),{numStreams:C})}}static getLocalRtpCapabilities(c,l=[]){const d=m.extractRtpCapabilities({sdpObject:c});s.validateAndNormalizeRtpCapabilities(d),T.addNackSupportForOpus(d);for(const g of l)T.addHeaderExtensionSupport(d,g);return d}constructor({direction:c,iceParameters:l,iceCandidates:d,dtlsParameters:g,sctpParameters:x,iceServers:E,iceTransportPolicy:M,additionalSettings:b,getSendExtendedRtpCapabilities:f}){super(),u.debug("constructor()"),this._direction=c,this._remoteSdp=new R.RemoteSdp({iceParameters:l,iceCandidates:d,dtlsParameters:g,sctpParameters:x}),this._getSendExtendedRtpCapabilities=f,g.role&&g.role!=="auto"&&(this._forcedLocalDtlsRole=g.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:E??[],iceTransportPolicy:M??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...b}),this._pc.addEventListener("icegatheringstatechange",this.onIceGatheringStateChange),this._pc.addEventListener("icecandidateerror",this.onIceCandidateError),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",this.onConnectionStateChange):(u.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.addEventListener("iceconnectionstatechange",this.onIceConnectionStateChange))}get name(){return S}close(){if(u.debug("close()"),!this._closed){this._closed=!0,this._sendStream.release(!1);try{this._pc.close()}catch{}this._pc.removeEventListener("icegatheringstatechange",this.onIceGatheringStateChange),this._pc.removeEventListener("icecandidateerror",this.onIceCandidateError),this._pc.removeEventListener("connectionstatechange",this.onConnectionStateChange),this._pc.removeEventListener("iceconnectionstatechange",this.onIceConnectionStateChange),this.emit("@close"),super.close()}}async updateIceServers(c){this.assertNotClosed(),u.debug("updateIceServers()");const l=this._pc.getConfiguration();l.iceServers=c,this._pc.setConfiguration(l)}async restartIce(c){if(this.assertNotClosed(),u.debug("restartIce()"),this._remoteSdp.updateIceParameters(c),!!this._transportReady)if(this._direction==="send"){const l=await this._pc.createOffer({iceRestart:!0});u.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);const d={type:"answer",sdp:this._remoteSdp.getSdp()};u.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",d),await this._pc.setRemoteDescription(d)}else{const l={type:"offer",sdp:this._remoteSdp.getSdp()};u.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",l),await this._pc.setRemoteDescription(l);const d=await this._pc.createAnswer();u.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",d),await this._pc.setLocalDescription(d)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:c,streamId:l,encodings:d,codecOptions:g,headerExtensionOptions:x,codec:E,onRtpSender:M}){this.assertNotClosed(),this.assertSendDirection(),u.debug("send() [kind:%s, track.id:%s, streamId:%s]",c.kind,c.id,l),d&&d.length>1&&d.forEach((ne,U)=>{ne.rid=`r${U}`});const b=this._remoteSdp.getNextMediaSectionIdx(),f=this._pc.addTransceiver(c,{direction:"sendonly",streams:[this._sendStream],sendEncodings:d});M&&M(f.sender);let v=await this._pc.createOffer(),O=y.parse(v.sdp);O.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed();const q=[];q.push({uri:"http://www.webrtc.org/experiments/rtp-hdrext/abs-capture-time",kind:c.kind,direction:"sendonly"});const W=qs.getLocalRtpCapabilities(O,q),ee=this._getSendExtendedRtpCapabilities(W),h=s.getSendingRtpParameters(c.kind,ee);h.codecs=s.reduceCodecs(h.codecs,E);const Q=s.getSendingRemoteRtpParameters(c.kind,ee);Q.codecs=s.reduceCodecs(Q.codecs,E),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:O});let I=!1;const D=(0,N.parse)((d??[{}])[0].scalabilityMode);let G;d?.length===1&&D.spatialLayers>1&&h.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(u.debug("send() | enabling legacy simulcast for VP9 SVC"),I=!0,O=y.parse(v.sdp),G=O.media[b.idx],L.addLegacySimulcast({offerMediaObject:G,numStreams:D.spatialLayers}),v={type:"offer",sdp:y.write(O)}),x?.absCaptureTime&&(G=O.media[b.idx],m.addHeaderExtension({offerMediaObject:G,headerExtensionUri:"http://www.webrtc.org/experiments/rtp-hdrext/abs-capture-time",headerExtensionId:Q.headerExtensions.find(ne=>ne.uri==="http://www.webrtc.org/experiments/rtp-hdrext/abs-capture-time").id}),v={type:"offer",sdp:y.write(O)}),u.debug("send() | calling pc.setLocalDescription() [offer:%o]",v),await this._pc.setLocalDescription(v);let K=f.mid??void 0;if(K||u.warn("send() | missing transceiver.mid (bug in react-native-webrtc, using a workaround"),h.mid=K,O=y.parse(this._pc.localDescription.sdp),G=O.media[b.idx],h.rtcp.cname=m.getCname({offerMediaObject:G}),h.msid=`${l??this._sendStream.id} ${c.id}`,!d)h.encodings=L.getRtpEncodings({offerMediaObject:G});else if(d.length===1){let ne=L.getRtpEncodings({offerMediaObject:G});Object.assign(ne[0],d[0]),I&&(ne=[ne[0]]),h.encodings=ne}else h.encodings=d;if(h.encodings.length>1&&(h.codecs[0].mimeType.toLowerCase()==="video/vp8"||h.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const ne of h.encodings)ne.scalabilityMode?ne.scalabilityMode=`L1T${D.temporalLayers}`:ne.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:G,reuseMid:b.reuseMid,offerRtpParameters:h,answerRtpParameters:Q,codecOptions:g});const te={type:"answer",sdp:this._remoteSdp.getSdp()};return u.debug("send() | calling pc.setRemoteDescription() [answer:%o]",te),await this._pc.setRemoteDescription(te),K||(K=f.mid,h.mid=K),this._mapMidTransceiver.set(K,f),{localId:K,rtpParameters:h,rtpSender:f.sender}}async stopSending(c){if(this.assertSendDirection(),this._closed)return;u.debug("stopSending() [localId:%s]",c);const l=this._mapMidTransceiver.get(c);if(!l)throw new Error("associated RTCRtpTransceiver not found");if(l.sender.replaceTrack(null),this._pc.removeTrack(l.sender),this._remoteSdp.closeMediaSection(l.mid))try{l.stop()}catch{}const g=await this._pc.createOffer();u.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",g),await this._pc.setLocalDescription(g);const x={type:"answer",sdp:this._remoteSdp.getSdp()};u.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",x),await this._pc.setRemoteDescription(x),this._mapMidTransceiver.delete(c)}async pauseSending(c){this.assertNotClosed(),this.assertSendDirection(),u.debug("pauseSending() [localId:%s]",c);const l=this._mapMidTransceiver.get(c);if(!l)throw new Error("associated RTCRtpTransceiver not found");l.direction="inactive",this._remoteSdp.pauseMediaSection(c);const d=await this._pc.createOffer();u.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",d),await this._pc.setLocalDescription(d);const g={type:"answer",sdp:this._remoteSdp.getSdp()};u.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",g),await this._pc.setRemoteDescription(g)}async resumeSending(c){this.assertNotClosed(),this.assertSendDirection(),u.debug("resumeSending() [localId:%s]",c);const l=this._mapMidTransceiver.get(c);if(this._remoteSdp.resumeSendingMediaSection(c),!l)throw new Error("associated RTCRtpTransceiver not found");l.direction="sendonly";const d=await this._pc.createOffer();u.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",d),await this._pc.setLocalDescription(d);const g={type:"answer",sdp:this._remoteSdp.getSdp()};u.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",g),await this._pc.setRemoteDescription(g)}async replaceTrack(c,l){this.assertNotClosed(),this.assertSendDirection(),l?u.debug("replaceTrack() [localId:%s, track.id:%s]",c,l.id):u.debug("replaceTrack() [localId:%s, no track]",c);const d=this._mapMidTransceiver.get(c);if(!d)throw new Error("associated RTCRtpTransceiver not found");await d.sender.replaceTrack(l)}async setMaxSpatialLayer(c,l){this.assertNotClosed(),this.assertSendDirection(),u.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",c,l);const d=this._mapMidTransceiver.get(c);if(!d)throw new Error("associated RTCRtpTransceiver not found");const g=d.sender.getParameters();g.encodings.forEach((M,b)=>{b<=l?M.active=!0:M.active=!1}),await d.sender.setParameters(g),this._remoteSdp.muxMediaSectionSimulcast(c,g.encodings);const x=await this._pc.createOffer();u.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",x),await this._pc.setLocalDescription(x);const E={type:"answer",sdp:this._remoteSdp.getSdp()};u.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",E),await this._pc.setRemoteDescription(E)}async setRtpEncodingParameters(c,l){this.assertNotClosed(),this.assertSendDirection(),u.debug("setRtpEncodingParameters() [localId:%s, params:%o]",c,l);const d=this._mapMidTransceiver.get(c);if(!d)throw new Error("associated RTCRtpTransceiver not found");const g=d.sender.getParameters();g.encodings.forEach((M,b)=>{g.encodings[b]={...M,...l}}),await d.sender.setParameters(g),this._remoteSdp.muxMediaSectionSimulcast(c,g.encodings);const x=await this._pc.createOffer();u.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",x),await this._pc.setLocalDescription(x);const E={type:"answer",sdp:this._remoteSdp.getSdp()};u.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",E),await this._pc.setRemoteDescription(E)}async getSenderStats(c){this.assertNotClosed(),this.assertSendDirection();const l=this._mapMidTransceiver.get(c);if(!l)throw new Error("associated RTCRtpTransceiver not found");return l.sender.getStats()}async sendDataChannel({ordered:c,maxPacketLifeTime:l,maxRetransmits:d,label:g,protocol:x}){this.assertNotClosed(),this.assertSendDirection();const E={negotiated:!0,id:this._nextSendSctpStreamId,ordered:c,maxPacketLifeTime:l,maxRetransmits:d,protocol:x};u.debug("sendDataChannel() [options:%o]",E);const M=this._pc.createDataChannel(g,E);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%C.MIS,!this._hasDataChannelMediaSection){const f=await this._pc.createOffer(),v=y.parse(f.sdp),O=v.media.find(W=>W.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:v}),u.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",f),await this._pc.setLocalDescription(f),this._remoteSdp.sendSctpAssociation({offerMediaObject:O});const q={type:"answer",sdp:this._remoteSdp.getSdp()};u.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",q),await this._pc.setRemoteDescription(q),this._hasDataChannelMediaSection=!0}const b={streamId:E.id,ordered:E.ordered,maxPacketLifeTime:E.maxPacketLifeTime,maxRetransmits:E.maxRetransmits};return{dataChannel:M,sctpStreamParameters:b}}async receive(c){this.assertNotClosed(),this.assertRecvDirection();const l=[],d=new Map;for(const M of c){const{trackId:b,kind:f,rtpParameters:v,streamId:O}=M;u.debug("receive() [trackId:%s, kind:%s]",b,f);const q=v.mid??String(this._mapMidTransceiver.size);d.set(b,q);const{msidStreamId:W}=T.getMsidStreamIdAndTrackId(v.msid);this._remoteSdp.receive({mid:q,kind:f,offerRtpParameters:v,streamId:O??W??v.rtcp?.cname??"-",trackId:b})}const g={type:"offer",sdp:this._remoteSdp.getSdp()};u.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",g),await this._pc.setRemoteDescription(g);for(const M of c){const{trackId:b,onRtpReceiver:f}=M;if(f){const v=d.get(b),O=this._pc.getTransceivers().find(q=>q.mid===v);if(!O)throw new Error("transceiver not found");f(O.receiver)}}let x=await this._pc.createAnswer();const E=y.parse(x.sdp);for(const M of c){const{trackId:b,rtpParameters:f}=M,v=d.get(b),O=E.media.find(q=>String(q.mid)===v);m.applyCodecParameters({offerRtpParameters:f,answerMediaObject:O})}x={type:"answer",sdp:y.write(E)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:E}),u.debug("receive() | calling pc.setLocalDescription() [answer:%o]",x),await this._pc.setLocalDescription(x);for(const M of c){const{trackId:b}=M,f=d.get(b),v=this._pc.getTransceivers().find(O=>O.mid===f);if(v)this._mapMidTransceiver.set(f,v),l.push({localId:f,track:v.receiver.track,rtpReceiver:v.receiver});else throw new Error("new RTCRtpTransceiver not found")}return l}async stopReceiving(c){if(this.assertRecvDirection(),this._closed)return;for(const g of c){u.debug("stopReceiving() [localId:%s]",g);const x=this._mapMidTransceiver.get(g);if(!x)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(x.mid)}const l={type:"offer",sdp:this._remoteSdp.getSdp()};u.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",l),await this._pc.setRemoteDescription(l);const d=await this._pc.createAnswer();u.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",d),await this._pc.setLocalDescription(d);for(const g of c)this._mapMidTransceiver.delete(g)}async pauseReceiving(c){this.assertNotClosed(),this.assertRecvDirection();for(const g of c){u.debug("pauseReceiving() [localId:%s]",g);const x=this._mapMidTransceiver.get(g);if(!x)throw new Error("associated RTCRtpTransceiver not found");x.direction="inactive",this._remoteSdp.pauseMediaSection(g)}const l={type:"offer",sdp:this._remoteSdp.getSdp()};u.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",l),await this._pc.setRemoteDescription(l);const d=await this._pc.createAnswer();u.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",d),await this._pc.setLocalDescription(d)}async resumeReceiving(c){this.assertNotClosed(),this.assertRecvDirection();for(const g of c){u.debug("resumeReceiving() [localId:%s]",g);const x=this._mapMidTransceiver.get(g);if(!x)throw new Error("associated RTCRtpTransceiver not found");x.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(g)}const l={type:"offer",sdp:this._remoteSdp.getSdp()};u.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",l),await this._pc.setRemoteDescription(l);const d=await this._pc.createAnswer();u.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",d),await this._pc.setLocalDescription(d)}async getReceiverStats(c){this.assertNotClosed(),this.assertRecvDirection();const l=this._mapMidTransceiver.get(c);if(!l)throw new Error("associated RTCRtpTransceiver not found");return l.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:c,label:l,protocol:d}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:g,ordered:x,maxPacketLifeTime:E,maxRetransmits:M}=c,b={negotiated:!0,id:g,ordered:x,maxPacketLifeTime:E,maxRetransmits:M,protocol:d};u.debug("receiveDataChannel() [options:%o]",b);const f=this._pc.createDataChannel(l,b);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const v={type:"offer",sdp:this._remoteSdp.getSdp()};u.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",v),await this._pc.setRemoteDescription(v);const O=await this._pc.createAnswer();if(!this._transportReady){const q=y.parse(O.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:q})}u.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",O),await this._pc.setLocalDescription(O),this._hasDataChannelMediaSection=!0}return{dataChannel:f}}async setupTransport({localDtlsRole:c,localSdpObject:l}){l||(l=y.parse(this._pc.localDescription.sdp));const d=m.extractDtlsParameters({sdpObject:l});d.role=c,this._remoteSdp.updateDtlsRole(c==="client"?"server":"client"),await new Promise((g,x)=>{this.safeEmit("@connect",{dtlsParameters:d},g,x)}),this._transportReady=!0}onIceGatheringStateChange=()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)};onIceCandidateError=c=>{this.emit("@icecandidateerror",c)};onConnectionStateChange=()=>{this.emit("@connectionstatechange",this._pc.connectionState)};onIceConnectionStateChange=()=>{switch(this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}};assertNotClosed(){if(this._closed)throw new A.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}};return ar.ReactNative106=H,ar}var vh;function kv(){if(vh)return Wa;vh=1,Object.defineProperty(Wa,"__esModule",{value:!0}),Wa.Device=void 0,Wa.detectDevice=C,Wa.detectDeviceAsync=H;const y=lt(),w=St(),_=jt(),s=Yn(),A=sa(),N=Rv(),R=Ov(),m=Lv(),L=Av(),T=zv(),u=Nv(),S=new y.Logger("Device");function C(b,f){return S.debug("detectDevice()"),!b&&typeof navigator=="object"&&(b=navigator.userAgent),!f&&typeof navigator=="object"&&(f=navigator.userAgentData),c(b,f)}async function H(b,f){return S.debug("detectDeviceAsync()"),!b&&typeof navigator=="object"&&(b=navigator.userAgent),!f&&typeof navigator=="object"&&(f=navigator.userAgentData),c(b,f)}let k=class Lh{_handlerFactory;_handlerName;_loaded=!1;_getSendExtendedRtpCapabilities;_recvRtpCapabilities;_canProduceByKind={audio:!1,video:!1};_sctpCapabilities;_observer=new w.EnhancedEventEmitter;static async factory({handlerName:f,handlerFactory:v}={}){if(S.debug("factory()"),f&&v)throw new TypeError("just one of handlerName or handlerInterface can be given");if(!f&&!v&&(f=await H(),!f))throw new _.UnsupportedError("device not supported");return new Lh({handlerName:f,handlerFactory:v})}constructor({handlerName:f,handlerFactory:v}={}){if(S.debug("constructor()"),f&&v)throw new TypeError("just one of handlerName or handlerInterface can be given");if(v)this._handlerFactory=v;else{if(f)S.debug("constructor() | handler given: %s",f);else if(f=C(),f)S.debug("constructor() | detected handler: %s",f);else throw new _.UnsupportedError("device not supported");switch(f){case"Chrome111":{this._handlerFactory=R.Chrome111.createFactory();break}case"Chrome74":{this._handlerFactory=m.Chrome74.createFactory();break}case"Firefox120":{this._handlerFactory=L.Firefox120.createFactory();break}case"Safari12":{this._handlerFactory=T.Safari12.createFactory();break}case"ReactNative106":{this._handlerFactory=u.ReactNative106.createFactory();break}default:throw new TypeError(`unknown handlerName "${f}"`)}}this._handlerName=this._handlerFactory.name}get handlerName(){return this._handlerName}get loaded(){return this._loaded}get rtpCapabilities(){if(!this._loaded)throw new _.InvalidStateError("not loaded");return this._recvRtpCapabilities}get sctpCapabilities(){if(!this._loaded)throw new _.InvalidStateError("not loaded");return this._sctpCapabilities}get observer(){return this._observer}async load({routerRtpCapabilities:f,preferLocalCodecsOrder:v=!1}){if(S.debug("load() [routerRtpCapabilities:%o]",f),this._loaded)throw new _.InvalidStateError("already loaded");const O=s.clone(f);A.validateAndNormalizeRtpCapabilities(O);const{getNativeRtpCapabilities:q,getNativeSctpCapabilities:W}=this._handlerFactory,ee=s.clone(await q());A.validateAndNormalizeRtpCapabilities(ee),S.debug("load() | got native RTP capabilities:%o",ee),this._getSendExtendedRtpCapabilities=Q=>s.clone(A.getExtendedRtpCapabilities(Q,O,v));const h=A.getExtendedRtpCapabilities(ee,O,!1);this._recvRtpCapabilities=A.getRecvRtpCapabilities(h),A.validateAndNormalizeRtpCapabilities(this._recvRtpCapabilities),S.debug("load() | got receiving RTP capabilities:%o",this._recvRtpCapabilities),this._canProduceByKind.audio=A.canSend("audio",this._recvRtpCapabilities),this._canProduceByKind.video=A.canSend("video",this._recvRtpCapabilities),this._sctpCapabilities=await W(),A.validateSctpCapabilities(this._sctpCapabilities),S.debug("load() | got native SCTP capabilities:%o",this._sctpCapabilities),S.debug("load() succeeded"),this._loaded=!0}canProduce(f){if(this._loaded){if(f!=="audio"&&f!=="video")throw new TypeError(`invalid kind "${f}"`)}else throw new _.InvalidStateError("not loaded");return this._canProduceByKind[f]}createSendTransport({id:f,iceParameters:v,iceCandidates:O,dtlsParameters:q,sctpParameters:W,iceServers:ee,iceTransportPolicy:h,additionalSettings:Q,appData:I}){return S.debug("createSendTransport()"),this.createTransport({direction:"send",id:f,iceParameters:v,iceCandidates:O,dtlsParameters:q,sctpParameters:W,iceServers:ee,iceTransportPolicy:h,additionalSettings:Q,appData:I})}createRecvTransport({id:f,iceParameters:v,iceCandidates:O,dtlsParameters:q,sctpParameters:W,iceServers:ee,iceTransportPolicy:h,additionalSettings:Q,appData:I}){return S.debug("createRecvTransport()"),this.createTransport({direction:"recv",id:f,iceParameters:v,iceCandidates:O,dtlsParameters:q,sctpParameters:W,iceServers:ee,iceTransportPolicy:h,additionalSettings:Q,appData:I})}createTransport({direction:f,id:v,iceParameters:O,iceCandidates:q,dtlsParameters:W,sctpParameters:ee,iceServers:h,iceTransportPolicy:Q,additionalSettings:I,appData:D}){if(this._loaded){if(typeof v!="string")throw new TypeError("missing id");if(typeof O!="object")throw new TypeError("missing iceParameters");if(Array.isArray(q)){if(typeof W!="object")throw new TypeError("missing dtlsParameters");if(ee&&typeof ee!="object")throw new TypeError("wrong sctpParameters");if(D&&typeof D!="object")throw new TypeError("if given, appData must be an object")}else throw new TypeError("missing iceCandidates")}else throw new _.InvalidStateError("not loaded");const G=new N.Transport({direction:f,id:v,iceParameters:O,iceCandidates:q,dtlsParameters:W,sctpParameters:ee,iceServers:h,iceTransportPolicy:Q,additionalSettings:I,appData:D,handlerFactory:this._handlerFactory,getSendExtendedRtpCapabilities:this._getSendExtendedRtpCapabilities,recvRtpCapabilities:this._recvRtpCapabilities,canProduceByKind:this._canProduceByKind});return this._observer.safeEmit("newtransport",G),G}};Wa.Device=k;function c(b,f){S.debug('detectDeviceImpl() [userAgent:"%s", userAgentData:%o]',b,f);const v=l(b,f);if(v){if(v>=111)return S.debug("detectDeviceImpl() | using Chrome111 handler"),"Chrome111";if(v>=74)return S.debug("detectDeviceImpl() | using Chrome74 handler"),"Chrome74";S.warn("detectDeviceImpl() | unsupported Chromium based browser/version");return}const O=d(b);if(O){if(O>=120)return S.debug("detectDeviceImpl() | using Firefox120 handler"),"Firefox120";S.warn("detectDeviceImpl() | unsupported Firefox browser/version");return}const q=g(b);if(q){if(q>=605)return S.debug("detectDeviceImpl() | using Safari12 handler"),"Safari12";S.warn("detectDeviceImpl() | unsupported desktop Safari browser/version");return}const W=x(b);if(W){if(W>=605)return S.debug("detectDeviceImpl() | using Safari12 handler"),"Safari12";S.warn("detectDeviceImpl() | unsupported iOS Safari based browser/version");return}if(M()){if(typeof RTCPeerConnection<"u"&&typeof RTCRtpTransceiver<"u")return S.debug("detectDeviceImpl() | using ReactNative106 handler"),"ReactNative106";S.warn("detectDeviceImpl() | unsupported react-native-webrtc version without RTCPeerConnection or RTCRtpTransceiver, forgot to call registerGlobals() on it?");return}S.warn('detectDeviceImpl() | device not supported [userAgent:"%s", userAgentData:%o]',b,f)}function l(b,f){if(S.debug("getChromiumMajorVersion()"),E(b,f)){S.debug("getChromiumMajorVersion() | this is iOS => undefined");return}if(M()){S.debug("getChromiumMajorVersion() | this is React-Native => undefined");return}if(f){const O=(f.brands??[]).find(q=>q.brand==="Chromium");if(O){const q=Number(O.version);return S.debug(`getChromiumMajorVersion() | Chromium major version based on NavigatorUAData => ${q}`),q}}const v=b?.match(/\b(?:Chrome|Chromium)\/(\w+)/i);if(v?.[1]){const O=Number(v[1]);return S.debug(`getChromiumMajorVersion() | Chromium major version based on User-Agent => ${O}`),O}S.debug("getChromiumMajorVersion() | this is not Chromium => undefined")}function d(b){if(S.debug("getFirefoxMajorVersion()"),E(b)){S.debug("getFirefoxMajorVersion() | this is iOS => undefined");return}if(M()){S.debug("getFirefoxMajorVersion() | this is React-Native => undefined");return}const f=b?.match(/\bFirefox\/(\w+)/i);if(f?.[1]){const v=Number(f[1]);return S.debug(`getFirefoxMajorVersion() | Firefox major version based on User-Agent => ${v}`),v}S.debug("getFirefoxMajorVersion() | this is not Firefox => undefined")}function g(b){if(S.debug("getMacOSWebKitMajorVersion()"),E(b)){S.debug("getMacOSWebKitMajorVersion() | this is iOS => undefined");return}if(M()){S.debug("getMacOSWebKitMajorVersion() | this is React-Native => undefined");return}if(!(b&&/\bSafari\b/i.test(b)&&!/\bChrome\b/i.test(b)&&!/\bChromium\b/i.test(b)&&!/\bFirefox\b/i.test(b))){S.debug("getMacOSWebKitMajorVersion() | this is not Safari => undefined");return}const v=b.match(/AppleWebKit\/(\w+)/i);if(v?.[1]){const O=Number(v[1]);return S.debug(`getMacOSWebKitMajorVersion() | WebKit major version based on User-Agent => ${O}`),O}S.debug("getMacOSWebKitMajorVersion() | this is not WebKit => undefined")}function x(b){if(S.debug("getIOSWebKitMajorVersion()"),!E(b)){S.debug("getIOSWebKitMajorVersion() | this is not iOS => undefined");return}if(M()){S.debug("getIOSWebKitMajorVersion() | this is React-Native => undefined");return}const f=b?.match(/AppleWebKit\/(\w+)/i);if(f?.[1]){const v=Number(f[1]);return S.debug(`getIOSWebKitMajorVersion() | WebKit major version based on User-Agent => ${v}`),v}S.debug("getIOSWebKitMajorVersion() | this is not WebKit => undefined")}function E(b,f){return S.debug("isIOS()"),f?.platform==="iOS"?(S.debug("isIOS() | this is iOS based on NavigatorUAData.platform => true"),!0):f?.platform?(S.debug("isIOS() | this is not iOS based on NavigatorUAData.platform => false"),!1):b&&/iPad|iPhone|iPod/.test(b)?(S.debug("isIOS() | this is iOS based on User-Agent => true"),!0):typeof navigator=="object"&&navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1?(S.debug("isIOS() | this is iPadOS 13+ based on User-Agent => true"),!0):(S.debug("isIOS() | this is not iOS => false"),!1)}function M(){return S.debug("isReactNative()"),typeof navigator=="object"&&navigator.product==="ReactNative"?(S.debug("isReactNative() | this is React-Native based on navigator.product"),!0):(S.debug("isReactNative() | this is not React-Native => false"),!1)}return Wa}var nr={},ir={},Sl={},yh;function jv(){if(yh)return Sl;yh=1;for(var y=256,w=[],_;y--;)w[y]=(y+256).toString(16).substring(1);function s(){var A=0,N,R="";if(!_||y+16>256){for(_=Array(A=256);A--;)_[A]=256*Math.random()|0;A=y=0}for(;A<16;A++)N=_[y+A],A==6?R+=w[N&15|64]:A==8?R+=w[N&63|128]:R+=w[N],A&1&&A>1&&A<11&&(R+="-");return y++,R}return Sl.v4=s,Sl}var rr={},_h;function Uv(){if(_h)return rr;_h=1,Object.defineProperty(rr,"__esModule",{value:!0}),rr.FakeEventTarget=void 0;class y{listeners={};addEventListener(_,s,A){s&&(this.listeners[_]=this.listeners[_]??[],this.listeners[_].push({callback:typeof s=="function"?s:s.handleEvent,once:typeof A=="object"&&A.once===!0}))}removeEventListener(_,s,A){this.listeners[_]&&s&&(this.listeners[_]=this.listeners[_].filter(N=>N.callback!==(typeof s=="function"?s:s.handleEvent)))}dispatchEvent(_){if(!_||typeof _.type!="string")throw new Error("invalid event object");const s=this.listeners[_.type];if(!s)return!0;for(const A of[...s]){try{A.callback.call(this,_)}catch(N){setTimeout(()=>{throw N},0)}A.once&&this.removeEventListener(_.type,A.callback)}return!_.defaultPrevented}}return rr.FakeEventTarget=y,rr}var sr={},Sh;function qv(){if(Sh)return sr;Sh=1,Object.defineProperty(sr,"__esModule",{value:!0}),sr.FakeEvent=void 0;let y=class{NONE=0;CAPTURING_PHASE=1;AT_TARGET=2;BUBBLING_PHASE=3;type;bubbles;cancelable;defaultPrevented=!1;composed=!1;currentTarget=null;eventPhase=this.NONE;isTrusted=!0;target=null;timeStamp=0;cancelBubble=!1;returnValue=!0;srcElement=null;constructor(_,s={}){this.type=_,this.bubbles=s.bubbles??!1,this.cancelable=s.cancelable??!1}preventDefault(){this.cancelable&&(this.defaultPrevented=!0)}stopPropagation(){}stopImmediatePropagation(){}composedPath(){return[]}initEvent(_,s,A){}};return sr.FakeEvent=y,sr}var zs={},bh;function Hv(){if(bh)return zs;bh=1,Object.defineProperty(zs,"__esModule",{value:!0}),zs.clone=y;function y(w){if(w!==void 0)return Number.isNaN(w)?NaN:typeof structuredClone=="function"?structuredClone(w):JSON.parse(JSON.stringify(w))}return zs}var wh;function Bv(){if(wh)return ir;wh=1,Object.defineProperty(ir,"__esModule",{value:!0}),ir.FakeMediaStreamTrack=void 0;const y=jv(),w=Uv(),_=qv(),s=Hv();class A extends w.FakeEventTarget{#m;#d;#f;#e;#a;#t;#n;#p;#i;#h;#r;#s=null;#c=null;#o=null;#l=null;#u=null;constructor({kind:R,id:m,label:L,contentHint:T,enabled:u,muted:S,readyState:C,capabilities:H,constraints:k,settings:c,data:l}){super(),this.#m=m??(0,y.v4)(),this.#d=R,this.#f=L??"",this.#n=T??"",this.#a=u??!0,this.#t=S??!1,this.#e=C??"live",this.#p=H??{},this.#i=k??{},this.#h=c??{},this.#r=l??{}}get id(){return this.#m}get kind(){return this.#d}get label(){return this.#f}get contentHint(){return this.#n}set contentHint(R){this.#n=R}get enabled(){return this.#a}set enabled(R){const m=this.#a!==R;this.#a=R,m&&this.dispatchEvent(new _.FakeEvent("enabledchange"))}get muted(){return this.#t}get readyState(){return this.#e}get data(){return this.#r}set data(R){this.#r=R}get onmute(){return this.#s}set onmute(R){this.#s&&this.removeEventListener("mute",this.#s),this.#s=R,R&&this.addEventListener("mute",R)}get onunmute(){return this.#c}set onunmute(R){this.#c&&this.removeEventListener("unmute",this.#c),this.#c=R,R&&this.addEventListener("unmute",R)}get onended(){return this.#o}set onended(R){this.#o&&this.removeEventListener("ended",this.#o),this.#o=R,R&&this.addEventListener("ended",R)}get onenabledchange(){return this.#l}set onenabledchange(R){this.#l&&this.removeEventListener("enabledchange",this.#l),this.#l=R,R&&this.addEventListener("enabledchange",R)}get onstopped(){return this.#u}set onstopped(R){this.#u&&this.removeEventListener("stopped",this.#u),this.#u=R,R&&this.addEventListener("stopped",R)}addEventListener(R,m,L){super.addEventListener(R,m,L)}removeEventListener(R,m,L){super.removeEventListener(R,m,L)}stop(){this.#e!=="ended"&&(this.#e="ended",this.dispatchEvent(new _.FakeEvent("stopped")))}clone({id:R,data:m}={}){return new A({id:R??(0,y.v4)(),kind:this.#d,label:this.#f,contentHint:this.#n,enabled:this.#a,muted:this.#t,readyState:this.#e,capabilities:(0,s.clone)(this.#p),constraints:(0,s.clone)(this.#i),settings:(0,s.clone)(this.#h),data:m??(0,s.clone)(this.#r)})}getCapabilities(){return this.#p}getConstraints(){return this.#i}async applyConstraints(R={}){return this.#i=R,Promise.resolve()}getSettings(){return this.#h}remoteStop(){this.#e!=="ended"&&(this.#e="ended",this.dispatchEvent(new _.FakeEvent("stopped")),this.dispatchEvent(new _.FakeEvent("ended")))}remoteMute(){this.#t||(this.#t=!0,this.dispatchEvent(new _.FakeEvent("mute")))}remoteUnmute(){this.#t&&(this.#t=!1,this.dispatchEvent(new _.FakeEvent("unmute")))}}return ir.FakeMediaStreamTrack=A,ir}var cr={},Ch;function Gv(){if(Ch)return cr;Ch=1,Object.defineProperty(cr,"__esModule",{value:!0}),cr.FakeEventTarget=void 0;let y=class{listeners={};addEventListener(_,s,A){s&&(this.listeners[_]=this.listeners[_]??[],this.listeners[_].push({callback:typeof s=="function"?s:s.handleEvent,once:typeof A=="object"&&A.once===!0}))}removeEventListener(_,s,A){this.listeners[_]&&s&&(this.listeners[_]=this.listeners[_].filter(N=>N.callback!==(typeof s=="function"?s:s.handleEvent)))}dispatchEvent(_){if(!_||typeof _.type!="string")throw new Error("invalid event object");const s=this.listeners[_.type];if(!s)return!0;for(const A of[...s]){try{A.callback.call(this,_)}catch(N){setTimeout(()=>{throw N},0)}A.once&&this.removeEventListener(_.type,A.callback)}return!_.defaultPrevented}};return cr.FakeEventTarget=y,cr}var Th;function Qv(){if(Th)return nr;Th=1,Object.defineProperty(nr,"__esModule",{value:!0}),nr.FakeHandler=void 0;const y=Bv(),w=St(),_=lt(),s=Yn(),A=sa(),N=jt(),R=Gv(),m=new _.Logger("FakeHandler"),L="FakeHandler";let T=class Hs extends w.EnhancedEventEmitter{_closed=!1;_fakeParameters;_getSendExtendedRtpCapabilities;_cname=`CNAME-${s.generateRandomNumber()}`;_defaultSendStreamId=`${s.generateRandomNumber()}`;_transportReady=!1;_nextLocalId=1;_tracks=new Map;_nextSctpStreamId=0;static createFactory(C){return{name:L,factory:H=>new Hs(H,C),getNativeRtpCapabilities:async()=>(m.debug("getNativeRtpCapabilities()"),Hs.getLocalRtpCapabilities(C)),getNativeSctpCapabilities:async()=>(m.debug("getNativeSctpCapabilities()"),C.generateNativeSctpCapabilities())}}static getLocalRtpCapabilities(C){const H=C.generateNativeRtpCapabilities();return A.validateAndNormalizeRtpCapabilities(H),H}constructor({getSendExtendedRtpCapabilities:C},H){super(),m.debug("constructor()"),this._getSendExtendedRtpCapabilities=C,this._fakeParameters=H}get name(){return L}close(){m.debug("close()"),!this._closed&&(this._closed=!0,super.close())}setIceGatheringState(C){this.emit("@icegatheringstatechange",C)}setConnectionState(C){this.emit("@connectionstatechange",C)}async updateIceServers(C){this.assertNotClosed(),m.debug("updateIceServers()")}async restartIce(C){this.assertNotClosed(),m.debug("restartIce()")}async getTransportStats(){return this.assertNotClosed(),new Map}async send({track:C,streamId:H,encodings:k,codecOptions:c,codec:l}){this.assertNotClosed(),m.debug("send() [kind:%s, track.id:%s]",C.kind,C.id),this._transportReady||await this.setupTransport({localDtlsRole:"server"});const d=Hs.getLocalRtpCapabilities(this._fakeParameters),g=this._getSendExtendedRtpCapabilities(d),x=A.getSendingRtpParameters(C.kind,g);x.codecs=A.reduceCodecs(x.codecs,l);const E=x.codecs.some(b=>/.+\/rtx$/i.test(b.mimeType));x.mid=`mid-${s.generateRandomNumber()}`,x.msid=`${H??"-"} ${C.id}`,k||(k=[{}]);for(const b of k)b.ssrc=s.generateRandomNumber(),E&&(b.rtx={ssrc:s.generateRandomNumber()});x.encodings=k,x.rtcp={cname:this._cname,reducedSize:!0,mux:!0},x.msid=`${H??this._defaultSendStreamId} ${C.id}`;const M=this._nextLocalId++;return this._tracks.set(M,C),{localId:String(M),rtpParameters:x}}async stopSending(C){if(m.debug("stopSending() [localId:%s]",C),!this._closed){if(!this._tracks.has(Number(C)))throw new Error("local track not found");this._tracks.delete(Number(C))}}async pauseSending(C){this.assertNotClosed()}async resumeSending(C){this.assertNotClosed()}async replaceTrack(C,H){this.assertNotClosed(),H?m.debug("replaceTrack() [localId:%s, track.id:%s]",C,H.id):m.debug("replaceTrack() [localId:%s, no track]",C),this._tracks.delete(Number(C)),this._tracks.set(Number(C),H)}async setMaxSpatialLayer(C,H){this.assertNotClosed(),m.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",C,H)}async setRtpEncodingParameters(C,H){this.assertNotClosed(),m.debug("setRtpEncodingParameters() [localId:%s, params:%o]",C,H)}async getSenderStats(C){return this.assertNotClosed(),new Map}async sendDataChannel({ordered:C,maxPacketLifeTime:H,maxRetransmits:k,label:c,protocol:l}){this.assertNotClosed(),this._transportReady||await this.setupTransport({localDtlsRole:"server"}),m.debug("sendDataChannel()");const d=new u({id:this._nextSctpStreamId++,ordered:C,maxPacketLifeTime:H,maxRetransmits:k,label:c,protocol:l}),g={streamId:this._nextSctpStreamId,ordered:C,maxPacketLifeTime:H,maxRetransmits:k};return{dataChannel:d,sctpStreamParameters:g}}async receive(C){this.assertNotClosed();const H=[];for(const k of C){const{trackId:c,kind:l}=k;this._transportReady||await this.setupTransport({localDtlsRole:"client"}),m.debug("receive() [trackId:%s, kind:%s]",c,l);const d=this._nextLocalId++,g=new y.FakeMediaStreamTrack({kind:l});this._tracks.set(d,g),H.push({localId:String(d),track:g})}return H}async stopReceiving(C){if(!this._closed)for(const H of C)m.debug("stopReceiving() [localId:%s]",H),this._tracks.delete(Number(H))}async pauseReceiving(C){this.assertNotClosed()}async resumeReceiving(C){this.assertNotClosed()}async getReceiverStats(C){return this.assertNotClosed(),new Map}async receiveDataChannel({sctpStreamParameters:C,label:H,protocol:k}){return this.assertNotClosed(),this._transportReady||await this.setupTransport({localDtlsRole:"client"}),m.debug("receiveDataChannel()"),{dataChannel:new u({id:C.streamId,ordered:C.ordered,maxPacketLifeTime:C.maxPacketLifeTime,maxRetransmits:C.maxRetransmits,label:H,protocol:k})}}async setupTransport({localDtlsRole:C,localSdpObject:H}){const k=s.clone(this._fakeParameters.generateLocalDtlsParameters());C&&(k.role=C),this.emit("@connectionstatechange","connecting"),await new Promise((c,l)=>this.emit("@connect",{dtlsParameters:k},c,l)),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new N.InvalidStateError("method called in a closed handler")}};nr.FakeHandler=T;class u extends R.FakeEventTarget{_id;_negotiated=!0;_ordered;_maxPacketLifeTime;_maxRetransmits;_label;_protocol;_readyState="connecting";_bufferedAmount=0;_bufferedAmountLowThreshold=0;_binaryType="arraybuffer";_onopen=null;_onclosing=null;_onclose=null;_onmessage=null;_onbufferedamountlow=null;_onerror=null;constructor({id:C,ordered:H=!0,maxPacketLifeTime:k=null,maxRetransmits:c=null,label:l="",protocol:d=""}){super(),m.debug(`constructor() [id:${C}, ordered:${H}, maxPacketLifeTime:${k}, maxRetransmits:${c}, label:${l}, protocol:${d}`),this._id=C,this._ordered=H,this._maxPacketLifeTime=k,this._maxRetransmits=c,this._label=l,this._protocol=d}get id(){return this._id}get negotiated(){return this._negotiated}get ordered(){return this._ordered}get maxPacketLifeTime(){return this._maxPacketLifeTime}get maxRetransmits(){return this._maxRetransmits}get label(){return this._label}get protocol(){return this._protocol}get readyState(){return this._readyState}get bufferedAmount(){return this._bufferedAmount}get bufferedAmountLowThreshold(){return this._bufferedAmountLowThreshold}set bufferedAmountLowThreshold(C){this._bufferedAmountLowThreshold=C}get binaryType(){return this._binaryType}set binaryType(C){this._binaryType=C}get onopen(){return this._onopen}set onopen(C){this._onopen&&this.removeEventListener("open",this._onopen),this._onopen=C,C&&this.addEventListener("open",C)}get onclosing(){return this._onclosing}set onclosing(C){this._onclosing&&this.removeEventListener("closing",this._onclosing),this._onclosing=C,C&&this.addEventListener("closing",C)}get onclose(){return this._onclose}set onclose(C){this._onclose&&this.removeEventListener("close",this._onclose),this._onclose=C,C&&this.addEventListener("close",C)}get onmessage(){return this._onmessage}set onmessage(C){this._onmessage&&this.removeEventListener("message",this._onmessage),this._onmessage=C,C&&this.addEventListener("message",C)}get onbufferedamountlow(){return this._onbufferedamountlow}set onbufferedamountlow(C){this._onbufferedamountlow&&this.removeEventListener("bufferedamountlow",this._onbufferedamountlow),this._onbufferedamountlow=C,C&&this.addEventListener("bufferedamountlow",C)}get onerror(){return this._onerror}set onerror(C){this._onerror&&this.removeEventListener("error",this._onerror),this._onerror=C,C&&this.addEventListener("error",C)}addEventListener(C,H,k){super.addEventListener(C,H,k)}removeEventListener(C,H,k){super.removeEventListener(C,H,k)}close(){["closing","closed"].includes(this._readyState)||(this._readyState="closed")}send(C){if(this._readyState!=="open")throw new N.InvalidStateError("not open")}}return nr}var Lt={},Eh;function Yv(){if(Eh)return Lt;Eh=1,Object.defineProperty(Lt,"__esModule",{value:!0}),Lt.generateRouterRtpCapabilities=_,Lt.generateNativeRtpCapabilities=s,Lt.generateNativeSctpCapabilities=A,Lt.generateLocalDtlsParameters=N,Lt.generateTransportRemoteParameters=R,Lt.generateProducerRemoteParameters=m,Lt.generateConsumerRemoteParameters=L,Lt.generateDataProducerRemoteParameters=T,Lt.generateDataConsumerRemoteParameters=u;const y=Yn();function w(){return String(y.generateRandomNumber())}function _(){return y.deepFreeze({codecs:[{mimeType:"audio/opus",kind:"audio",preferredPayloadType:100,clockRate:48e3,channels:2,rtcpFeedback:[{type:"transport-cc"}],parameters:{useinbandfec:1,foo:"bar"}},{mimeType:"video/VP8",kind:"video",preferredPayloadType:101,clockRate:9e4,rtcpFeedback:[{type:"nack"},{type:"nack",parameter:"pli"},{type:"ccm",parameter:"fir"},{type:"goog-remb"},{type:"transport-cc"}],parameters:{"x-google-start-bitrate":1500}},{mimeType:"video/rtx",kind:"video",preferredPayloadType:102,clockRate:9e4,rtcpFeedback:[],parameters:{apt:101}},{mimeType:"video/H264",kind:"video",preferredPayloadType:103,clockRate:9e4,rtcpFeedback:[{type:"nack"},{type:"nack",parameter:"pli"},{type:"ccm",parameter:"fir"},{type:"goog-remb"},{type:"transport-cc"}],parameters:{"level-asymmetry-allowed":1,"packetization-mode":1,"profile-level-id":"42e01f"}},{mimeType:"video/rtx",kind:"video",preferredPayloadType:104,clockRate:9e4,rtcpFeedback:[],parameters:{apt:103}},{mimeType:"video/VP9",kind:"video",preferredPayloadType:105,clockRate:9e4,rtcpFeedback:[{type:"nack"},{type:"nack",parameter:"pli"},{type:"ccm",parameter:"fir"},{type:"goog-remb"},{type:"transport-cc"}],parameters:{"profile-id":0,"x-google-start-bitrate":1500}},{mimeType:"video/rtx",kind:"video",preferredPayloadType:106,clockRate:9e4,rtcpFeedback:[],parameters:{apt:105}}],headerExtensions:[{kind:"audio",uri:"urn:ietf:params:rtp-hdrext:sdes:mid",preferredId:1,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"urn:ietf:params:rtp-hdrext:sdes:mid",preferredId:1,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"urn:ietf:params:rtp-hdrext:sdes:rtp-stream-id",preferredId:2,preferredEncrypt:!1,direction:"recvonly"},{kind:"video",uri:"urn:ietf:params:rtp-hdrext:sdes:repaired-rtp-stream-id",preferredId:3,preferredEncrypt:!1,direction:"recvonly"},{kind:"audio",uri:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time",preferredId:4,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time",preferredId:4,preferredEncrypt:!1,direction:"sendrecv"},{kind:"audio",uri:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01",preferredId:5,preferredEncrypt:!1,direction:"recvonly"},{kind:"video",uri:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01",preferredId:5,preferredEncrypt:!1,direction:"sendrecv"},{kind:"audio",uri:"urn:ietf:params:rtp-hdrext:ssrc-audio-level",preferredId:10,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"urn:3gpp:video-orientation",preferredId:11,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"urn:ietf:params:rtp-hdrext:toffset",preferredId:12,preferredEncrypt:!1,direction:"sendrecv"}]})}function s(){return{codecs:[{mimeType:"audio/opus",kind:"audio",preferredPayloadType:111,clockRate:48e3,channels:2,rtcpFeedback:[{type:"transport-cc"}],parameters:{minptime:10,useinbandfec:1}},{mimeType:"audio/ISAC",kind:"audio",preferredPayloadType:103,clockRate:16e3,channels:1,rtcpFeedback:[{type:"transport-cc"}],parameters:{}},{mimeType:"audio/CN",kind:"audio",preferredPayloadType:106,clockRate:32e3,channels:1,rtcpFeedback:[{type:"transport-cc"}],parameters:{}},{mimeType:"audio/foo",kind:"audio",preferredPayloadType:107,clockRate:9e4,channels:4,rtcpFeedback:[{type:"foo-qwe-qwe"}],parameters:{foo:"lalala"}},{mimeType:"video/BAZCODEC",kind:"video",preferredPayloadType:100,clockRate:9e4,rtcpFeedback:[{type:"foo"},{type:"transport-cc"},{type:"ccm",parameter:"fir"},{type:"nack"},{type:"nack",parameter:"pli"}],parameters:{baz:"1234abcd"}},{mimeType:"video/rtx",kind:"video",preferredPayloadType:101,clockRate:9e4,rtcpFeedback:[],parameters:{apt:100}},{mimeType:"video/VP8",kind:"video",preferredPayloadType:96,clockRate:9e4,rtcpFeedback:[{type:"goog-remb"},{type:"transport-cc"},{type:"ccm",parameter:"fir"},{type:"nack"},{type:"nack",parameter:"pli"}],parameters:{baz:"1234abcd"}},{mimeType:"video/rtx",kind:"video",preferredPayloadType:97,clockRate:9e4,rtcpFeedback:[],parameters:{apt:96}},{mimeType:"video/VP9",kind:"video",preferredPayloadType:98,clockRate:9e4,rtcpFeedback:[{type:"goog-remb"},{type:"transport-cc"},{type:"ccm",parameter:"fir"},{type:"nack"},{type:"nack",parameter:"pli"}],parameters:{"profile-id":0}},{mimeType:"video/rtx",kind:"video",preferredPayloadType:99,clockRate:9e4,rtcpFeedback:[],parameters:{apt:98}}],headerExtensions:[{kind:"audio",uri:"urn:ietf:params:rtp-hdrext:sdes:mid",preferredId:1},{kind:"video",uri:"urn:ietf:params:rtp-hdrext:sdes:mid",preferredId:1},{kind:"video",uri:"urn:ietf:params:rtp-hdrext:toffset",preferredId:2},{kind:"video",uri:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time",preferredId:3},{kind:"video",uri:"urn:3gpp:video-orientation",preferredId:4},{kind:"video",uri:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01",preferredId:5},{kind:"video",uri:"http://www.webrtc.org/experiments/rtp-hdrext/playout-delay",preferredId:6},{kind:"video",uri:"http://www.webrtc.org/experiments/rtp-hdrext/video-content-type",preferredId:7},{kind:"video",uri:"http://www.webrtc.org/experiments/rtp-hdrext/video-timing",preferredId:8},{kind:"audio",uri:"urn:ietf:params:rtp-hdrext:ssrc-audio-level",preferredId:10}]}}function A(){return y.deepFreeze({numStreams:{OS:2048,MIS:2048}})}function N(){return y.deepFreeze({fingerprints:[{algorithm:"sha-256",value:"82:5A:68:3D:36:C3:0A:DE:AF:E7:32:43:D2:88:83:57:AC:2D:65:E5:80:C4:B6:FB:AF:1A:A0:21:9F:6D:0C:AD"}],role:"auto"})}function R(){return{id:w(),iceParameters:y.deepFreeze({iceLite:!0,password:"yku5ej8nvfaor28lvtrabcx0wkrpkztz",usernameFragment:"h3hk1iz6qqlnqlne"}),iceCandidates:y.deepFreeze([{foundation:"udpcandidate",address:"9.9.9.9",ip:"9.9.9.9",port:40533,priority:1078862079,protocol:"udp",type:"host",tcpType:"passive"},{foundation:"udpcandidate",address:"9.9.9.9",ip:"9:9:9:9:9:9",port:41333,priority:1078862089,protocol:"udp",type:"host",tcpType:"passive"}]),dtlsParameters:y.deepFreeze({fingerprints:[{algorithm:"sha-256",value:"A9:F4:E0:D2:74:D3:0F:D9:CA:A5:2F:9F:7F:47:FA:F0:C4:72:DD:73:49:D0:3B:14:90:20:51:30:1B:90:8E:71"},{algorithm:"sha-384",value:"03:D9:0B:87:13:98:F6:6D:BC:FC:92:2E:39:D4:E1:97:32:61:30:56:84:70:81:6E:D1:82:97:EA:D9:C1:21:0F:6B:C5:E7:7F:E1:97:0C:17:97:6E:CF:B3:EF:2E:74:B0"},{algorithm:"sha-512",value:"84:27:A4:28:A4:73:AF:43:02:2A:44:68:FF:2F:29:5C:3B:11:9A:60:F4:A8:F0:F5:AC:A0:E3:49:3E:B1:34:53:A9:85:CE:51:9B:ED:87:5E:B8:F4:8E:3D:FA:20:51:B8:96:EE:DA:56:DC:2F:5C:62:79:15:23:E0:21:82:2B:2C"}],role:"auto"}),sctpParameters:y.deepFreeze({port:5e3,OS:2048,MIS:2048,maxMessageSize:2e6})}}function m(){return y.deepFreeze({id:w()})}function L({id:S,codecMimeType:C}={}){switch(C){case"audio/opus":return{id:S??w(),producerId:w(),kind:"audio",rtpParameters:y.deepFreeze({codecs:[{mimeType:"audio/opus",payloadType:100,clockRate:48e3,channels:2,rtcpFeedback:[{type:"transport-cc"}],parameters:{useinbandfec:1,foo:"bar"}}],encodings:[{ssrc:46687003}],headerExtensions:[{uri:"urn:ietf:params:rtp-hdrext:sdes:mid",id:1},{uri:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01",id:5},{uri:"urn:ietf:params:rtp-hdrext:ssrc-audio-level",id:10}],rtcp:{cname:"wB4Ql4lrsxYLjzuN",reducedSize:!0,mux:!0}})};case"audio/ISAC":return{id:S??w(),producerId:w(),kind:"audio",rtpParameters:y.deepFreeze({codecs:[{mimeType:"audio/ISAC",payloadType:111,clockRate:16e3,channels:1,rtcpFeedback:[{type:"transport-cc"}],parameters:{}}],encodings:[{ssrc:46687004}],headerExtensions:[{uri:"urn:ietf:params:rtp-hdrext:sdes:mid",id:1},{uri:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01",id:5}],rtcp:{cname:"wB4Ql4lrsxYLjzuN",reducedSize:!0,mux:!0}})};case"video/VP8":return{id:S??w(),producerId:w(),kind:"video",rtpParameters:y.deepFreeze({codecs:[{mimeType:"video/VP8",payloadType:101,clockRate:9e4,rtcpFeedback:[{type:"nack"},{type:"nack",parameter:"pli"},{type:"ccm",parameter:"fir"},{type:"goog-remb"},{type:"transport-cc"}],parameters:{"x-google-start-bitrate":1500}},{mimeType:"video/rtx",payloadType:102,clockRate:9e4,rtcpFeedback:[],parameters:{apt:101}}],encodings:[{ssrc:99991111,rtx:{ssrc:99991112}}],headerExtensions:[{uri:"urn:ietf:params:rtp-hdrext:sdes:mid",id:1},{uri:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time",id:4},{uri:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01",id:5},{uri:"urn:3gpp:video-orientation",id:11},{uri:"urn:ietf:params:rtp-hdrext:toffset",id:12}],rtcp:{cname:"wB4Ql4lrsxYLjzuN",reducedSize:!0,mux:!0}})};case"video/H264":return{id:S??w(),producerId:w(),kind:"video",rtpParameters:y.deepFreeze({codecs:[{mimeType:"video/H264",payloadType:103,clockRate:9e4,rtcpFeedback:[{type:"nack"},{type:"nack",parameter:"pli"},{type:"ccm",parameter:"fir"},{type:"goog-remb"},{type:"transport-cc"}],parameters:{"level-asymmetry-allowed":1,"packetization-mode":1,"profile-level-id":"42e01f"}},{mimeType:"video/rtx",payloadType:104,clockRate:9e4,rtcpFeedback:[],parameters:{apt:103}}],encodings:[{ssrc:99991113,rtx:{ssrc:99991114}}],headerExtensions:[{uri:"urn:ietf:params:rtp-hdrext:sdes:mid",id:1},{uri:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time",id:4},{uri:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01",id:5},{uri:"urn:3gpp:video-orientation",id:11},{uri:"urn:ietf:params:rtp-hdrext:toffset",id:12}],rtcp:{cname:"wB4Ql4lrsxYLjzuN",reducedSize:!0,mux:!0}})};default:throw new TypeError(`unknown codecMimeType '${C}'`)}}function T(){return y.deepFreeze({id:w()})}function u({id:S}={}){return{id:S??w(),dataProducerId:w(),sctpStreamParameters:y.deepFreeze({streamId:666,maxPacketLifeTime:5e3,maxRetransmits:void 0})}}return Lt}var Rh;function Pv(){return Rh||(Rh=1,(function(y){Object.defineProperty(y,"__esModule",{value:!0}),y.debug=y.testFakeParameters=y.FakeHandler=y.enhancedEvents=y.ortc=y.parseScalabilityMode=y.detectDeviceAsync=y.detectDevice=y.Device=y.version=y.types=void 0;const w=Bs();y.debug=w.default,y.types=mv(),y.version="3.18.3";var _=kv();Object.defineProperty(y,"Device",{enumerable:!0,get:function(){return _.Device}}),Object.defineProperty(y,"detectDevice",{enumerable:!0,get:function(){return _.detectDevice}}),Object.defineProperty(y,"detectDeviceAsync",{enumerable:!0,get:function(){return _.detectDeviceAsync}});var s=Pn();Object.defineProperty(y,"parseScalabilityMode",{enumerable:!0,get:function(){return s.parse}}),y.ortc=sa(),y.enhancedEvents=St();var A=Qv();Object.defineProperty(y,"FakeHandler",{enumerable:!0,get:function(){return A.FakeHandler}}),y.testFakeParameters=Yv()})(fl)),fl}var Dh=Pv();class Vv{ws=null;device=null;sendTransport=null;recvTransport=null;producers=new Map;consumers=new Map;events={};pendingRequests=new Map;roomId="";peerId="";isTeacher=!1;rtpCapabilities=null;constructor(w){this.events=w}async connect(w,_,s,A,N){this.roomId=_,this.peerId=s,this.isTeacher=N;let R=Dh.detectDevice();if(!R&&window.RTCPeerConnection&&(console.warn("Browser handler not detected, defaulting to Safari12 for Tauri/Mac..."),R="Safari12"),!R)throw new Error("Browser khng h tr WebRTC. Vui lng s dng Chrome, Firefox hoc Edge.");return this.events.onConnectionStateChange?.("connecting"),new Promise((m,L)=>{this.ws=new WebSocket(w),this.ws.onopen=async()=>{try{const T=await this.sendRequest("join",{roomId:_,peerId:s,name:A,isTeacher:N});if(this.rtpCapabilities=T.rtpCapabilities,!this.rtpCapabilities)throw new Error("Server khng tr v rtpCapabilities");this.device=new Dh.Device({handlerName:R}),await this.device.load({routerRtpCapabilities:this.rtpCapabilities}),this.events.onConnectionStateChange?.("connected"),m()}catch(T){this.events.onError?.(T instanceof Error?T.message:"Kt ni tht bi"),L(T)}},this.ws.onmessage=T=>{const u=JSON.parse(T.data);this.handleMessage(u)},this.ws.onerror=()=>{this.events.onConnectionStateChange?.("error"),this.events.onError?.("Li kt ni WebSocket"),L(new Error("WebSocket error"))},this.ws.onclose=()=>{this.events.onConnectionStateChange?.("disconnected"),this.cleanup()}})}handleMessage(w){const{type:_,data:s}=w;if(this.pendingRequests.has(_)){const{resolve:A}=this.pendingRequests.get(_);this.pendingRequests.delete(_),A(s);return}switch(_){case"newProducer":this.events.onNewProducer?.(s.producerId,s.kind);break;case"peerJoined":this.events.onPeerJoined?.(s.peerId,s.name,s.isTeacher);break;case"peerLeft":this.events.onPeerLeft?.(s.peerId,s.wasTeacher),s.wasTeacher&&this.closeAllConsumers();break;case"error":this.events.onError?.(s.message);break}}sendRequest(w,_){return new Promise((s,A)=>{if(!this.ws||this.ws.readyState!==WebSocket.OPEN){A(new Error("WebSocket cha kt ni"));return}const N=this.getResponseType(w);this.pendingRequests.set(N,{resolve:s,reject:A}),this.ws.send(JSON.stringify({type:w,data:_})),setTimeout(()=>{this.pendingRequests.has(N)&&(this.pendingRequests.delete(N),A(new Error(`Request ${w} timeout`)))},15e3)})}getResponseType(w){return{join:"joined",createTransport:"transportCreated",connectTransport:"transportConnected",produce:"produced",consume:"consumed",resumeConsumer:"consumerResumed",getProducers:"producers"}[w]||w}async createSendTransport(){if(!this.device)throw new Error("Device cha c khi to");const w=await this.sendRequest("createTransport",{direction:"send"});this.sendTransport=this.device.createSendTransport({id:w.id,iceParameters:w.iceParameters,iceCandidates:w.iceCandidates,dtlsParameters:w.dtlsParameters}),this.sendTransport.on("connect",async({dtlsParameters:_},s,A)=>{try{await this.sendRequest("connectTransport",{direction:"send",dtlsParameters:_}),s()}catch(N){A(N)}}),this.sendTransport.on("produce",async({kind:_,rtpParameters:s},A,N)=>{try{const{producerId:R}=await this.sendRequest("produce",{kind:_,rtpParameters:s});A({id:R})}catch(R){N(R)}})}async createRecvTransport(){if(!this.device)throw new Error("Device cha c khi to");const w=await this.sendRequest("createTransport",{direction:"recv"});this.recvTransport=this.device.createRecvTransport({id:w.id,iceParameters:w.iceParameters,iceCandidates:w.iceCandidates,dtlsParameters:w.dtlsParameters}),this.recvTransport.on("connect",async({dtlsParameters:_},s,A)=>{try{await this.sendRequest("connectTransport",{direction:"recv",dtlsParameters:_}),s()}catch(N){A(N)}})}async produceScreen(w){this.sendTransport||await this.createSendTransport();const _=w.getVideoTracks()[0];if(_){const A=await this.sendTransport.produce({track:_,encodings:[{maxBitrate:5e6,maxFramerate:30}],codecOptions:{videoGoogleStartBitrate:3e3,videoGoogleMinBitrate:1e3,videoGoogleMaxBitrate:5e3}});this.producers.set(A.id,A)}const s=w.getAudioTracks()[0];if(s){const A=await this.sendTransport.produce({track:s});this.producers.set(A.id,A)}}async produceMicrophone(w){this.sendTransport||await this.createSendTransport();const _=w.getAudioTracks()[0];if(_){const s=await this.sendTransport.produce({track:_});return this.producers.set(s.id,s),s.id}return null}async consumeAll(){this.recvTransport||await this.createRecvTransport(),console.log("[MediasoupClient] Requesting producers list...");const w=await this.sendRequest("getProducers",{}),_=new MediaStream;if(console.log("[MediasoupClient] Received producers:",w),Array.isArray(w)&&w.length>0){console.log(`[MediasoupClient] Consuming ${w.length} producers...`);for(const{producerId:s}of w){console.log(`[MediasoupClient] Consuming producer: ${s}`);try{const A=await this.consume(s);A?(_.addTrack(A.track),console.log(`[MediasoupClient]  Added track from producer ${s}, kind: ${A.track.kind}`)):console.warn(`[MediasoupClient]  Failed to consume producer ${s}`)}catch(A){console.error(`[MediasoupClient]  Error consuming producer ${s}:`,A)}}}else console.log("[MediasoupClient] No producers available to consume");return console.log(`[MediasoupClient] Stream ready with ${_.getTracks().length} tracks`),this.events.onStreamReady?.(_),_}async consume(w){if(this.recvTransport||(console.log("[MediasoupClient] Creating recvTransport for consume..."),await this.createRecvTransport()),!this.device)return console.error("[MediasoupClient] Device not initialized, cannot consume"),null;if(!this.recvTransport)return console.error("[MediasoupClient] recvTransport still not available after creation"),null;try{console.log(`[MediasoupClient] Consuming producer ${w}...`);const _=await this.sendRequest("consume",{producerId:w,rtpCapabilities:this.device.rtpCapabilities}),s=await this.recvTransport.consume({id:_.consumerId,producerId:_.producerId,kind:_.kind,rtpParameters:_.rtpParameters});return this.consumers.set(s.id,s),await this.sendRequest("resumeConsumer",{consumerId:s.id}),s}catch(_){return console.error("Failed to consume:",_),null}}stopProducing(){for(const w of this.producers.values())w.close();this.producers.clear()}stopAudioProducers(){const w=[];for(const _ of this.producers.values())_.kind==="audio"&&w.push(_);for(const _ of w)_.close(),this.producers.delete(_.id),console.log("[MediasoupClient] Stopped audio producer:",_.id)}stopProducer(w){const _=this.producers.get(w);_?(_.close(),this.producers.delete(w),console.log("[MediasoupClient] Stopped producer:",w)):console.warn("[MediasoupClient] Producer not found:",w)}closeAllConsumers(){for(const w of this.consumers.values())w.close();this.consumers.clear()}cleanup(){this.stopProducing(),this.closeAllConsumers(),this.sendTransport?.close(),this.recvTransport?.close(),this.sendTransport=null,this.recvTransport=null,this.device=null}disconnect(){this.cleanup(),this.ws?.close(),this.ws=null}}const Mh=()=>{const y=typeof navigator<"u"?navigator:window.navigator;if(!y)return{available:!1,error:"Navigator khng tn ti"};let w=y.mediaDevices;if(!w){y.getUserMedia&&console.warn("Using legacy getUserMedia API");try{typeof window<"u"&&(window.location.protocol==="https:"||window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&(w=y.mediaDevices)}catch(s){console.warn("Error checking secure context:",s)}if(!w)return{available:!1,error:"navigator.mediaDevices khng tn ti. C th WebView cha h tr MediaDevices API hoc cha c cu hnh ng.",userAgent:y.userAgent,isSecureContext:typeof window<"u"?window.location.protocol==="https:"||window.location.hostname==="localhost":!1}}const _=w;return{available:!0,hasGetDisplayMedia:typeof _.getDisplayMedia=="function",hasGetUserMedia:typeof _.getUserMedia=="function",methods:Object.keys(_),userAgent:y.userAgent,isSecureContext:typeof window<"u"?window.location.protocol==="https:"||window.location.hostname==="localhost":!1}};function Xv(){const[y,w]=ze.useState("disconnected"),[_,s]=ze.useState(null),[A,N]=ze.useState([]),[R,m]=ze.useState(null),[L,T]=ze.useState(!1),[u,S]=ze.useState(null),[C,H]=ze.useState(!1),[k,c]=ze.useState(null),l=ze.useRef(null),d=ze.useRef(null);ze.useEffect(()=>{const v=()=>{const q=Mh();console.log("[useMediasoup] MediaDevices Support on Mount:",q),q.available&&q.hasGetDisplayMedia?console.log("[useMediasoup]  getDisplayMedia is available"):console.warn("[useMediasoup]  getDisplayMedia may not be available:",q)};v();const O=setTimeout(v,500);return()=>{clearTimeout(O),d.current?.disconnect()}},[]);const g=ze.useCallback(async(v,O,q,W)=>{const ee=crypto.randomUUID(),h=new Vv({onConnectionStateChange:w,onError:s,onPeerJoined:(Q,I,D)=>{N(G=>[...G,{id:Q,name:I,isTeacher:D}])},onPeerLeft:(Q,I)=>{N(D=>D.filter(G=>G.id!==Q)),I&&m(null)},onNewProducer:async(Q,I)=>{if(!h.isTeacher){if(console.log(`[Student] New producer detected: ${Q}, kind: ${I}`),console.log(`[Student] Client connection state: ${d.current?"exists":"null"}`),await new Promise(D=>setTimeout(D,100)),!d.current){console.error(`[Student]  Client is null, cannot consume producer ${Q}`);return}try{const D=await d.current.consume(Q);D?(console.log(`[Student]  Successfully consumed producer ${Q}, track:`,D.track),m(G=>{const K=G||new MediaStream;return K.getTracks().filter(ne=>ne.kind===D.track.kind).forEach(ne=>{K.removeTrack(ne),ne.stop(),console.log(`[Student] Removed old ${ne.kind} track`)}),K.addTrack(D.track),console.log(`[Student] Stream now has ${K.getTracks().length} tracks (kind: ${K.getTracks().map(ne=>ne.kind).join(", ")})`),K})):(console.error(`[Student]  Failed to consume producer ${Q} - consumer is null`),s(`Khng th nhn c stream t producer ${Q}`))}catch(D){console.error(`[Student]  Error consuming producer ${Q}:`,D),s(D instanceof Error?D.message:`Failed to consume producer ${Q}`)}}},onStreamReady:m});d.current=h;try{if(await h.connect(v,O,ee,q,W),!W)try{console.log("[Student] Attempting to consume all existing producers...");const Q=await h.consumeAll();console.log("[Student] ConsumeAll result:",Q,"tracks:",Q?.getTracks().length),Q&&Q.getTracks().length>0?(m(Q),console.log("[Student]  Remote stream set with",Q.getTracks().length,"tracks")):console.log("[Student] No producers yet, waiting for teacher to share...")}catch(Q){console.log("[Student] No producers yet or error consuming:",Q),s(Q instanceof Error?Q.message:"Failed to consume producers")}}catch(Q){console.error("Connection error:",Q),s(Q instanceof Error?Q.message:"Connection failed")}},[]),x=ze.useCallback(()=>{S(v=>(v&&v.getTracks().forEach(O=>O.stop()),null)),d.current?.stopProducing(),T(!1)},[]),E=ze.useCallback(async(v=!0)=>{if(d.current)try{const O=Mh();if(console.log("MediaDevices Support Check:",O),!O.available||!O.hasGetDisplayMedia){const Q=O.error||`getDisplayMedia khng kh dng. Vui lng kim tra:
- Tauri ang s dng WebView h tr MediaDevices API
- Cu hnh Tauri cho php truy cp MediaDevices
- ng dng c quyn truy cp screen recording (macOS)`;throw console.error("MediaDevices Debug Info:",{support:O,navigatorType:typeof navigator,windowNavigator:typeof window.navigator,mediaDevices:(typeof navigator<"u"?navigator:window.navigator)?.mediaDevices}),new Error(Q)}const ee=await(typeof navigator<"u"?navigator:window.navigator).mediaDevices.getDisplayMedia({video:{width:{ideal:1920,max:1920},height:{ideal:1080,max:1080},frameRate:{ideal:30,max:60}},audio:v});S(ee),await d.current.produceScreen(ee),T(!0);const h=ee.getVideoTracks()[0];h&&(h.onended=()=>{x()})}catch(O){s(O instanceof Error?O.message:"Failed to share screen")}},[x]),M=ze.useCallback(async()=>{if(d.current)try{const v=typeof navigator<"u"?navigator:window.navigator;if(!v||!v.mediaDevices||typeof v.mediaDevices.getUserMedia!="function")throw new Error("Microphone API khng kh dng. Vui lng m bo bn ang s dng phin bn trnh duyt/Tauri h tr getUserMedia.");const O=v.mediaDevices;try{const ee=O.permissions;if(ee&&typeof ee.query=="function"){const h=await ee.query({name:"microphone"});if(console.log("[Microphone] Permission status:",h.state),h.state==="denied")throw new Error("Quyn truy cp microphone  b t chi. Vui lng cp quyn trong System Settings > Privacy & Security > Microphone trn macOS.")}}catch(ee){console.warn("[Microphone] Could not query permission (this is normal):",ee)}console.log("[Microphone] Requesting microphone access...");const q=await O.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,sampleRate:{ideal:48e3},channelCount:{ideal:1}},video:!1});console.log("[Microphone]  Microphone access granted"),c(q),H(!0);const W=await d.current.produceMicrophone(q);W&&(l.current=W,console.log("[Microphone] Microphone producer ID:",W))}catch(v){console.error("[Microphone]  Error accessing microphone:",v);let O="Khng th truy cp microphone.";if(v instanceof Error){const q=v.name||"",W=v.message||"";q==="NotAllowedError"||W.includes("not allowed")||W.includes("permission denied")||W.includes("denied")?O=`Quyn truy cp microphone b t chi. Vui lng:
1. Kim tra System Settings > Privacy & Security > Microphone
2. m bo ng dng c quyn truy cp microphone
3. Th li sau khi cp quyn`:q==="NotFoundError"||W.includes("not found")?O="Khng tm thy microphone. Vui lng kim tra thit b microphone  c kt ni cha.":q==="NotReadableError"||W.includes("not readable")?O="Microphone ang c s dng bi ng dng khc. Vui lng ng cc ng dng khc ang s dng microphone.":O=W||"Khng th truy cp microphone."}s(O)}},[]),b=ze.useCallback(()=>{d.current&&l.current&&(d.current.stopProducer(l.current),l.current=null),k&&(k.getAudioTracks().forEach(v=>{v.stop(),console.log("[Microphone] Stopped audio track")}),c(null)),H(!1),console.log("[Microphone]  Microphone stopped")},[k]),f=ze.useCallback(()=>{x(),b(),d.current?.disconnect(),d.current=null,w("disconnected"),N([]),m(null),H(!1),c(null)},[x,b]);return{connectionState:y,error:_,peers:A,remoteStream:R,localStream:u,isSharing:L,isMicActive:C,connect:g,disconnect:f,startScreenShare:E,startMicrophone:M,stopScreenShare:x,stopMicrophone:b}}function Zv({stream:y,muted:w=!1,className:_="",label:s}){const A=ze.useRef(null);return ze.useEffect(()=>{A.current&&y&&(A.current.srcObject=y)},[y]),ge.jsxs("div",{className:`video-container ${_}`,children:[s&&ge.jsx("div",{className:"video-label",children:s}),ge.jsx("video",{ref:A,autoPlay:!0,playsInline:!0,muted:w,style:{width:"100%",height:"100%",objectFit:"contain",backgroundColor:"#1a1a1a",borderRadius:"8px"}}),!y&&ge.jsx("div",{className:"video-placeholder",children:ge.jsx("span",{children:"ang ch stream..."})})]})}function Iv({serverUrl:y,roomId:w,name:_,onDisconnect:s}){const{connectionState:A,error:N,remoteStream:R,connect:m,disconnect:L}=Xv(),T=async()=>{await m(y,w,_,!1)},u=()=>{L(),s()};return ge.jsxs("div",{className:"student-view",children:[ge.jsxs("div",{className:"header",children:[ge.jsxs("h2",{children:[" Hc sinh: ",_]}),ge.jsx("div",{className:"status",children:ge.jsx("span",{className:`connection-status ${A}`,children:A==="connected"?"  kt ni":A==="connecting"?" ang kt ni...":" Cha kt ni"})})]}),N&&ge.jsxs("div",{className:"error-message",children:[" ",N]}),ge.jsx("div",{className:"video-section",children:ge.jsx(Zv,{stream:R,muted:!1,label:"Mn hnh gio vin",className:"main-video"})}),ge.jsxs("div",{className:"controls",children:[A==="disconnected"&&ge.jsx("button",{onClick:T,className:"btn primary",children:" Kt ni vo lp"}),A!=="disconnected"&&ge.jsx("button",{onClick:u,className:"btn danger",children:" Ri lp"})]}),ge.jsx("div",{className:"room-info",children:ge.jsxs("p",{children:[ge.jsx("strong",{children:"Room ID:"})," ",w]})}),A==="connected"&&!R&&ge.jsx("div",{className:"waiting-message",children:" ang ch gio vin chia s mn hnh..."})]})}function Fv(){const[y,w]=ze.useState(!1),[_,s]=ze.useState(""),[A,N]=ze.useState("classroom-1"),[R,m]=ze.useState(""),L=()=>{if(!_.trim()){alert("Vui lng nhp tn ca bn!");return}if(!R.trim()){alert("Vui lng nhp Server URL t gio vin!");return}w(!0)};return y?ge.jsx(Iv,{serverUrl:R,roomId:A,name:_,onDisconnect:()=>w(!1)}):ge.jsxs("main",{className:"container",children:[ge.jsx("h1",{children:" Screen Sharing"}),ge.jsx("p",{className:"subtitle",children:"Hc sinh - Xem mn hnh gio vin"}),ge.jsxs("div",{className:"form-section",children:[ge.jsxs("div",{className:"form-group",children:[ge.jsx("label",{children:"Tn ca bn:"}),ge.jsx("input",{type:"text",value:_,onChange:T=>s(T.target.value),placeholder:"Nhp tn..."})]}),ge.jsxs("div",{className:"form-group",children:[ge.jsx("label",{children:"Room ID:"}),ge.jsx("input",{type:"text",value:A,onChange:T=>N(T.target.value),placeholder:"classroom-1"})]}),ge.jsxs("div",{className:"form-group",children:[ge.jsx("label",{children:"Server URL (t gio vin):"}),ge.jsx("input",{type:"text",value:R,onChange:T=>m(T.target.value),placeholder:"ws://192.168.1.x:3016"})]})]}),ge.jsx("button",{onClick:L,className:"btn primary full-width",children:" Vo lp hc"})]})}fv.createRoot(document.getElementById("root")).render(ge.jsx(iv.StrictMode,{children:ge.jsx(Fv,{})}));
